import{r as Zm,g as Km,a as Xx}from"./react-vendor-COd4auuD.js";import{W as Qx,K as Zx,L as Kx,w as Jx,Q as Zs,P as Px,T as Fx}from"./chart-vendor-CJKvCeXH.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))r(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function o(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function r(d){if(d.ep)return;d.ep=!0;const f=o(d);fetch(d.href,f)}})();var Ac={exports:{}},Xn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jh;function Wx(){if(Jh)return Xn;Jh=1;var u=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function o(r,d,f){var m=null;if(f!==void 0&&(m=""+f),d.key!==void 0&&(m=""+d.key),"key"in d){f={};for(var p in d)p!=="key"&&(f[p]=d[p])}else f=d;return d=f.ref,{$$typeof:u,type:r,key:m,ref:d!==void 0?d:null,props:f}}return Xn.Fragment=n,Xn.jsx=o,Xn.jsxs=o,Xn}var Ph;function Ix(){return Ph||(Ph=1,Ac.exports=Wx()),Ac.exports}var l=Ix(),y=Zm();const ll=Km(y);var Tc={exports:{}},Qn={},Dc={exports:{}},Ec={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh;function eg(){return Fh||(Fh=1,(function(u){function n(U,ae){var ce=U.length;U.push(ae);e:for(;0<ce;){var de=ce-1>>>1,we=U[de];if(0<d(we,ae))U[de]=ae,U[ce]=we,ce=de;else break e}}function o(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var ae=U[0],ce=U.pop();if(ce!==ae){U[0]=ce;e:for(var de=0,we=U.length,De=we>>>1;de<De;){var je=2*(de+1)-1,Ne=U[je],be=je+1,at=U[be];if(0>d(Ne,ce))be<we&&0>d(at,Ne)?(U[de]=at,U[be]=ce,de=be):(U[de]=Ne,U[je]=ce,de=je);else if(be<we&&0>d(at,ce))U[de]=at,U[be]=ce,de=be;else break e}}return ae}function d(U,ae){var ce=U.sortIndex-ae.sortIndex;return ce!==0?ce:U.id-ae.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;u.unstable_now=function(){return f.now()}}else{var m=Date,p=m.now();u.unstable_now=function(){return m.now()-p}}var x=[],b=[],v=1,j=null,C=3,w=!1,N=!1,k=!1,B=!1,E=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ne(U){for(var ae=o(b);ae!==null;){if(ae.callback===null)r(b);else if(ae.startTime<=U)r(b),ae.sortIndex=ae.expirationTime,n(x,ae);else break;ae=o(b)}}function re(U){if(k=!1,ne(U),!N)if(o(x)!==null)N=!0,Y||(Y=!0,te());else{var ae=o(b);ae!==null&&pe(re,ae.startTime-U)}}var Y=!1,W=-1,F=5,G=-1;function z(){return B?!0:!(u.unstable_now()-G<F)}function D(){if(B=!1,Y){var U=u.unstable_now();G=U;var ae=!0;try{e:{N=!1,k&&(k=!1,H(W),W=-1),w=!0;var ce=C;try{t:{for(ne(U),j=o(x);j!==null&&!(j.expirationTime>U&&z());){var de=j.callback;if(typeof de=="function"){j.callback=null,C=j.priorityLevel;var we=de(j.expirationTime<=U);if(U=u.unstable_now(),typeof we=="function"){j.callback=we,ne(U),ae=!0;break t}j===o(x)&&r(x),ne(U)}else r(x);j=o(x)}if(j!==null)ae=!0;else{var De=o(b);De!==null&&pe(re,De.startTime-U),ae=!1}}break e}finally{j=null,C=ce,w=!1}ae=void 0}}finally{ae?te():Y=!1}}}var te;if(typeof Z=="function")te=function(){Z(D)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,I=se.port2;se.port1.onmessage=D,te=function(){I.postMessage(null)}}else te=function(){E(D,0)};function pe(U,ae){W=E(function(){U(u.unstable_now())},ae)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(U){U.callback=null},u.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<U?Math.floor(1e3/U):5},u.unstable_getCurrentPriorityLevel=function(){return C},u.unstable_next=function(U){switch(C){case 1:case 2:case 3:var ae=3;break;default:ae=C}var ce=C;C=ae;try{return U()}finally{C=ce}},u.unstable_requestPaint=function(){B=!0},u.unstable_runWithPriority=function(U,ae){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ce=C;C=U;try{return ae()}finally{C=ce}},u.unstable_scheduleCallback=function(U,ae,ce){var de=u.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?de+ce:de):ce=de,U){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=ce+we,U={id:v++,callback:ae,priorityLevel:U,startTime:ce,expirationTime:we,sortIndex:-1},ce>de?(U.sortIndex=ce,n(b,U),o(x)===null&&U===o(b)&&(k?(H(W),W=-1):k=!0,pe(re,ce-de))):(U.sortIndex=we,n(x,U),N||w||(N=!0,Y||(Y=!0,te()))),U},u.unstable_shouldYield=z,u.unstable_wrapCallback=function(U){var ae=C;return function(){var ce=C;C=ae;try{return U.apply(this,arguments)}finally{C=ce}}}})(Ec)),Ec}var Wh;function tg(){return Wh||(Wh=1,Dc.exports=eg()),Dc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ih;function ag(){if(Ih)return Qn;Ih=1;var u=tg(),n=Zm(),o=Xx();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x(e){if(f(e)!==e)throw Error(r(188))}function b(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(r(188));return t!==e?null:e}for(var a=e,s=t;;){var i=a.return;if(i===null)break;var c=i.alternate;if(c===null){if(s=i.return,s!==null){a=s;continue}break}if(i.child===c.child){for(c=i.child;c;){if(c===a)return x(i),e;if(c===s)return x(i),t;c=c.sibling}throw Error(r(188))}if(a.return!==s.return)a=i,s=c;else{for(var h=!1,g=i.child;g;){if(g===a){h=!0,a=i,s=c;break}if(g===s){h=!0,s=i,a=c;break}g=g.sibling}if(!h){for(g=c.child;g;){if(g===a){h=!0,a=c,s=i;break}if(g===s){h=!0,s=c,a=i;break}g=g.sibling}if(!h)throw Error(r(189))}}if(a.alternate!==s)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var j=Object.assign,C=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function te(e){return e===null||typeof e!="object"?null:(e=D&&e[D]||e["@@iterator"],typeof e=="function"?e:null)}var se=Symbol.for("react.client.reference");function I(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===se?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case k:return"Fragment";case E:return"Profiler";case B:return"StrictMode";case re:return"Suspense";case Y:return"SuspenseList";case G:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case Z:return e.displayName||"Context";case H:return(e._context.displayName||"Context")+".Consumer";case ne:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W:return t=e.displayName||null,t!==null?t:I(e.type)||"Memo";case F:t=e._payload,e=e._init;try{return I(e(t))}catch{}}return null}var pe=Array.isArray,U=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},de=[],we=-1;function De(e){return{current:e}}function je(e){0>we||(e.current=de[we],de[we]=null,we--)}function Ne(e,t){we++,de[we]=e.current,e.current=t}var be=De(null),at=De(null),ee=De(null),xe=De(null);function Se(e,t){switch(Ne(ee,t),Ne(at,e),Ne(be,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?bh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=bh(t),e=vh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}je(be),Ne(be,e)}function Qe(){je(be),je(at),je(ee)}function ye(e){e.memoizedState!==null&&Ne(xe,e);var t=be.current,a=vh(t,e.type);t!==a&&(Ne(at,e),Ne(be,a))}function ta(e){at.current===e&&(je(be),je(at)),xe.current===e&&(je(xe),qn._currentValue=ce)}var aa,Ma;function At(e){if(aa===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);aa=t&&t[1]||"",Ma=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+aa+e+Ma}var Dt=!1;function Ze(e,t){if(!e||Dt)return"";Dt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var P=function(){throw Error()};if(Object.defineProperty(P.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(P,[])}catch(q){var R=q}Reflect.construct(e,[],P)}else{try{P.call()}catch(q){R=q}e.call(P.prototype)}}else{try{throw Error()}catch(q){R=q}(P=e())&&typeof P.catch=="function"&&P.catch(function(){})}}catch(q){if(q&&R&&typeof q.stack=="string")return[q.stack,R.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=s.DetermineComponentFrameRoot(),h=c[0],g=c[1];if(h&&g){var S=h.split(`
`),L=g.split(`
`);for(i=s=0;s<S.length&&!S[s].includes("DetermineComponentFrameRoot");)s++;for(;i<L.length&&!L[i].includes("DetermineComponentFrameRoot");)i++;if(s===S.length||i===L.length)for(s=S.length-1,i=L.length-1;1<=s&&0<=i&&S[s]!==L[i];)i--;for(;1<=s&&0<=i;s--,i--)if(S[s]!==L[i]){if(s!==1||i!==1)do if(s--,i--,0>i||S[s]!==L[i]){var $=`
`+S[s].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=s&&0<=i);break}}}finally{Dt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?At(a):""}function Ll(e,t){switch(e.tag){case 26:case 27:case 5:return At(e.type);case 16:return At("Lazy");case 13:return e.child!==t&&t!==null?At("Suspense Fallback"):At("Suspense");case 19:return At("SuspenseList");case 0:case 15:return Ze(e.type,!1);case 11:return Ze(e.type.render,!1);case 1:return Ze(e.type,!0);case 31:return At("Activity");default:return""}}function ma(e){try{var t="",a=null;do t+=Ll(e,a),a=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Aa=Object.prototype.hasOwnProperty,Ta=u.unstable_scheduleCallback,la=u.unstable_cancelCallback,Da=u.unstable_shouldYield,Ea=u.unstable_requestPaint,ft=u.unstable_now,il=u.unstable_getCurrentPriorityLevel,Ul=u.unstable_ImmediatePriority,rl=u.unstable_UserBlockingPriority,za=u.unstable_NormalPriority,cs=u.unstable_LowPriority,Rl=u.unstable_IdlePriority,Oa=u.log,us=u.unstable_setDisableYieldValue,$t=null,pt=null;function Xt(e){if(typeof Oa=="function"&&us(e),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode($t,e)}catch{}}var jt=Math.clz32?Math.clz32:Hl,Vl=Math.log,ds=Math.LN2;function Hl(e){return e>>>=0,e===0?32:31-(Vl(e)/ds|0)|0}var Ba=256,_a=262144,La=4194304;function Qt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ua(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var i=0,c=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var g=s&134217727;return g!==0?(s=g&~c,s!==0?i=Qt(s):(h&=g,h!==0?i=Qt(h):a||(a=g&~e,a!==0&&(i=Qt(a))))):(g=s&~c,g!==0?i=Qt(g):h!==0?i=Qt(h):a||(a=s&~e,a!==0&&(i=Qt(a)))),i===0?0:t!==0&&t!==i&&(t&c)===0&&(c=i&-i,a=t&-t,c>=a||c===32&&(a&4194048)!==0)?t:i}function pa(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function fs(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ol(){var e=La;return La<<=1,(La&62914560)===0&&(La=4194304),e}function O(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function A(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function X(e,t,a,s,i,c){var h=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var g=e.entanglements,S=e.expirationTimes,L=e.hiddenUpdates;for(a=h&~a;0<a;){var $=31-jt(a),P=1<<$;g[$]=0,S[$]=-1;var R=L[$];if(R!==null)for(L[$]=null,$=0;$<R.length;$++){var q=R[$];q!==null&&(q.lane&=-536870913)}a&=~P}s!==0&&ie(e,s,0),c!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=c&~(h&~t))}function ie(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-jt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&261930}function J(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-jt(a),i=1<<s;i&t|e[s]&t&&(e[s]|=t),a&=~i}}function le(e,t){var a=t&-t;return a=(a&42)!==0?1:he(a),(a&(e.suspendedLanes|t))!==0?0:a}function he(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function qe(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Te(){var e=ae.p;return e!==0?e:(e=window.event,e===void 0?32:Yh(e.type))}function lt(e,t){var a=ae.p;try{return ae.p=e,t()}finally{ae.p=a}}var Ye=Math.random().toString(36).slice(2),Ce="__reactFiber$"+Ye,Pe="__reactProps$"+Ye,ot="__reactContainer$"+Ye,Bt="__reactEvents$"+Ye,ja="__reactListeners$"+Ye,Ws="__reactHandles$"+Ye,ql="__reactResources$"+Ye,Tt="__reactMarker$"+Ye;function Zt(e){delete e[Ce],delete e[Pe],delete e[Bt],delete e[ja],delete e[Ws]}function sa(e){var t=e[Ce];if(t)return t;for(var a=e.parentNode;a;){if(t=a[ot]||a[Ce]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Ch(e);e!==null;){if(a=e[Ce])return a;e=Ch(e)}return t}e=a,a=e.parentNode}return null}function xa(e){if(e=e[Ce]||e[ot]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ge(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function ct(e){var t=e[ql];return t||(t=e[ql]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Be(e){e[Tt]=!0}var Ee=new Set,tt={};function ga(e,t){Ra(e,t),Ra(e+"Capture",t)}function Ra(e,t){for(tt[e]=t,e=0;e<t.length;e++)Ee.add(t[e])}var wr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Is={},Wn={};function jr(e){return Aa.call(Wn,e)?!0:Aa.call(Is,e)?!1:wr.test(e)?Wn[e]=!0:(Is[e]=!0,!1)}function Yl(e,t,a){if(jr(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function hs(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Et(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}function _t(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function In(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nr(e,t,a){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,c=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(h){a=""+h,c.call(this,h)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(h){a=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function en(e){if(!e._valueTracker){var t=In(e)?"checked":"value";e._valueTracker=Nr(e,t,""+e[t])}}function ei(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=In(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function ms(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ti=/[\n"\\]/g;function Lt(e){return e.replace(ti,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function tn(e,t,a,s,i,c,h,g){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+_t(t)):e.value!==""+_t(t)&&(e.value=""+_t(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?ps(e,h,_t(t)):a!=null?ps(e,h,_t(a)):s!=null&&e.removeAttribute("value"),i==null&&c!=null&&(e.defaultChecked=!!c),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.name=""+_t(g):e.removeAttribute("name")}function an(e,t,a,s,i,c,h,g){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||a!=null){if(!(c!=="submit"&&c!=="reset"||t!=null)){en(e);return}a=a!=null?""+_t(a):"",t=t!=null?""+_t(t):a,g||t===e.value||(e.value=t),e.defaultValue=t}s=s??i,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=g?e.checked:!!s,e.defaultChecked=!!s,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h),en(e)}function ps(e,t,a){t==="number"&&ms(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function cl(e,t,a,s){if(e=e.options,t){t={};for(var i=0;i<a.length;i++)t["$"+a[i]]=!0;for(a=0;a<e.length;a++)i=t.hasOwnProperty("$"+e[a].value),e[a].selected!==i&&(e[a].selected=i),i&&s&&(e[a].defaultSelected=!0)}else{for(a=""+_t(a),t=null,i=0;i<e.length;i++){if(e[i].value===a){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Va(e,t,a){if(t!=null&&(t=""+_t(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+_t(a):""}function V(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(r(92));if(pe(s)){if(1<s.length)throw Error(r(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=_t(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s),en(e)}function K(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var oe=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ke(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||oe.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Ue(e,t,a){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var i in t)s=t[i],t.hasOwnProperty(i)&&a[i]!==s&&ke(e,i,s)}else for(var c in t)t.hasOwnProperty(c)&&ke(e,c,t[c])}function $e(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ut=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ul=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function na(e){return ul.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ha(){}var Sr=null;function kr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xs=null,gs=null;function xu(e){var t=xa(e);if(t&&(e=t.stateNode)){var a=e[Pe]||null;e:switch(e=t.stateNode,t.type){case"input":if(tn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Lt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var i=s[Pe]||null;if(!i)throw Error(r(90));tn(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&ei(s)}break e;case"textarea":Va(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&cl(e,!!a.multiple,t,!1)}}}var Cr=!1;function gu(e,t,a){if(Cr)return e(t,a);Cr=!0;try{var s=e(t);return s}finally{if(Cr=!1,(xs!==null||gs!==null)&&(Yi(),xs&&(t=xs,e=gs,gs=xs=null,xu(t),e)))for(t=0;t<e.length;t++)xu(e[t])}}function ln(e,t){var a=e.stateNode;if(a===null)return null;var s=a[Pe]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,t,typeof a));return a}var qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mr=!1;if(qa)try{var sn={};Object.defineProperty(sn,"passive",{get:function(){Mr=!0}}),window.addEventListener("test",sn,sn),window.removeEventListener("test",sn,sn)}catch{Mr=!1}var dl=null,Ar=null,ai=null;function bu(){if(ai)return ai;var e,t=Ar,a=t.length,s,i="value"in dl?dl.value:dl.textContent,c=i.length;for(e=0;e<a&&t[e]===i[e];e++);var h=a-e;for(s=1;s<=h&&t[a-s]===i[c-s];s++);return ai=i.slice(e,1<s?1-s:void 0)}function li(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function si(){return!0}function vu(){return!1}function Rt(e){function t(a,s,i,c,h){this._reactName=a,this._targetInst=i,this.type=s,this.nativeEvent=c,this.target=h,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(a=e[g],this[g]=a?a(c):c[g]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?si:vu,this.isPropagationStopped=vu,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=si)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=si)},persist:function(){},isPersistent:si}),t}var Gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ni=Rt(Gl),nn=j({},Gl,{view:0,detail:0}),G0=Rt(nn),Tr,Dr,rn,ii=j({},nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rn&&(rn&&e.type==="mousemove"?(Tr=e.screenX-rn.screenX,Dr=e.screenY-rn.screenY):Dr=Tr=0,rn=e),Tr)},movementY:function(e){return"movementY"in e?e.movementY:Dr}}),yu=Rt(ii),$0=j({},ii,{dataTransfer:0}),X0=Rt($0),Q0=j({},nn,{relatedTarget:0}),Er=Rt(Q0),Z0=j({},Gl,{animationName:0,elapsedTime:0,pseudoElement:0}),K0=Rt(Z0),J0=j({},Gl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),P0=Rt(J0),F0=j({},Gl,{data:0}),wu=Rt(F0),W0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ep={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ep[e])?!!t[e]:!1}function zr(){return tp}var ap=j({},nn,{key:function(e){if(e.key){var t=W0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=li(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?I0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zr,charCode:function(e){return e.type==="keypress"?li(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?li(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lp=Rt(ap),sp=j({},ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ju=Rt(sp),np=j({},nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zr}),ip=Rt(np),rp=j({},Gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),op=Rt(rp),cp=j({},ii,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),up=Rt(cp),dp=j({},Gl,{newState:0,oldState:0}),fp=Rt(dp),hp=[9,13,27,32],Or=qa&&"CompositionEvent"in window,on=null;qa&&"documentMode"in document&&(on=document.documentMode);var mp=qa&&"TextEvent"in window&&!on,Nu=qa&&(!Or||on&&8<on&&11>=on),Su=" ",ku=!1;function Cu(e,t){switch(e){case"keyup":return hp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bs=!1;function pp(e,t){switch(e){case"compositionend":return Mu(t);case"keypress":return t.which!==32?null:(ku=!0,Su);case"textInput":return e=t.data,e===Su&&ku?null:e;default:return null}}function xp(e,t){if(bs)return e==="compositionend"||!Or&&Cu(e,t)?(e=bu(),ai=Ar=dl=null,bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nu&&t.locale!=="ko"?null:t.data;default:return null}}var gp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Au(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gp[e.type]:t==="textarea"}function Tu(e,t,a,s){xs?gs?gs.push(s):gs=[s]:xs=s,t=Ji(t,"onChange"),0<t.length&&(a=new ni("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var cn=null,un=null;function bp(e){fh(e,0)}function ri(e){var t=Ge(e);if(ei(t))return e}function Du(e,t){if(e==="change")return t}var Eu=!1;if(qa){var Br;if(qa){var _r="oninput"in document;if(!_r){var zu=document.createElement("div");zu.setAttribute("oninput","return;"),_r=typeof zu.oninput=="function"}Br=_r}else Br=!1;Eu=Br&&(!document.documentMode||9<document.documentMode)}function Ou(){cn&&(cn.detachEvent("onpropertychange",Bu),un=cn=null)}function Bu(e){if(e.propertyName==="value"&&ri(un)){var t=[];Tu(t,un,e,kr(e)),gu(bp,t)}}function vp(e,t,a){e==="focusin"?(Ou(),cn=t,un=a,cn.attachEvent("onpropertychange",Bu)):e==="focusout"&&Ou()}function yp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ri(un)}function wp(e,t){if(e==="click")return ri(t)}function jp(e,t){if(e==="input"||e==="change")return ri(t)}function Np(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kt=typeof Object.is=="function"?Object.is:Np;function dn(e,t){if(Kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var i=a[s];if(!Aa.call(t,i)||!Kt(e[i],t[i]))return!1}return!0}function _u(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lu(e,t){var a=_u(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=_u(a)}}function Uu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Uu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ru(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ms(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=ms(e.document)}return t}function Lr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Sp=qa&&"documentMode"in document&&11>=document.documentMode,vs=null,Ur=null,fn=null,Rr=!1;function Vu(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Rr||vs==null||vs!==ms(s)||(s=vs,"selectionStart"in s&&Lr(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),fn&&dn(fn,s)||(fn=s,s=Ji(Ur,"onSelect"),0<s.length&&(t=new ni("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=vs)))}function $l(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var ys={animationend:$l("Animation","AnimationEnd"),animationiteration:$l("Animation","AnimationIteration"),animationstart:$l("Animation","AnimationStart"),transitionrun:$l("Transition","TransitionRun"),transitionstart:$l("Transition","TransitionStart"),transitioncancel:$l("Transition","TransitionCancel"),transitionend:$l("Transition","TransitionEnd")},Vr={},Hu={};qa&&(Hu=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function Xl(e){if(Vr[e])return Vr[e];if(!ys[e])return e;var t=ys[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Hu)return Vr[e]=t[a];return e}var qu=Xl("animationend"),Yu=Xl("animationiteration"),Gu=Xl("animationstart"),kp=Xl("transitionrun"),Cp=Xl("transitionstart"),Mp=Xl("transitioncancel"),$u=Xl("transitionend"),Xu=new Map,Hr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hr.push("scrollEnd");function ba(e,t){Xu.set(e,t),ga(t,[e])}var oi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ia=[],ws=0,qr=0;function ci(){for(var e=ws,t=qr=ws=0;t<e;){var a=ia[t];ia[t++]=null;var s=ia[t];ia[t++]=null;var i=ia[t];ia[t++]=null;var c=ia[t];if(ia[t++]=null,s!==null&&i!==null){var h=s.pending;h===null?i.next=i:(i.next=h.next,h.next=i),s.pending=i}c!==0&&Qu(a,i,c)}}function ui(e,t,a,s){ia[ws++]=e,ia[ws++]=t,ia[ws++]=a,ia[ws++]=s,qr|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Yr(e,t,a,s){return ui(e,t,a,s),di(e)}function Ql(e,t){return ui(e,null,null,t),di(e)}function Qu(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var i=!1,c=e.return;c!==null;)c.childLanes|=a,s=c.alternate,s!==null&&(s.childLanes|=a),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(i=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,i&&t!==null&&(i=31-jt(a),e=c.hiddenUpdates,s=e[i],s===null?e[i]=[t]:s.push(t),t.lane=a|536870912),c):null}function di(e){if(50<Bn)throw Bn=0,Wo=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var js={};function Ap(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(e,t,a,s){return new Ap(e,t,a,s)}function Gr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ya(e,t){var a=e.alternate;return a===null?(a=Jt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Zu(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function fi(e,t,a,s,i,c){var h=0;if(s=e,typeof e=="function")Gr(e)&&(h=1);else if(typeof e=="string")h=Ox(e,a,be.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case G:return e=Jt(31,a,t,i),e.elementType=G,e.lanes=c,e;case k:return Zl(a.children,i,c,t);case B:h=8,i|=24;break;case E:return e=Jt(12,a,t,i|2),e.elementType=E,e.lanes=c,e;case re:return e=Jt(13,a,t,i),e.elementType=re,e.lanes=c,e;case Y:return e=Jt(19,a,t,i),e.elementType=Y,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Z:h=10;break e;case H:h=9;break e;case ne:h=11;break e;case W:h=14;break e;case F:h=16,s=null;break e}h=29,a=Error(r(130,e===null?"null":typeof e,"")),s=null}return t=Jt(h,a,t,i),t.elementType=e,t.type=s,t.lanes=c,t}function Zl(e,t,a,s){return e=Jt(7,e,s,t),e.lanes=a,e}function $r(e,t,a){return e=Jt(6,e,null,t),e.lanes=a,e}function Ku(e){var t=Jt(18,null,null,0);return t.stateNode=e,t}function Xr(e,t,a){return t=Jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ju=new WeakMap;function ra(e,t){if(typeof e=="object"&&e!==null){var a=Ju.get(e);return a!==void 0?a:(t={value:e,source:t,stack:ma(t)},Ju.set(e,t),t)}return{value:e,source:t,stack:ma(t)}}var Ns=[],Ss=0,hi=null,hn=0,oa=[],ca=0,fl=null,Na=1,Sa="";function Ga(e,t){Ns[Ss++]=hn,Ns[Ss++]=hi,hi=e,hn=t}function Pu(e,t,a){oa[ca++]=Na,oa[ca++]=Sa,oa[ca++]=fl,fl=e;var s=Na;e=Sa;var i=32-jt(s)-1;s&=~(1<<i),a+=1;var c=32-jt(t)+i;if(30<c){var h=i-i%5;c=(s&(1<<h)-1).toString(32),s>>=h,i-=h,Na=1<<32-jt(t)+i|a<<i|s,Sa=c+e}else Na=1<<c|a<<i|s,Sa=e}function Qr(e){e.return!==null&&(Ga(e,1),Pu(e,1,0))}function Zr(e){for(;e===hi;)hi=Ns[--Ss],Ns[Ss]=null,hn=Ns[--Ss],Ns[Ss]=null;for(;e===fl;)fl=oa[--ca],oa[ca]=null,Sa=oa[--ca],oa[ca]=null,Na=oa[--ca],oa[ca]=null}function Fu(e,t){oa[ca++]=Na,oa[ca++]=Sa,oa[ca++]=fl,Na=t.id,Sa=t.overflow,fl=e}var St=null,st=null,Re=!1,hl=null,ua=!1,Kr=Error(r(519));function ml(e){var t=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mn(ra(t,e)),Kr}function Wu(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[Ce]=e,t[Pe]=s,a){case"dialog":Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":case"embed":Oe("load",t);break;case"video":case"audio":for(a=0;a<Ln.length;a++)Oe(Ln[a],t);break;case"source":Oe("error",t);break;case"img":case"image":case"link":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"input":Oe("invalid",t),an(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Oe("invalid",t);break;case"textarea":Oe("invalid",t),V(t,s.value,s.defaultValue,s.children)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||xh(t.textContent,a)?(s.popover!=null&&(Oe("beforetoggle",t),Oe("toggle",t)),s.onScroll!=null&&Oe("scroll",t),s.onScrollEnd!=null&&Oe("scrollend",t),s.onClick!=null&&(t.onclick=Ha),t=!0):t=!1,t||ml(e,!0)}function Iu(e){for(St=e.return;St;)switch(St.tag){case 5:case 31:case 13:ua=!1;return;case 27:case 3:ua=!0;return;default:St=St.return}}function ks(e){if(e!==St)return!1;if(!Re)return Iu(e),Re=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||hc(e.type,e.memoizedProps)),a=!a),a&&st&&ml(e),Iu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));st=kh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));st=kh(e)}else t===27?(t=st,Al(e.type)?(e=bc,bc=null,st=e):st=t):st=St?fa(e.stateNode.nextSibling):null;return!0}function Kl(){st=St=null,Re=!1}function Jr(){var e=hl;return e!==null&&(Yt===null?Yt=e:Yt.push.apply(Yt,e),hl=null),e}function mn(e){hl===null?hl=[e]:hl.push(e)}var Pr=De(null),Jl=null,$a=null;function pl(e,t,a){Ne(Pr,t._currentValue),t._currentValue=a}function Xa(e){e._currentValue=Pr.current,je(Pr)}function Fr(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function Wr(e,t,a,s){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){var h=i.child;c=c.firstContext;e:for(;c!==null;){var g=c;c=i;for(var S=0;S<t.length;S++)if(g.context===t[S]){c.lanes|=a,g=c.alternate,g!==null&&(g.lanes|=a),Fr(c.return,a,e),s||(h=null);break e}c=g.next}}else if(i.tag===18){if(h=i.return,h===null)throw Error(r(341));h.lanes|=a,c=h.alternate,c!==null&&(c.lanes|=a),Fr(h,a,e),h=null}else h=i.child;if(h!==null)h.return=i;else for(h=i;h!==null;){if(h===e){h=null;break}if(i=h.sibling,i!==null){i.return=h.return,h=i;break}h=h.return}i=h}}function Cs(e,t,a,s){e=null;for(var i=t,c=!1;i!==null;){if(!c){if((i.flags&524288)!==0)c=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var h=i.alternate;if(h===null)throw Error(r(387));if(h=h.memoizedProps,h!==null){var g=i.type;Kt(i.pendingProps.value,h.value)||(e!==null?e.push(g):e=[g])}}else if(i===xe.current){if(h=i.alternate,h===null)throw Error(r(387));h.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(qn):e=[qn])}i=i.return}e!==null&&Wr(t,e,a,s),t.flags|=262144}function mi(e){for(e=e.firstContext;e!==null;){if(!Kt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pl(e){Jl=e,$a=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function kt(e){return ed(Jl,e)}function pi(e,t){return Jl===null&&Pl(e),ed(e,t)}function ed(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},$a===null){if(e===null)throw Error(r(308));$a=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else $a=$a.next=t;return a}var Tp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Dp=u.unstable_scheduleCallback,Ep=u.unstable_NormalPriority,xt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ir(){return{controller:new Tp,data:new Map,refCount:0}}function pn(e){e.refCount--,e.refCount===0&&Dp(Ep,function(){e.controller.abort()})}var xn=null,eo=0,Ms=0,As=null;function zp(e,t){if(xn===null){var a=xn=[];eo=0,Ms=sc(),As={status:"pending",value:void 0,then:function(s){a.push(s)}}}return eo++,t.then(td,td),t}function td(){if(--eo===0&&xn!==null){As!==null&&(As.status="fulfilled");var e=xn;xn=null,Ms=0,As=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Op(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(i){a.push(i)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var i=0;i<a.length;i++)(0,a[i])(t)},function(i){for(s.status="rejected",s.reason=i,i=0;i<a.length;i++)(0,a[i])(void 0)}),s}var ad=U.S;U.S=function(e,t){Hf=ft(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&zp(e,t),ad!==null&&ad(e,t)};var Fl=De(null);function to(){var e=Fl.current;return e!==null?e:et.pooledCache}function xi(e,t){t===null?Ne(Fl,Fl.current):Ne(Fl,t.pool)}function ld(){var e=to();return e===null?null:{parent:xt._currentValue,pool:e}}var Ts=Error(r(460)),ao=Error(r(474)),gi=Error(r(542)),bi={then:function(){}};function sd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function nd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Ha,Ha),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,rd(e),e;default:if(typeof t.status=="string")t.then(Ha,Ha);else{if(e=et,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=s}},function(s){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,rd(e),e}throw Il=t,Ts}}function Wl(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Il=a,Ts):a}}var Il=null;function id(){if(Il===null)throw Error(r(459));var e=Il;return Il=null,e}function rd(e){if(e===Ts||e===gi)throw Error(r(483))}var Ds=null,gn=0;function vi(e){var t=gn;return gn+=1,Ds===null&&(Ds=[]),nd(Ds,e,t)}function bn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function yi(e,t){throw t.$$typeof===C?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function od(e){function t(T,M){if(e){var _=T.deletions;_===null?(T.deletions=[M],T.flags|=16):_.push(M)}}function a(T,M){if(!e)return null;for(;M!==null;)t(T,M),M=M.sibling;return null}function s(T){for(var M=new Map;T!==null;)T.key!==null?M.set(T.key,T):M.set(T.index,T),T=T.sibling;return M}function i(T,M){return T=Ya(T,M),T.index=0,T.sibling=null,T}function c(T,M,_){return T.index=_,e?(_=T.alternate,_!==null?(_=_.index,_<M?(T.flags|=67108866,M):_):(T.flags|=67108866,M)):(T.flags|=1048576,M)}function h(T){return e&&T.alternate===null&&(T.flags|=67108866),T}function g(T,M,_,Q){return M===null||M.tag!==6?(M=$r(_,T.mode,Q),M.return=T,M):(M=i(M,_),M.return=T,M)}function S(T,M,_,Q){var ge=_.type;return ge===k?$(T,M,_.props.children,Q,_.key):M!==null&&(M.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===F&&Wl(ge)===M.type)?(M=i(M,_.props),bn(M,_),M.return=T,M):(M=fi(_.type,_.key,_.props,null,T.mode,Q),bn(M,_),M.return=T,M)}function L(T,M,_,Q){return M===null||M.tag!==4||M.stateNode.containerInfo!==_.containerInfo||M.stateNode.implementation!==_.implementation?(M=Xr(_,T.mode,Q),M.return=T,M):(M=i(M,_.children||[]),M.return=T,M)}function $(T,M,_,Q,ge){return M===null||M.tag!==7?(M=Zl(_,T.mode,Q,ge),M.return=T,M):(M=i(M,_),M.return=T,M)}function P(T,M,_){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=$r(""+M,T.mode,_),M.return=T,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case w:return _=fi(M.type,M.key,M.props,null,T.mode,_),bn(_,M),_.return=T,_;case N:return M=Xr(M,T.mode,_),M.return=T,M;case F:return M=Wl(M),P(T,M,_)}if(pe(M)||te(M))return M=Zl(M,T.mode,_,null),M.return=T,M;if(typeof M.then=="function")return P(T,vi(M),_);if(M.$$typeof===Z)return P(T,pi(T,M),_);yi(T,M)}return null}function R(T,M,_,Q){var ge=M!==null?M.key:null;if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return ge!==null?null:g(T,M,""+_,Q);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case w:return _.key===ge?S(T,M,_,Q):null;case N:return _.key===ge?L(T,M,_,Q):null;case F:return _=Wl(_),R(T,M,_,Q)}if(pe(_)||te(_))return ge!==null?null:$(T,M,_,Q,null);if(typeof _.then=="function")return R(T,M,vi(_),Q);if(_.$$typeof===Z)return R(T,M,pi(T,_),Q);yi(T,_)}return null}function q(T,M,_,Q,ge){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return T=T.get(_)||null,g(M,T,""+Q,ge);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case w:return T=T.get(Q.key===null?_:Q.key)||null,S(M,T,Q,ge);case N:return T=T.get(Q.key===null?_:Q.key)||null,L(M,T,Q,ge);case F:return Q=Wl(Q),q(T,M,_,Q,ge)}if(pe(Q)||te(Q))return T=T.get(_)||null,$(M,T,Q,ge,null);if(typeof Q.then=="function")return q(T,M,_,vi(Q),ge);if(Q.$$typeof===Z)return q(T,M,_,pi(M,Q),ge);yi(M,Q)}return null}function fe(T,M,_,Q){for(var ge=null,Ve=null,me=M,Ae=M=0,Le=null;me!==null&&Ae<_.length;Ae++){me.index>Ae?(Le=me,me=null):Le=me.sibling;var He=R(T,me,_[Ae],Q);if(He===null){me===null&&(me=Le);break}e&&me&&He.alternate===null&&t(T,me),M=c(He,M,Ae),Ve===null?ge=He:Ve.sibling=He,Ve=He,me=Le}if(Ae===_.length)return a(T,me),Re&&Ga(T,Ae),ge;if(me===null){for(;Ae<_.length;Ae++)me=P(T,_[Ae],Q),me!==null&&(M=c(me,M,Ae),Ve===null?ge=me:Ve.sibling=me,Ve=me);return Re&&Ga(T,Ae),ge}for(me=s(me);Ae<_.length;Ae++)Le=q(me,T,Ae,_[Ae],Q),Le!==null&&(e&&Le.alternate!==null&&me.delete(Le.key===null?Ae:Le.key),M=c(Le,M,Ae),Ve===null?ge=Le:Ve.sibling=Le,Ve=Le);return e&&me.forEach(function(Ol){return t(T,Ol)}),Re&&Ga(T,Ae),ge}function ve(T,M,_,Q){if(_==null)throw Error(r(151));for(var ge=null,Ve=null,me=M,Ae=M=0,Le=null,He=_.next();me!==null&&!He.done;Ae++,He=_.next()){me.index>Ae?(Le=me,me=null):Le=me.sibling;var Ol=R(T,me,He.value,Q);if(Ol===null){me===null&&(me=Le);break}e&&me&&Ol.alternate===null&&t(T,me),M=c(Ol,M,Ae),Ve===null?ge=Ol:Ve.sibling=Ol,Ve=Ol,me=Le}if(He.done)return a(T,me),Re&&Ga(T,Ae),ge;if(me===null){for(;!He.done;Ae++,He=_.next())He=P(T,He.value,Q),He!==null&&(M=c(He,M,Ae),Ve===null?ge=He:Ve.sibling=He,Ve=He);return Re&&Ga(T,Ae),ge}for(me=s(me);!He.done;Ae++,He=_.next())He=q(me,T,Ae,He.value,Q),He!==null&&(e&&He.alternate!==null&&me.delete(He.key===null?Ae:He.key),M=c(He,M,Ae),Ve===null?ge=He:Ve.sibling=He,Ve=He);return e&&me.forEach(function($x){return t(T,$x)}),Re&&Ga(T,Ae),ge}function Ie(T,M,_,Q){if(typeof _=="object"&&_!==null&&_.type===k&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case w:e:{for(var ge=_.key;M!==null;){if(M.key===ge){if(ge=_.type,ge===k){if(M.tag===7){a(T,M.sibling),Q=i(M,_.props.children),Q.return=T,T=Q;break e}}else if(M.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===F&&Wl(ge)===M.type){a(T,M.sibling),Q=i(M,_.props),bn(Q,_),Q.return=T,T=Q;break e}a(T,M);break}else t(T,M);M=M.sibling}_.type===k?(Q=Zl(_.props.children,T.mode,Q,_.key),Q.return=T,T=Q):(Q=fi(_.type,_.key,_.props,null,T.mode,Q),bn(Q,_),Q.return=T,T=Q)}return h(T);case N:e:{for(ge=_.key;M!==null;){if(M.key===ge)if(M.tag===4&&M.stateNode.containerInfo===_.containerInfo&&M.stateNode.implementation===_.implementation){a(T,M.sibling),Q=i(M,_.children||[]),Q.return=T,T=Q;break e}else{a(T,M);break}else t(T,M);M=M.sibling}Q=Xr(_,T.mode,Q),Q.return=T,T=Q}return h(T);case F:return _=Wl(_),Ie(T,M,_,Q)}if(pe(_))return fe(T,M,_,Q);if(te(_)){if(ge=te(_),typeof ge!="function")throw Error(r(150));return _=ge.call(_),ve(T,M,_,Q)}if(typeof _.then=="function")return Ie(T,M,vi(_),Q);if(_.$$typeof===Z)return Ie(T,M,pi(T,_),Q);yi(T,_)}return typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint"?(_=""+_,M!==null&&M.tag===6?(a(T,M.sibling),Q=i(M,_),Q.return=T,T=Q):(a(T,M),Q=$r(_,T.mode,Q),Q.return=T,T=Q),h(T)):a(T,M)}return function(T,M,_,Q){try{gn=0;var ge=Ie(T,M,_,Q);return Ds=null,ge}catch(me){if(me===Ts||me===gi)throw me;var Ve=Jt(29,me,null,T.mode);return Ve.lanes=Q,Ve.return=T,Ve}finally{}}}var es=od(!0),cd=od(!1),xl=!1;function lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function so(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function gl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bl(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Xe&2)!==0){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,t=di(e),Qu(e,null,a),t}return ui(e,s,t,a),di(e)}function vn(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,J(e,a)}}function no(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var i=null,c=null;if(a=a.firstBaseUpdate,a!==null){do{var h={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};c===null?i=c=h:c=c.next=h,a=a.next}while(a!==null);c===null?i=c=t:c=c.next=t}else i=c=t;a={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:c,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var io=!1;function yn(){if(io){var e=As;if(e!==null)throw e}}function wn(e,t,a,s){io=!1;var i=e.updateQueue;xl=!1;var c=i.firstBaseUpdate,h=i.lastBaseUpdate,g=i.shared.pending;if(g!==null){i.shared.pending=null;var S=g,L=S.next;S.next=null,h===null?c=L:h.next=L,h=S;var $=e.alternate;$!==null&&($=$.updateQueue,g=$.lastBaseUpdate,g!==h&&(g===null?$.firstBaseUpdate=L:g.next=L,$.lastBaseUpdate=S))}if(c!==null){var P=i.baseState;h=0,$=L=S=null,g=c;do{var R=g.lane&-536870913,q=R!==g.lane;if(q?(_e&R)===R:(s&R)===R){R!==0&&R===Ms&&(io=!0),$!==null&&($=$.next={lane:0,tag:g.tag,payload:g.payload,callback:null,next:null});e:{var fe=e,ve=g;R=t;var Ie=a;switch(ve.tag){case 1:if(fe=ve.payload,typeof fe=="function"){P=fe.call(Ie,P,R);break e}P=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ve.payload,R=typeof fe=="function"?fe.call(Ie,P,R):fe,R==null)break e;P=j({},P,R);break e;case 2:xl=!0}}R=g.callback,R!==null&&(e.flags|=64,q&&(e.flags|=8192),q=i.callbacks,q===null?i.callbacks=[R]:q.push(R))}else q={lane:R,tag:g.tag,payload:g.payload,callback:g.callback,next:null},$===null?(L=$=q,S=P):$=$.next=q,h|=R;if(g=g.next,g===null){if(g=i.shared.pending,g===null)break;q=g,g=q.next,q.next=null,i.lastBaseUpdate=q,i.shared.pending=null}}while(!0);$===null&&(S=P),i.baseState=S,i.firstBaseUpdate=L,i.lastBaseUpdate=$,c===null&&(i.shared.lanes=0),Nl|=h,e.lanes=h,e.memoizedState=P}}function ud(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function dd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)ud(a[e],t)}var Es=De(null),wi=De(0);function fd(e,t){e=el,Ne(wi,e),Ne(Es,t),el=e|t.baseLanes}function ro(){Ne(wi,el),Ne(Es,Es.current)}function oo(){el=wi.current,je(Es),je(wi)}var Pt=De(null),da=null;function vl(e){var t=e.alternate;Ne(ht,ht.current&1),Ne(Pt,e),da===null&&(t===null||Es.current!==null||t.memoizedState!==null)&&(da=e)}function co(e){Ne(ht,ht.current),Ne(Pt,e),da===null&&(da=e)}function hd(e){e.tag===22?(Ne(ht,ht.current),Ne(Pt,e),da===null&&(da=e)):yl()}function yl(){Ne(ht,ht.current),Ne(Pt,Pt.current)}function Ft(e){je(Pt),da===e&&(da=null),je(ht)}var ht=De(0);function ji(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||xc(a)||gc(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qa=0,Me=null,Fe=null,gt=null,Ni=!1,zs=!1,ts=!1,Si=0,jn=0,Os=null,Bp=0;function ut(){throw Error(r(321))}function uo(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Kt(e[a],t[a]))return!1;return!0}function fo(e,t,a,s,i,c){return Qa=c,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,U.H=e===null||e.memoizedState===null?Pd:Mo,ts=!1,c=a(s,i),ts=!1,zs&&(c=pd(t,a,s,i)),md(e),c}function md(e){U.H=kn;var t=Fe!==null&&Fe.next!==null;if(Qa=0,gt=Fe=Me=null,Ni=!1,jn=0,Os=null,t)throw Error(r(300));e===null||bt||(e=e.dependencies,e!==null&&mi(e)&&(bt=!0))}function pd(e,t,a,s){Me=e;var i=0;do{if(zs&&(Os=null),jn=0,zs=!1,25<=i)throw Error(r(301));if(i+=1,gt=Fe=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}U.H=Fd,c=t(a,s)}while(zs);return c}function _p(){var e=U.H,t=e.useState()[0];return t=typeof t.then=="function"?Nn(t):t,e=e.useState()[0],(Fe!==null?Fe.memoizedState:null)!==e&&(Me.flags|=1024),t}function ho(){var e=Si!==0;return Si=0,e}function mo(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function po(e){if(Ni){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ni=!1}Qa=0,gt=Fe=Me=null,zs=!1,jn=Si=0,Os=null}function zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Me.memoizedState=gt=e:gt=gt.next=e,gt}function mt(){if(Fe===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var t=gt===null?Me.memoizedState:gt.next;if(t!==null)gt=t,Fe=e;else{if(e===null)throw Me.alternate===null?Error(r(467)):Error(r(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},gt===null?Me.memoizedState=gt=e:gt=gt.next=e}return gt}function ki(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nn(e){var t=jn;return jn+=1,Os===null&&(Os=[]),e=nd(Os,e,t),t=Me,(gt===null?t.memoizedState:gt.next)===null&&(t=t.alternate,U.H=t===null||t.memoizedState===null?Pd:Mo),e}function Ci(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Nn(e);if(e.$$typeof===Z)return kt(e)}throw Error(r(438,String(e)))}function xo(e){var t=null,a=Me.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=Me.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=ki(),Me.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=z;return t.index++,a}function Za(e,t){return typeof t=="function"?t(e):t}function Mi(e){var t=mt();return go(t,Fe,e)}function go(e,t,a){var s=e.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=a;var i=e.baseQueue,c=s.pending;if(c!==null){if(i!==null){var h=i.next;i.next=c.next,c.next=h}t.baseQueue=i=c,s.pending=null}if(c=e.baseState,i===null)e.memoizedState=c;else{t=i.next;var g=h=null,S=null,L=t,$=!1;do{var P=L.lane&-536870913;if(P!==L.lane?(_e&P)===P:(Qa&P)===P){var R=L.revertLane;if(R===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),P===Ms&&($=!0);else if((Qa&R)===R){L=L.next,R===Ms&&($=!0);continue}else P={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},S===null?(g=S=P,h=c):S=S.next=P,Me.lanes|=R,Nl|=R;P=L.action,ts&&a(c,P),c=L.hasEagerState?L.eagerState:a(c,P)}else R={lane:P,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},S===null?(g=S=R,h=c):S=S.next=R,Me.lanes|=P,Nl|=P;L=L.next}while(L!==null&&L!==t);if(S===null?h=c:S.next=g,!Kt(c,e.memoizedState)&&(bt=!0,$&&(a=As,a!==null)))throw a;e.memoizedState=c,e.baseState=h,e.baseQueue=S,s.lastRenderedState=c}return i===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function bo(e){var t=mt(),a=t.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var s=a.dispatch,i=a.pending,c=t.memoizedState;if(i!==null){a.pending=null;var h=i=i.next;do c=e(c,h.action),h=h.next;while(h!==i);Kt(c,t.memoizedState)||(bt=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),a.lastRenderedState=c}return[c,s]}function xd(e,t,a){var s=Me,i=mt(),c=Re;if(c){if(a===void 0)throw Error(r(407));a=a()}else a=t();var h=!Kt((Fe||i).memoizedState,a);if(h&&(i.memoizedState=a,bt=!0),i=i.queue,wo(vd.bind(null,s,i,e),[e]),i.getSnapshot!==t||h||gt!==null&&gt.memoizedState.tag&1){if(s.flags|=2048,Bs(9,{destroy:void 0},bd.bind(null,s,i,a,t),null),et===null)throw Error(r(349));c||(Qa&127)!==0||gd(s,t,a)}return a}function gd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Me.updateQueue,t===null?(t=ki(),Me.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function bd(e,t,a,s){t.value=a,t.getSnapshot=s,yd(t)&&wd(e)}function vd(e,t,a){return a(function(){yd(t)&&wd(e)})}function yd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Kt(e,a)}catch{return!0}}function wd(e){var t=Ql(e,2);t!==null&&Gt(t,e,2)}function vo(e){var t=zt();if(typeof e=="function"){var a=e;if(e=a(),ts){Xt(!0);try{a()}finally{Xt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:e},t}function jd(e,t,a,s){return e.baseState=a,go(e,Fe,typeof s=="function"?s:Za)}function Lp(e,t,a,s,i){if(Di(e))throw Error(r(485));if(e=t.action,e!==null){var c={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){c.listeners.push(h)}};U.T!==null?a(!0):c.isTransition=!1,s(c),a=t.pending,a===null?(c.next=t.pending=c,Nd(t,c)):(c.next=a.next,t.pending=a.next=c)}}function Nd(e,t){var a=t.action,s=t.payload,i=e.state;if(t.isTransition){var c=U.T,h={};U.T=h;try{var g=a(i,s),S=U.S;S!==null&&S(h,g),Sd(e,t,g)}catch(L){yo(e,t,L)}finally{c!==null&&h.types!==null&&(c.types=h.types),U.T=c}}else try{c=a(i,s),Sd(e,t,c)}catch(L){yo(e,t,L)}}function Sd(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){kd(e,t,s)},function(s){return yo(e,t,s)}):kd(e,t,a)}function kd(e,t,a){t.status="fulfilled",t.value=a,Cd(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Nd(e,a)))}function yo(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,Cd(t),t=t.next;while(t!==s)}e.action=null}function Cd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Md(e,t){return t}function Ad(e,t){if(Re){var a=et.formState;if(a!==null){e:{var s=Me;if(Re){if(st){t:{for(var i=st,c=ua;i.nodeType!==8;){if(!c){i=null;break t}if(i=fa(i.nextSibling),i===null){i=null;break t}}c=i.data,i=c==="F!"||c==="F"?i:null}if(i){st=fa(i.nextSibling),s=i.data==="F!";break e}}ml(s)}s=!1}s&&(t=a[0])}}return a=zt(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Md,lastRenderedState:t},a.queue=s,a=Zd.bind(null,Me,s),s.dispatch=a,s=vo(!1),c=Co.bind(null,Me,!1,s.queue),s=zt(),i={state:t,dispatch:null,action:e,pending:null},s.queue=i,a=Lp.bind(null,Me,i,c,a),i.dispatch=a,s.memoizedState=e,[t,a,!1]}function Td(e){var t=mt();return Dd(t,Fe,e)}function Dd(e,t,a){if(t=go(e,t,Md)[0],e=Mi(Za)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Nn(t)}catch(h){throw h===Ts?gi:h}else s=t;t=mt();var i=t.queue,c=i.dispatch;return a!==t.memoizedState&&(Me.flags|=2048,Bs(9,{destroy:void 0},Up.bind(null,i,a),null)),[s,c,e]}function Up(e,t){e.action=t}function Ed(e){var t=mt(),a=Fe;if(a!==null)return Dd(t,a,e);mt(),t=t.memoizedState,a=mt();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Bs(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=Me.updateQueue,t===null&&(t=ki(),Me.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function zd(){return mt().memoizedState}function Ai(e,t,a,s){var i=zt();Me.flags|=e,i.memoizedState=Bs(1|t,{destroy:void 0},a,s===void 0?null:s)}function Ti(e,t,a,s){var i=mt();s=s===void 0?null:s;var c=i.memoizedState.inst;Fe!==null&&s!==null&&uo(s,Fe.memoizedState.deps)?i.memoizedState=Bs(t,c,a,s):(Me.flags|=e,i.memoizedState=Bs(1|t,c,a,s))}function Od(e,t){Ai(8390656,8,e,t)}function wo(e,t){Ti(2048,8,e,t)}function Rp(e){Me.flags|=4;var t=Me.updateQueue;if(t===null)t=ki(),Me.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Bd(e){var t=mt().memoizedState;return Rp({ref:t,nextImpl:e}),function(){if((Xe&2)!==0)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function _d(e,t){return Ti(4,2,e,t)}function Ld(e,t){return Ti(4,4,e,t)}function Ud(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rd(e,t,a){a=a!=null?a.concat([e]):null,Ti(4,4,Ud.bind(null,t,e),a)}function jo(){}function Vd(e,t){var a=mt();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&uo(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function Hd(e,t){var a=mt();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&uo(t,s[1]))return s[0];if(s=e(),ts){Xt(!0);try{e()}finally{Xt(!1)}}return a.memoizedState=[s,t],s}function No(e,t,a){return a===void 0||(Qa&1073741824)!==0&&(_e&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Yf(),Me.lanes|=e,Nl|=e,a)}function qd(e,t,a,s){return Kt(a,t)?a:Es.current!==null?(e=No(e,a,s),Kt(e,t)||(bt=!0),e):(Qa&42)===0||(Qa&1073741824)!==0&&(_e&261930)===0?(bt=!0,e.memoizedState=a):(e=Yf(),Me.lanes|=e,Nl|=e,t)}function Yd(e,t,a,s,i){var c=ae.p;ae.p=c!==0&&8>c?c:8;var h=U.T,g={};U.T=g,Co(e,!1,t,a);try{var S=i(),L=U.S;if(L!==null&&L(g,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var $=Op(S,s);Sn(e,t,$,ea(e))}else Sn(e,t,s,ea(e))}catch(P){Sn(e,t,{then:function(){},status:"rejected",reason:P},ea())}finally{ae.p=c,h!==null&&g.types!==null&&(h.types=g.types),U.T=h}}function Vp(){}function So(e,t,a,s){if(e.tag!==5)throw Error(r(476));var i=Gd(e).queue;Yd(e,i,t,ce,a===null?Vp:function(){return $d(e),a(s)})}function Gd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:ce},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function $d(e){var t=Gd(e);t.next===null&&(t=e.alternate.memoizedState),Sn(e,t.next.queue,{},ea())}function ko(){return kt(qn)}function Xd(){return mt().memoizedState}function Qd(){return mt().memoizedState}function Hp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=ea();e=gl(a);var s=bl(t,e,a);s!==null&&(Gt(s,t,a),vn(s,t,a)),t={cache:Ir()},e.payload=t;return}t=t.return}}function qp(e,t,a){var s=ea();a={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Di(e)?Kd(t,a):(a=Yr(e,t,a,s),a!==null&&(Gt(a,e,s),Jd(a,t,s)))}function Zd(e,t,a){var s=ea();Sn(e,t,a,s)}function Sn(e,t,a,s){var i={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Di(e))Kd(t,i);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var h=t.lastRenderedState,g=c(h,a);if(i.hasEagerState=!0,i.eagerState=g,Kt(g,h))return ui(e,t,i,0),et===null&&ci(),!1}catch{}finally{}if(a=Yr(e,t,i,s),a!==null)return Gt(a,e,s),Jd(a,t,s),!0}return!1}function Co(e,t,a,s){if(s={lane:2,revertLane:sc(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Di(e)){if(t)throw Error(r(479))}else t=Yr(e,a,s,2),t!==null&&Gt(t,e,2)}function Di(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function Kd(e,t){zs=Ni=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Jd(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,J(e,a)}}var kn={readContext:kt,use:Ci,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut};kn.useEffectEvent=ut;var Pd={readContext:kt,use:Ci,useCallback:function(e,t){return zt().memoizedState=[e,t===void 0?null:t],e},useContext:kt,useEffect:Od,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Ai(4194308,4,Ud.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Ai(4194308,4,e,t)},useInsertionEffect:function(e,t){Ai(4,2,e,t)},useMemo:function(e,t){var a=zt();t=t===void 0?null:t;var s=e();if(ts){Xt(!0);try{e()}finally{Xt(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=zt();if(a!==void 0){var i=a(t);if(ts){Xt(!0);try{a(t)}finally{Xt(!1)}}}else i=t;return s.memoizedState=s.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},s.queue=e,e=e.dispatch=qp.bind(null,Me,e),[s.memoizedState,e]},useRef:function(e){var t=zt();return e={current:e},t.memoizedState=e},useState:function(e){e=vo(e);var t=e.queue,a=Zd.bind(null,Me,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:jo,useDeferredValue:function(e,t){var a=zt();return No(a,e,t)},useTransition:function(){var e=vo(!1);return e=Yd.bind(null,Me,e.queue,!0,!1),zt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=Me,i=zt();if(Re){if(a===void 0)throw Error(r(407));a=a()}else{if(a=t(),et===null)throw Error(r(349));(_e&127)!==0||gd(s,t,a)}i.memoizedState=a;var c={value:a,getSnapshot:t};return i.queue=c,Od(vd.bind(null,s,c,e),[e]),s.flags|=2048,Bs(9,{destroy:void 0},bd.bind(null,s,c,a,t),null),a},useId:function(){var e=zt(),t=et.identifierPrefix;if(Re){var a=Sa,s=Na;a=(s&~(1<<32-jt(s)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Si++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Bp++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ko,useFormState:Ad,useActionState:Ad,useOptimistic:function(e){var t=zt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Co.bind(null,Me,!0,a),a.dispatch=t,[e,t]},useMemoCache:xo,useCacheRefresh:function(){return zt().memoizedState=Hp.bind(null,Me)},useEffectEvent:function(e){var t=zt(),a={impl:e};return t.memoizedState=a,function(){if((Xe&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Mo={readContext:kt,use:Ci,useCallback:Vd,useContext:kt,useEffect:wo,useImperativeHandle:Rd,useInsertionEffect:_d,useLayoutEffect:Ld,useMemo:Hd,useReducer:Mi,useRef:zd,useState:function(){return Mi(Za)},useDebugValue:jo,useDeferredValue:function(e,t){var a=mt();return qd(a,Fe.memoizedState,e,t)},useTransition:function(){var e=Mi(Za)[0],t=mt().memoizedState;return[typeof e=="boolean"?e:Nn(e),t]},useSyncExternalStore:xd,useId:Xd,useHostTransitionStatus:ko,useFormState:Td,useActionState:Td,useOptimistic:function(e,t){var a=mt();return jd(a,Fe,e,t)},useMemoCache:xo,useCacheRefresh:Qd};Mo.useEffectEvent=Bd;var Fd={readContext:kt,use:Ci,useCallback:Vd,useContext:kt,useEffect:wo,useImperativeHandle:Rd,useInsertionEffect:_d,useLayoutEffect:Ld,useMemo:Hd,useReducer:bo,useRef:zd,useState:function(){return bo(Za)},useDebugValue:jo,useDeferredValue:function(e,t){var a=mt();return Fe===null?No(a,e,t):qd(a,Fe.memoizedState,e,t)},useTransition:function(){var e=bo(Za)[0],t=mt().memoizedState;return[typeof e=="boolean"?e:Nn(e),t]},useSyncExternalStore:xd,useId:Xd,useHostTransitionStatus:ko,useFormState:Ed,useActionState:Ed,useOptimistic:function(e,t){var a=mt();return Fe!==null?jd(a,Fe,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:xo,useCacheRefresh:Qd};Fd.useEffectEvent=Bd;function Ao(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:j({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var To={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=ea(),i=gl(s);i.payload=t,a!=null&&(i.callback=a),t=bl(e,i,s),t!==null&&(Gt(t,e,s),vn(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=ea(),i=gl(s);i.tag=1,i.payload=t,a!=null&&(i.callback=a),t=bl(e,i,s),t!==null&&(Gt(t,e,s),vn(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=ea(),s=gl(a);s.tag=2,t!=null&&(s.callback=t),t=bl(e,s,a),t!==null&&(Gt(t,e,a),vn(t,e,a))}};function Wd(e,t,a,s,i,c,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,c,h):t.prototype&&t.prototype.isPureReactComponent?!dn(a,s)||!dn(i,c):!0}function Id(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&To.enqueueReplaceState(t,t.state,null)}function as(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=j({},a));for(var i in e)a[i]===void 0&&(a[i]=e[i])}return a}function ef(e){oi(e)}function tf(e){console.error(e)}function af(e){oi(e)}function Ei(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function lf(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Do(e,t,a){return a=gl(a),a.tag=3,a.payload={element:null},a.callback=function(){Ei(e,t)},a}function sf(e){return e=gl(e),e.tag=3,e}function nf(e,t,a,s){var i=a.type.getDerivedStateFromError;if(typeof i=="function"){var c=s.value;e.payload=function(){return i(c)},e.callback=function(){lf(t,a,s)}}var h=a.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){lf(t,a,s),typeof i!="function"&&(Sl===null?Sl=new Set([this]):Sl.add(this));var g=s.stack;this.componentDidCatch(s.value,{componentStack:g!==null?g:""})})}function Yp(e,t,a,s,i){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Cs(t,a,i,!0),a=Pt.current,a!==null){switch(a.tag){case 31:case 13:return da===null?Gi():a.alternate===null&&dt===0&&(dt=3),a.flags&=-257,a.flags|=65536,a.lanes=i,s===bi?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),tc(e,s,i)),!1;case 22:return a.flags|=65536,s===bi?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),tc(e,s,i)),!1}throw Error(r(435,a.tag))}return tc(e,s,i),Gi(),!1}if(Re)return t=Pt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,s!==Kr&&(e=Error(r(422),{cause:s}),mn(ra(e,a)))):(s!==Kr&&(t=Error(r(423),{cause:s}),mn(ra(t,a))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,s=ra(s,a),i=Do(e.stateNode,s,i),no(e,i),dt!==4&&(dt=2)),!1;var c=Error(r(520),{cause:s});if(c=ra(c,a),On===null?On=[c]:On.push(c),dt!==4&&(dt=2),t===null)return!0;s=ra(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=i&-i,a.lanes|=e,e=Do(a.stateNode,s,e),no(a,e),!1;case 1:if(t=a.type,c=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Sl===null||!Sl.has(c))))return a.flags|=65536,i&=-i,a.lanes|=i,i=sf(i),nf(i,e,a,s),no(a,i),!1}a=a.return}while(a!==null);return!1}var Eo=Error(r(461)),bt=!1;function Ct(e,t,a,s){t.child=e===null?cd(t,null,a,s):es(t,e.child,a,s)}function rf(e,t,a,s,i){a=a.render;var c=t.ref;if("ref"in s){var h={};for(var g in s)g!=="ref"&&(h[g]=s[g])}else h=s;return Pl(t),s=fo(e,t,a,h,c,i),g=ho(),e!==null&&!bt?(mo(e,t,i),Ka(e,t,i)):(Re&&g&&Qr(t),t.flags|=1,Ct(e,t,s,i),t.child)}function of(e,t,a,s,i){if(e===null){var c=a.type;return typeof c=="function"&&!Gr(c)&&c.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=c,cf(e,t,c,s,i)):(e=fi(a.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!Vo(e,i)){var h=c.memoizedProps;if(a=a.compare,a=a!==null?a:dn,a(h,s)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,e=Ya(c,s),e.ref=t.ref,e.return=t,t.child=e}function cf(e,t,a,s,i){if(e!==null){var c=e.memoizedProps;if(dn(c,s)&&e.ref===t.ref)if(bt=!1,t.pendingProps=s=c,Vo(e,i))(e.flags&131072)!==0&&(bt=!0);else return t.lanes=e.lanes,Ka(e,t,i)}return zo(e,t,a,s,i)}function uf(e,t,a,s){var i=s.children,c=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(c=c!==null?c.baseLanes|a:a,e!==null){for(s=t.child=e.child,i=0;s!==null;)i=i|s.lanes|s.childLanes,s=s.sibling;s=i&~c}else s=0,t.child=null;return df(e,t,c,a,s)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&xi(t,c!==null?c.cachePool:null),c!==null?fd(t,c):ro(),hd(t);else return s=t.lanes=536870912,df(e,t,c!==null?c.baseLanes|a:a,a,s)}else c!==null?(xi(t,c.cachePool),fd(t,c),yl(),t.memoizedState=null):(e!==null&&xi(t,null),ro(),yl());return Ct(e,t,i,a),t.child}function Cn(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function df(e,t,a,s,i){var c=to();return c=c===null?null:{parent:xt._currentValue,pool:c},t.memoizedState={baseLanes:a,cachePool:c},e!==null&&xi(t,null),ro(),hd(t),e!==null&&Cs(e,t,s,!0),t.childLanes=i,null}function zi(e,t){return t=Bi({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ff(e,t,a){return es(t,e.child,null,a),e=zi(t,t.pendingProps),e.flags|=2,Ft(t),t.memoizedState=null,e}function Gp(e,t,a){var s=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Re){if(s.mode==="hidden")return e=zi(t,s),t.lanes=536870912,Cn(null,e);if(co(t),(e=st)?(e=Sh(e,ua),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:fl!==null?{id:Na,overflow:Sa}:null,retryLane:536870912,hydrationErrors:null},a=Ku(e),a.return=t,t.child=a,St=t,st=null)):e=null,e===null)throw ml(t);return t.lanes=536870912,null}return zi(t,s)}var c=e.memoizedState;if(c!==null){var h=c.dehydrated;if(co(t),i)if(t.flags&256)t.flags&=-257,t=ff(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(r(558));else if(bt||Cs(e,t,a,!1),i=(a&e.childLanes)!==0,bt||i){if(s=et,s!==null&&(h=le(s,a),h!==0&&h!==c.retryLane))throw c.retryLane=h,Ql(e,h),Gt(s,e,h),Eo;Gi(),t=ff(e,t,a)}else e=c.treeContext,st=fa(h.nextSibling),St=t,Re=!0,hl=null,ua=!1,e!==null&&Fu(t,e),t=zi(t,s),t.flags|=4096;return t}return e=Ya(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Oi(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function zo(e,t,a,s,i){return Pl(t),a=fo(e,t,a,s,void 0,i),s=ho(),e!==null&&!bt?(mo(e,t,i),Ka(e,t,i)):(Re&&s&&Qr(t),t.flags|=1,Ct(e,t,a,i),t.child)}function hf(e,t,a,s,i,c){return Pl(t),t.updateQueue=null,a=pd(t,s,a,i),md(e),s=ho(),e!==null&&!bt?(mo(e,t,c),Ka(e,t,c)):(Re&&s&&Qr(t),t.flags|=1,Ct(e,t,a,c),t.child)}function mf(e,t,a,s,i){if(Pl(t),t.stateNode===null){var c=js,h=a.contextType;typeof h=="object"&&h!==null&&(c=kt(h)),c=new a(s,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=To,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=s,c.state=t.memoizedState,c.refs={},lo(t),h=a.contextType,c.context=typeof h=="object"&&h!==null?kt(h):js,c.state=t.memoizedState,h=a.getDerivedStateFromProps,typeof h=="function"&&(Ao(t,a,h,s),c.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(h=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),h!==c.state&&To.enqueueReplaceState(c,c.state,null),wn(t,s,c,i),yn(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){c=t.stateNode;var g=t.memoizedProps,S=as(a,g);c.props=S;var L=c.context,$=a.contextType;h=js,typeof $=="object"&&$!==null&&(h=kt($));var P=a.getDerivedStateFromProps;$=typeof P=="function"||typeof c.getSnapshotBeforeUpdate=="function",g=t.pendingProps!==g,$||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(g||L!==h)&&Id(t,c,s,h),xl=!1;var R=t.memoizedState;c.state=R,wn(t,s,c,i),yn(),L=t.memoizedState,g||R!==L||xl?(typeof P=="function"&&(Ao(t,a,P,s),L=t.memoizedState),(S=xl||Wd(t,a,S,s,R,L,h))?($||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=L),c.props=s,c.state=L,c.context=h,s=S):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{c=t.stateNode,so(e,t),h=t.memoizedProps,$=as(a,h),c.props=$,P=t.pendingProps,R=c.context,L=a.contextType,S=js,typeof L=="object"&&L!==null&&(S=kt(L)),g=a.getDerivedStateFromProps,(L=typeof g=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==P||R!==S)&&Id(t,c,s,S),xl=!1,R=t.memoizedState,c.state=R,wn(t,s,c,i),yn();var q=t.memoizedState;h!==P||R!==q||xl||e!==null&&e.dependencies!==null&&mi(e.dependencies)?(typeof g=="function"&&(Ao(t,a,g,s),q=t.memoizedState),($=xl||Wd(t,a,$,s,R,q,S)||e!==null&&e.dependencies!==null&&mi(e.dependencies))?(L||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(s,q,S),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(s,q,S)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||h===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=q),c.props=s,c.state=q,c.context=S,s=$):(typeof c.componentDidUpdate!="function"||h===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),s=!1)}return c=s,Oi(e,t),s=(t.flags&128)!==0,c||s?(c=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&s?(t.child=es(t,e.child,null,i),t.child=es(t,null,a,i)):Ct(e,t,a,i),t.memoizedState=c.state,e=t.child):e=Ka(e,t,i),e}function pf(e,t,a,s){return Kl(),t.flags|=256,Ct(e,t,a,s),t.child}var Oo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bo(e){return{baseLanes:e,cachePool:ld()}}function _o(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=It),e}function xf(e,t,a){var s=t.pendingProps,i=!1,c=(t.flags&128)!==0,h;if((h=c)||(h=e!==null&&e.memoizedState===null?!1:(ht.current&2)!==0),h&&(i=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(Re){if(i?vl(t):yl(),(e=st)?(e=Sh(e,ua),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:fl!==null?{id:Na,overflow:Sa}:null,retryLane:536870912,hydrationErrors:null},a=Ku(e),a.return=t,t.child=a,St=t,st=null)):e=null,e===null)throw ml(t);return gc(e)?t.lanes=32:t.lanes=536870912,null}var g=s.children;return s=s.fallback,i?(yl(),i=t.mode,g=Bi({mode:"hidden",children:g},i),s=Zl(s,i,a,null),g.return=t,s.return=t,g.sibling=s,t.child=g,s=t.child,s.memoizedState=Bo(a),s.childLanes=_o(e,h,a),t.memoizedState=Oo,Cn(null,s)):(vl(t),Lo(t,g))}var S=e.memoizedState;if(S!==null&&(g=S.dehydrated,g!==null)){if(c)t.flags&256?(vl(t),t.flags&=-257,t=Uo(e,t,a)):t.memoizedState!==null?(yl(),t.child=e.child,t.flags|=128,t=null):(yl(),g=s.fallback,i=t.mode,s=Bi({mode:"visible",children:s.children},i),g=Zl(g,i,a,null),g.flags|=2,s.return=t,g.return=t,s.sibling=g,t.child=s,es(t,e.child,null,a),s=t.child,s.memoizedState=Bo(a),s.childLanes=_o(e,h,a),t.memoizedState=Oo,t=Cn(null,s));else if(vl(t),gc(g)){if(h=g.nextSibling&&g.nextSibling.dataset,h)var L=h.dgst;h=L,s=Error(r(419)),s.stack="",s.digest=h,mn({value:s,source:null,stack:null}),t=Uo(e,t,a)}else if(bt||Cs(e,t,a,!1),h=(a&e.childLanes)!==0,bt||h){if(h=et,h!==null&&(s=le(h,a),s!==0&&s!==S.retryLane))throw S.retryLane=s,Ql(e,s),Gt(h,e,s),Eo;xc(g)||Gi(),t=Uo(e,t,a)}else xc(g)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,st=fa(g.nextSibling),St=t,Re=!0,hl=null,ua=!1,e!==null&&Fu(t,e),t=Lo(t,s.children),t.flags|=4096);return t}return i?(yl(),g=s.fallback,i=t.mode,S=e.child,L=S.sibling,s=Ya(S,{mode:"hidden",children:s.children}),s.subtreeFlags=S.subtreeFlags&65011712,L!==null?g=Ya(L,g):(g=Zl(g,i,a,null),g.flags|=2),g.return=t,s.return=t,s.sibling=g,t.child=s,Cn(null,s),s=t.child,g=e.child.memoizedState,g===null?g=Bo(a):(i=g.cachePool,i!==null?(S=xt._currentValue,i=i.parent!==S?{parent:S,pool:S}:i):i=ld(),g={baseLanes:g.baseLanes|a,cachePool:i}),s.memoizedState=g,s.childLanes=_o(e,h,a),t.memoizedState=Oo,Cn(e.child,s)):(vl(t),a=e.child,e=a.sibling,a=Ya(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=a,t.memoizedState=null,a)}function Lo(e,t){return t=Bi({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Bi(e,t){return e=Jt(22,e,null,t),e.lanes=0,e}function Uo(e,t,a){return es(t,e.child,null,a),e=Lo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gf(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Fr(e.return,t,a)}function Ro(e,t,a,s,i,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:i,treeForkCount:c}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=s,h.tail=a,h.tailMode=i,h.treeForkCount=c)}function bf(e,t,a){var s=t.pendingProps,i=s.revealOrder,c=s.tail;s=s.children;var h=ht.current,g=(h&2)!==0;if(g?(h=h&1|2,t.flags|=128):h&=1,Ne(ht,h),Ct(e,t,s,a),s=Re?hn:0,!g&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gf(e,a,t);else if(e.tag===19)gf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(a=t.child,i=null;a!==null;)e=a.alternate,e!==null&&ji(e)===null&&(i=a),a=a.sibling;a=i,a===null?(i=t.child,t.child=null):(i=a.sibling,a.sibling=null),Ro(t,!1,i,a,c,s);break;case"backwards":case"unstable_legacy-backwards":for(a=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ji(e)===null){t.child=i;break}e=i.sibling,i.sibling=a,a=i,i=e}Ro(t,!0,a,null,c,s);break;case"together":Ro(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Ka(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Nl|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Cs(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,a=Ya(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Ya(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Vo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&mi(e)))}function $p(e,t,a){switch(t.tag){case 3:Se(t,t.stateNode.containerInfo),pl(t,xt,e.memoizedState.cache),Kl();break;case 27:case 5:ye(t);break;case 4:Se(t,t.stateNode.containerInfo);break;case 10:pl(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,co(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(vl(t),t.flags|=128,null):(a&t.child.childLanes)!==0?xf(e,t,a):(vl(t),e=Ka(e,t,a),e!==null?e.sibling:null);vl(t);break;case 19:var i=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Cs(e,t,a,!1),s=(a&t.childLanes)!==0),i){if(s)return bf(e,t,a);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ne(ht,ht.current),s)break;return null;case 22:return t.lanes=0,uf(e,t,a,t.pendingProps);case 24:pl(t,xt,e.memoizedState.cache)}return Ka(e,t,a)}function vf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)bt=!0;else{if(!Vo(e,a)&&(t.flags&128)===0)return bt=!1,$p(e,t,a);bt=(e.flags&131072)!==0}else bt=!1,Re&&(t.flags&1048576)!==0&&Pu(t,hn,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=Wl(t.elementType),t.type=e,typeof e=="function")Gr(e)?(s=as(e,s),t.tag=1,t=mf(null,t,e,s,a)):(t.tag=0,t=zo(null,t,e,s,a));else{if(e!=null){var i=e.$$typeof;if(i===ne){t.tag=11,t=rf(null,t,e,s,a);break e}else if(i===W){t.tag=14,t=of(null,t,e,s,a);break e}}throw t=I(e)||e,Error(r(306,t,""))}}return t;case 0:return zo(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,i=as(s,t.pendingProps),mf(e,t,s,i,a);case 3:e:{if(Se(t,t.stateNode.containerInfo),e===null)throw Error(r(387));s=t.pendingProps;var c=t.memoizedState;i=c.element,so(e,t),wn(t,s,null,a);var h=t.memoizedState;if(s=h.cache,pl(t,xt,s),s!==c.cache&&Wr(t,[xt],a,!0),yn(),s=h.element,c.isDehydrated)if(c={element:s,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=pf(e,t,s,a);break e}else if(s!==i){i=ra(Error(r(424)),t),mn(i),t=pf(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(st=fa(e.firstChild),St=t,Re=!0,hl=null,ua=!0,a=cd(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Kl(),s===i){t=Ka(e,t,a);break e}Ct(e,t,s,a)}t=t.child}return t;case 26:return Oi(e,t),e===null?(a=Dh(t.type,null,t.pendingProps,null))?t.memoizedState=a:Re||(a=t.type,e=t.pendingProps,s=Pi(ee.current).createElement(a),s[Ce]=t,s[Pe]=e,Mt(s,a,e),Be(s),t.stateNode=s):t.memoizedState=Dh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ye(t),e===null&&Re&&(s=t.stateNode=Mh(t.type,t.pendingProps,ee.current),St=t,ua=!0,i=st,Al(t.type)?(bc=i,st=fa(s.firstChild)):st=i),Ct(e,t,t.pendingProps.children,a),Oi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Re&&((i=s=st)&&(s=yx(s,t.type,t.pendingProps,ua),s!==null?(t.stateNode=s,St=t,st=fa(s.firstChild),ua=!1,i=!0):i=!1),i||ml(t)),ye(t),i=t.type,c=t.pendingProps,h=e!==null?e.memoizedProps:null,s=c.children,hc(i,c)?s=null:h!==null&&hc(i,h)&&(t.flags|=32),t.memoizedState!==null&&(i=fo(e,t,_p,null,null,a),qn._currentValue=i),Oi(e,t),Ct(e,t,s,a),t.child;case 6:return e===null&&Re&&((e=a=st)&&(a=wx(a,t.pendingProps,ua),a!==null?(t.stateNode=a,St=t,st=null,e=!0):e=!1),e||ml(t)),null;case 13:return xf(e,t,a);case 4:return Se(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=es(t,null,s,a):Ct(e,t,s,a),t.child;case 11:return rf(e,t,t.type,t.pendingProps,a);case 7:return Ct(e,t,t.pendingProps,a),t.child;case 8:return Ct(e,t,t.pendingProps.children,a),t.child;case 12:return Ct(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,pl(t,t.type,s.value),Ct(e,t,s.children,a),t.child;case 9:return i=t.type._context,s=t.pendingProps.children,Pl(t),i=kt(i),s=s(i),t.flags|=1,Ct(e,t,s,a),t.child;case 14:return of(e,t,t.type,t.pendingProps,a);case 15:return cf(e,t,t.type,t.pendingProps,a);case 19:return bf(e,t,a);case 31:return Gp(e,t,a);case 22:return uf(e,t,a,t.pendingProps);case 24:return Pl(t),s=kt(xt),e===null?(i=to(),i===null&&(i=et,c=Ir(),i.pooledCache=c,c.refCount++,c!==null&&(i.pooledCacheLanes|=a),i=c),t.memoizedState={parent:s,cache:i},lo(t),pl(t,xt,i)):((e.lanes&a)!==0&&(so(e,t),wn(t,null,null,a),yn()),i=e.memoizedState,c=t.memoizedState,i.parent!==s?(i={parent:s,cache:s},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),pl(t,xt,s)):(s=c.cache,pl(t,xt,s),s!==i.cache&&Wr(t,[xt],a,!0))),Ct(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function Ja(e){e.flags|=4}function Ho(e,t,a,s,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Qf())e.flags|=8192;else throw Il=bi,ao}else e.flags&=-16777217}function yf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!_h(t))if(Qf())e.flags|=8192;else throw Il=bi,ao}function _i(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ol():536870912,e.lanes|=t,Rs|=t)}function Mn(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var i=e.child;i!==null;)a|=i.lanes|i.childLanes,s|=i.subtreeFlags&65011712,s|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)a|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function Xp(e,t,a){var s=t.pendingProps;switch(Zr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return nt(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Xa(xt),Qe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ks(t)?Ja(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Jr())),nt(t),null;case 26:var i=t.type,c=t.memoizedState;return e===null?(Ja(t),c!==null?(nt(t),yf(t,c)):(nt(t),Ho(t,i,null,s,a))):c?c!==e.memoizedState?(Ja(t),nt(t),yf(t,c)):(nt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&Ja(t),nt(t),Ho(t,i,e,s,a)),null;case 27:if(ta(t),a=ee.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ja(t);else{if(!s){if(t.stateNode===null)throw Error(r(166));return nt(t),null}e=be.current,ks(t)?Wu(t):(e=Mh(i,s,a),t.stateNode=e,Ja(t))}return nt(t),null;case 5:if(ta(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ja(t);else{if(!s){if(t.stateNode===null)throw Error(r(166));return nt(t),null}if(c=be.current,ks(t))Wu(t);else{var h=Pi(ee.current);switch(c){case 1:c=h.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:c=h.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":c=h.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":c=h.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":c=h.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof s.is=="string"?h.createElement("select",{is:s.is}):h.createElement("select"),s.multiple?c.multiple=!0:s.size&&(c.size=s.size);break;default:c=typeof s.is=="string"?h.createElement(i,{is:s.is}):h.createElement(i)}}c[Ce]=t,c[Pe]=s;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)c.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=c;e:switch(Mt(c,i,s),i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ja(t)}}return nt(t),Ho(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Ja(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(r(166));if(e=ee.current,ks(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,i=St,i!==null)switch(i.tag){case 27:case 5:s=i.memoizedProps}e[Ce]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||xh(e.nodeValue,a)),e||ml(t,!0)}else e=Pi(e).createTextNode(s),e[Ce]=t,t.stateNode=e}return nt(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(s=ks(t),a!==null){if(e===null){if(!s)throw Error(r(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Ce]=t}else Kl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nt(t),e=!1}else a=Jr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Ft(t),t):(Ft(t),null);if((t.flags&128)!==0)throw Error(r(558))}return nt(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=ks(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(r(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));i[Ce]=t}else Kl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nt(t),i=!1}else i=Jr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(Ft(t),t):(Ft(t),null)}return Ft(t),(t.flags&128)!==0?(t.lanes=a,t):(a=s!==null,e=e!==null&&e.memoizedState!==null,a&&(s=t.child,i=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(i=s.alternate.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==i&&(s.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),_i(t,t.updateQueue),nt(t),null);case 4:return Qe(),e===null&&oc(t.stateNode.containerInfo),nt(t),null;case 10:return Xa(t.type),nt(t),null;case 19:if(je(ht),s=t.memoizedState,s===null)return nt(t),null;if(i=(t.flags&128)!==0,c=s.rendering,c===null)if(i)Mn(s,!1);else{if(dt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=ji(e),c!==null){for(t.flags|=128,Mn(s,!1),e=c.updateQueue,t.updateQueue=e,_i(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Zu(a,e),a=a.sibling;return Ne(ht,ht.current&1|2),Re&&Ga(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&ft()>Hi&&(t.flags|=128,i=!0,Mn(s,!1),t.lanes=4194304)}else{if(!i)if(e=ji(c),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,_i(t,e),Mn(s,!0),s.tail===null&&s.tailMode==="hidden"&&!c.alternate&&!Re)return nt(t),null}else 2*ft()-s.renderingStartTime>Hi&&a!==536870912&&(t.flags|=128,i=!0,Mn(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(e=s.last,e!==null?e.sibling=c:t.child=c,s.last=c)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ft(),e.sibling=null,a=ht.current,Ne(ht,i?a&1|2:a&1),Re&&Ga(t,s.treeForkCount),e):(nt(t),null);case 22:case 23:return Ft(t),oo(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),a=t.updateQueue,a!==null&&_i(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&je(Fl),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Xa(xt),nt(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function Qp(e,t){switch(Zr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xa(xt),Qe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ta(t),null;case 31:if(t.memoizedState!==null){if(Ft(t),t.alternate===null)throw Error(r(340));Kl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ft(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));Kl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return je(ht),null;case 4:return Qe(),null;case 10:return Xa(t.type),null;case 22:case 23:return Ft(t),oo(),e!==null&&je(Fl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Xa(xt),null;case 25:return null;default:return null}}function wf(e,t){switch(Zr(t),t.tag){case 3:Xa(xt),Qe();break;case 26:case 27:case 5:ta(t);break;case 4:Qe();break;case 31:t.memoizedState!==null&&Ft(t);break;case 13:Ft(t);break;case 19:je(ht);break;case 10:Xa(t.type);break;case 22:case 23:Ft(t),oo(),e!==null&&je(Fl);break;case 24:Xa(xt)}}function An(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var i=s.next;a=i;do{if((a.tag&e)===e){s=void 0;var c=a.create,h=a.inst;s=c(),h.destroy=s}a=a.next}while(a!==i)}}catch(g){Je(t,t.return,g)}}function wl(e,t,a){try{var s=t.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var c=i.next;s=c;do{if((s.tag&e)===e){var h=s.inst,g=h.destroy;if(g!==void 0){h.destroy=void 0,i=t;var S=a,L=g;try{L()}catch($){Je(i,S,$)}}}s=s.next}while(s!==c)}}catch($){Je(t,t.return,$)}}function jf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{dd(t,a)}catch(s){Je(e,e.return,s)}}}function Nf(e,t,a){a.props=as(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){Je(e,t,s)}}function Tn(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(i){Je(e,t,i)}}function ka(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(i){Je(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(i){Je(e,t,i)}else a.current=null}function Sf(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(i){Je(e,e.return,i)}}function qo(e,t,a){try{var s=e.stateNode;mx(s,e.type,a,t),s[Pe]=t}catch(i){Je(e,e.return,i)}}function kf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Al(e.type)||e.tag===4}function Yo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Al(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Go(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Ha));else if(s!==4&&(s===27&&Al(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Go(e,t,a),e=e.sibling;e!==null;)Go(e,t,a),e=e.sibling}function Li(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&Al(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Li(e,t,a),e=e.sibling;e!==null;)Li(e,t,a),e=e.sibling}function Cf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Mt(t,s,a),t[Ce]=e,t[Pe]=a}catch(c){Je(e,e.return,c)}}var Pa=!1,vt=!1,$o=!1,Mf=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function Zp(e,t){if(e=e.containerInfo,dc=lr,e=Ru(e),Lr(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var i=s.anchorOffset,c=s.focusNode;s=s.focusOffset;try{a.nodeType,c.nodeType}catch{a=null;break e}var h=0,g=-1,S=-1,L=0,$=0,P=e,R=null;t:for(;;){for(var q;P!==a||i!==0&&P.nodeType!==3||(g=h+i),P!==c||s!==0&&P.nodeType!==3||(S=h+s),P.nodeType===3&&(h+=P.nodeValue.length),(q=P.firstChild)!==null;)R=P,P=q;for(;;){if(P===e)break t;if(R===a&&++L===i&&(g=h),R===c&&++$===s&&(S=h),(q=P.nextSibling)!==null)break;P=R,R=P.parentNode}P=q}a=g===-1||S===-1?null:{start:g,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(fc={focusedElem:e,selectionRange:a},lr=!1,Nt=t;Nt!==null;)if(t=Nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Nt=e;else for(;Nt!==null;){switch(t=Nt,c=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)i=e[a],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,a=t,i=c.memoizedProps,c=c.memoizedState,s=a.stateNode;try{var fe=as(a.type,i);e=s.getSnapshotBeforeUpdate(fe,c),s.__reactInternalSnapshotBeforeUpdate=e}catch(ve){Je(a,a.return,ve)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)pc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":pc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,Nt=e;break}Nt=t.return}}function Af(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:Wa(e,a),s&4&&An(5,a);break;case 1:if(Wa(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(h){Je(a,a.return,h)}else{var i=as(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){Je(a,a.return,h)}}s&64&&jf(a),s&512&&Tn(a,a.return);break;case 3:if(Wa(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{dd(e,t)}catch(h){Je(a,a.return,h)}}break;case 27:t===null&&s&4&&Cf(a);case 26:case 5:Wa(e,a),t===null&&s&4&&Sf(a),s&512&&Tn(a,a.return);break;case 12:Wa(e,a);break;case 31:Wa(e,a),s&4&&Ef(e,a);break;case 13:Wa(e,a),s&4&&zf(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=ax.bind(null,a),jx(e,a))));break;case 22:if(s=a.memoizedState!==null||Pa,!s){t=t!==null&&t.memoizedState!==null||vt,i=Pa;var c=vt;Pa=s,(vt=t)&&!c?Ia(e,a,(a.subtreeFlags&8772)!==0):Wa(e,a),Pa=i,vt=c}break;case 30:break;default:Wa(e,a)}}function Tf(e){var t=e.alternate;t!==null&&(e.alternate=null,Tf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Zt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var rt=null,Vt=!1;function Fa(e,t,a){for(a=a.child;a!==null;)Df(e,t,a),a=a.sibling}function Df(e,t,a){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount($t,a)}catch{}switch(a.tag){case 26:vt||ka(a,t),Fa(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:vt||ka(a,t);var s=rt,i=Vt;Al(a.type)&&(rt=a.stateNode,Vt=!1),Fa(e,t,a),Rn(a.stateNode),rt=s,Vt=i;break;case 5:vt||ka(a,t);case 6:if(s=rt,i=Vt,rt=null,Fa(e,t,a),rt=s,Vt=i,rt!==null)if(Vt)try{(rt.nodeType===9?rt.body:rt.nodeName==="HTML"?rt.ownerDocument.body:rt).removeChild(a.stateNode)}catch(c){Je(a,t,c)}else try{rt.removeChild(a.stateNode)}catch(c){Je(a,t,c)}break;case 18:rt!==null&&(Vt?(e=rt,jh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Qs(e)):jh(rt,a.stateNode));break;case 4:s=rt,i=Vt,rt=a.stateNode.containerInfo,Vt=!0,Fa(e,t,a),rt=s,Vt=i;break;case 0:case 11:case 14:case 15:wl(2,a,t),vt||wl(4,a,t),Fa(e,t,a);break;case 1:vt||(ka(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&Nf(a,t,s)),Fa(e,t,a);break;case 21:Fa(e,t,a);break;case 22:vt=(s=vt)||a.memoizedState!==null,Fa(e,t,a),vt=s;break;default:Fa(e,t,a)}}function Ef(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Qs(e)}catch(a){Je(t,t.return,a)}}}function zf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Qs(e)}catch(a){Je(t,t.return,a)}}function Kp(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Mf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Mf),t;default:throw Error(r(435,e.tag))}}function Ui(e,t){var a=Kp(e);t.forEach(function(s){if(!a.has(s)){a.add(s);var i=lx.bind(null,e,s);s.then(i,i)}})}function Ht(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var i=a[s],c=e,h=t,g=h;e:for(;g!==null;){switch(g.tag){case 27:if(Al(g.type)){rt=g.stateNode,Vt=!1;break e}break;case 5:rt=g.stateNode,Vt=!1;break e;case 3:case 4:rt=g.stateNode.containerInfo,Vt=!0;break e}g=g.return}if(rt===null)throw Error(r(160));Df(c,h,i),rt=null,Vt=!1,c=i.alternate,c!==null&&(c.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Of(t,e),t=t.sibling}var va=null;function Of(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ht(t,e),qt(e),s&4&&(wl(3,e,e.return),An(3,e),wl(5,e,e.return));break;case 1:Ht(t,e),qt(e),s&512&&(vt||a===null||ka(a,a.return)),s&64&&Pa&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var i=va;if(Ht(t,e),qt(e),s&512&&(vt||a===null||ka(a,a.return)),s&4){var c=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,i=i.ownerDocument||i;t:switch(s){case"title":c=i.getElementsByTagName("title")[0],(!c||c[Tt]||c[Ce]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=i.createElement(s),i.head.insertBefore(c,i.querySelector("head > title"))),Mt(c,s,a),c[Ce]=e,Be(c),s=c;break e;case"link":var h=Oh("link","href",i).get(s+(a.href||""));if(h){for(var g=0;g<h.length;g++)if(c=h[g],c.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&c.getAttribute("rel")===(a.rel==null?null:a.rel)&&c.getAttribute("title")===(a.title==null?null:a.title)&&c.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){h.splice(g,1);break t}}c=i.createElement(s),Mt(c,s,a),i.head.appendChild(c);break;case"meta":if(h=Oh("meta","content",i).get(s+(a.content||""))){for(g=0;g<h.length;g++)if(c=h[g],c.getAttribute("content")===(a.content==null?null:""+a.content)&&c.getAttribute("name")===(a.name==null?null:a.name)&&c.getAttribute("property")===(a.property==null?null:a.property)&&c.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&c.getAttribute("charset")===(a.charSet==null?null:a.charSet)){h.splice(g,1);break t}}c=i.createElement(s),Mt(c,s,a),i.head.appendChild(c);break;default:throw Error(r(468,s))}c[Ce]=e,Be(c),s=c}e.stateNode=s}else Bh(i,e.type,e.stateNode);else e.stateNode=zh(i,s,e.memoizedProps);else c!==s?(c===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):c.count--,s===null?Bh(i,e.type,e.stateNode):zh(i,s,e.memoizedProps)):s===null&&e.stateNode!==null&&qo(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ht(t,e),qt(e),s&512&&(vt||a===null||ka(a,a.return)),a!==null&&s&4&&qo(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ht(t,e),qt(e),s&512&&(vt||a===null||ka(a,a.return)),e.flags&32){i=e.stateNode;try{K(i,"")}catch(fe){Je(e,e.return,fe)}}s&4&&e.stateNode!=null&&(i=e.memoizedProps,qo(e,i,a!==null?a.memoizedProps:i)),s&1024&&($o=!0);break;case 6:if(Ht(t,e),qt(e),s&4){if(e.stateNode===null)throw Error(r(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(fe){Je(e,e.return,fe)}}break;case 3:if(Ii=null,i=va,va=Fi(t.containerInfo),Ht(t,e),va=i,qt(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{Qs(t.containerInfo)}catch(fe){Je(e,e.return,fe)}$o&&($o=!1,Bf(e));break;case 4:s=va,va=Fi(e.stateNode.containerInfo),Ht(t,e),qt(e),va=s;break;case 12:Ht(t,e),qt(e);break;case 31:Ht(t,e),qt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ui(e,s)));break;case 13:Ht(t,e),qt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Vi=ft()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ui(e,s)));break;case 22:i=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,L=Pa,$=vt;if(Pa=L||i,vt=$||S,Ht(t,e),vt=$,Pa=L,qt(e),s&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(a===null||S||Pa||vt||ls(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){S=a=t;try{if(c=S.stateNode,i)h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{g=S.stateNode;var P=S.memoizedProps.style,R=P!=null&&P.hasOwnProperty("display")?P.display:null;g.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(fe){Je(S,S.return,fe)}}}else if(t.tag===6){if(a===null){S=t;try{S.stateNode.nodeValue=i?"":S.memoizedProps}catch(fe){Je(S,S.return,fe)}}}else if(t.tag===18){if(a===null){S=t;try{var q=S.stateNode;i?Nh(q,!0):Nh(S.stateNode,!1)}catch(fe){Je(S,S.return,fe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,Ui(e,a))));break;case 19:Ht(t,e),qt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ui(e,s)));break;case 30:break;case 21:break;default:Ht(t,e),qt(e)}}function qt(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(kf(s)){a=s;break}s=s.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var i=a.stateNode,c=Yo(e);Li(e,c,i);break;case 5:var h=a.stateNode;a.flags&32&&(K(h,""),a.flags&=-33);var g=Yo(e);Li(e,g,h);break;case 3:case 4:var S=a.stateNode.containerInfo,L=Yo(e);Go(e,L,S);break;default:throw Error(r(161))}}catch($){Je(e,e.return,$)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Bf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Bf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Wa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Af(e,t.alternate,t),t=t.sibling}function ls(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:wl(4,t,t.return),ls(t);break;case 1:ka(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Nf(t,t.return,a),ls(t);break;case 27:Rn(t.stateNode);case 26:case 5:ka(t,t.return),ls(t);break;case 22:t.memoizedState===null&&ls(t);break;case 30:ls(t);break;default:ls(t)}e=e.sibling}}function Ia(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,i=e,c=t,h=c.flags;switch(c.tag){case 0:case 11:case 15:Ia(i,c,a),An(4,c);break;case 1:if(Ia(i,c,a),s=c,i=s.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(L){Je(s,s.return,L)}if(s=c,i=s.updateQueue,i!==null){var g=s.stateNode;try{var S=i.shared.hiddenCallbacks;if(S!==null)for(i.shared.hiddenCallbacks=null,i=0;i<S.length;i++)ud(S[i],g)}catch(L){Je(s,s.return,L)}}a&&h&64&&jf(c),Tn(c,c.return);break;case 27:Cf(c);case 26:case 5:Ia(i,c,a),a&&s===null&&h&4&&Sf(c),Tn(c,c.return);break;case 12:Ia(i,c,a);break;case 31:Ia(i,c,a),a&&h&4&&Ef(i,c);break;case 13:Ia(i,c,a),a&&h&4&&zf(i,c);break;case 22:c.memoizedState===null&&Ia(i,c,a),Tn(c,c.return);break;case 30:break;default:Ia(i,c,a)}t=t.sibling}}function Xo(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&pn(a))}function Qo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&pn(e))}function ya(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)_f(e,t,a,s),t=t.sibling}function _f(e,t,a,s){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ya(e,t,a,s),i&2048&&An(9,t);break;case 1:ya(e,t,a,s);break;case 3:ya(e,t,a,s),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&pn(e)));break;case 12:if(i&2048){ya(e,t,a,s),e=t.stateNode;try{var c=t.memoizedProps,h=c.id,g=c.onPostCommit;typeof g=="function"&&g(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){Je(t,t.return,S)}}else ya(e,t,a,s);break;case 31:ya(e,t,a,s);break;case 13:ya(e,t,a,s);break;case 23:break;case 22:c=t.stateNode,h=t.alternate,t.memoizedState!==null?c._visibility&2?ya(e,t,a,s):Dn(e,t):c._visibility&2?ya(e,t,a,s):(c._visibility|=2,_s(e,t,a,s,(t.subtreeFlags&10256)!==0||!1)),i&2048&&Xo(h,t);break;case 24:ya(e,t,a,s),i&2048&&Qo(t.alternate,t);break;default:ya(e,t,a,s)}}function _s(e,t,a,s,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var c=e,h=t,g=a,S=s,L=h.flags;switch(h.tag){case 0:case 11:case 15:_s(c,h,g,S,i),An(8,h);break;case 23:break;case 22:var $=h.stateNode;h.memoizedState!==null?$._visibility&2?_s(c,h,g,S,i):Dn(c,h):($._visibility|=2,_s(c,h,g,S,i)),i&&L&2048&&Xo(h.alternate,h);break;case 24:_s(c,h,g,S,i),i&&L&2048&&Qo(h.alternate,h);break;default:_s(c,h,g,S,i)}t=t.sibling}}function Dn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,i=s.flags;switch(s.tag){case 22:Dn(a,s),i&2048&&Xo(s.alternate,s);break;case 24:Dn(a,s),i&2048&&Qo(s.alternate,s);break;default:Dn(a,s)}t=t.sibling}}var En=8192;function Ls(e,t,a){if(e.subtreeFlags&En)for(e=e.child;e!==null;)Lf(e,t,a),e=e.sibling}function Lf(e,t,a){switch(e.tag){case 26:Ls(e,t,a),e.flags&En&&e.memoizedState!==null&&Bx(a,va,e.memoizedState,e.memoizedProps);break;case 5:Ls(e,t,a);break;case 3:case 4:var s=va;va=Fi(e.stateNode.containerInfo),Ls(e,t,a),va=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=En,En=16777216,Ls(e,t,a),En=s):Ls(e,t,a));break;default:Ls(e,t,a)}}function Uf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function zn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Nt=s,Vf(s,e)}Uf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Rf(e),e=e.sibling}function Rf(e){switch(e.tag){case 0:case 11:case 15:zn(e),e.flags&2048&&wl(9,e,e.return);break;case 3:zn(e);break;case 12:zn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ri(e)):zn(e);break;default:zn(e)}}function Ri(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Nt=s,Vf(s,e)}Uf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:wl(8,t,t.return),Ri(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ri(t));break;default:Ri(t)}e=e.sibling}}function Vf(e,t){for(;Nt!==null;){var a=Nt;switch(a.tag){case 0:case 11:case 15:wl(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:pn(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,Nt=s;else e:for(a=e;Nt!==null;){s=Nt;var i=s.sibling,c=s.return;if(Tf(s),s===a){Nt=null;break e}if(i!==null){i.return=c,Nt=i;break e}Nt=c}}}var Jp={getCacheForType:function(e){var t=kt(xt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return kt(xt).controller.signal}},Pp=typeof WeakMap=="function"?WeakMap:Map,Xe=0,et=null,ze=null,_e=0,Ke=0,Wt=null,jl=!1,Us=!1,Zo=!1,el=0,dt=0,Nl=0,ss=0,Ko=0,It=0,Rs=0,On=null,Yt=null,Jo=!1,Vi=0,Hf=0,Hi=1/0,qi=null,Sl=null,yt=0,kl=null,Vs=null,tl=0,Po=0,Fo=null,qf=null,Bn=0,Wo=null;function ea(){return(Xe&2)!==0&&_e!==0?_e&-_e:U.T!==null?sc():Te()}function Yf(){if(It===0)if((_e&536870912)===0||Re){var e=_a;_a<<=1,(_a&3932160)===0&&(_a=262144),It=e}else It=536870912;return e=Pt.current,e!==null&&(e.flags|=32),It}function Gt(e,t,a){(e===et&&(Ke===2||Ke===9)||e.cancelPendingCommit!==null)&&(Hs(e,0),Cl(e,_e,It,!1)),A(e,a),((Xe&2)===0||e!==et)&&(e===et&&((Xe&2)===0&&(ss|=a),dt===4&&Cl(e,_e,It,!1)),Ca(e))}function Gf(e,t,a){if((Xe&6)!==0)throw Error(r(327));var s=!a&&(t&127)===0&&(t&e.expiredLanes)===0||pa(e,t),i=s?Ip(e,t):ec(e,t,!0),c=s;do{if(i===0){Us&&!s&&Cl(e,t,0,!1);break}else{if(a=e.current.alternate,c&&!Fp(a)){i=ec(e,t,!1),c=!1;continue}if(i===2){if(c=t,e.errorRecoveryDisabledLanes&c)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var g=e;i=On;var S=g.current.memoizedState.isDehydrated;if(S&&(Hs(g,h).flags|=256),h=ec(g,h,!1),h!==2){if(Zo&&!S){g.errorRecoveryDisabledLanes|=c,ss|=c,i=4;break e}c=Yt,Yt=i,c!==null&&(Yt===null?Yt=c:Yt.push.apply(Yt,c))}i=h}if(c=!1,i!==2)continue}}if(i===1){Hs(e,0),Cl(e,t,0,!0);break}e:{switch(s=e,c=i,c){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:Cl(s,t,It,!jl);break e;case 2:Yt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(i=Vi+300-ft(),10<i)){if(Cl(s,t,It,!jl),Ua(s,0,!0)!==0)break e;tl=t,s.timeoutHandle=yh($f.bind(null,s,a,Yt,qi,Jo,t,It,ss,Rs,jl,c,"Throttled",-0,0),i);break e}$f(s,a,Yt,qi,Jo,t,It,ss,Rs,jl,c,null,-0,0)}}break}while(!0);Ca(e)}function $f(e,t,a,s,i,c,h,g,S,L,$,P,R,q){if(e.timeoutHandle=-1,P=t.subtreeFlags,P&8192||(P&16785408)===16785408){P={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ha},Lf(t,c,P);var fe=(c&62914560)===c?Vi-ft():(c&4194048)===c?Hf-ft():0;if(fe=_x(P,fe),fe!==null){tl=c,e.cancelPendingCommit=fe(Wf.bind(null,e,t,c,a,s,i,h,g,S,$,P,null,R,q)),Cl(e,c,h,!L);return}}Wf(e,t,c,a,s,i,h,g,S)}function Fp(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var i=a[s],c=i.getSnapshot;i=i.value;try{if(!Kt(c(),i))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cl(e,t,a,s){t&=~Ko,t&=~ss,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var i=t;0<i;){var c=31-jt(i),h=1<<c;s[c]=-1,i&=~h}a!==0&&ie(e,a,t)}function Yi(){return(Xe&6)===0?(_n(0),!1):!0}function Io(){if(ze!==null){if(Ke===0)var e=ze.return;else e=ze,$a=Jl=null,po(e),Ds=null,gn=0,e=ze;for(;e!==null;)wf(e.alternate,e),e=e.return;ze=null}}function Hs(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,gx(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),tl=0,Io(),et=e,ze=a=Ya(e.current,null),_e=t,Ke=0,Wt=null,jl=!1,Us=pa(e,t),Zo=!1,Rs=It=Ko=ss=Nl=dt=0,Yt=On=null,Jo=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var i=31-jt(s),c=1<<i;t|=e[i],s&=~c}return el=t,ci(),a}function Xf(e,t){Me=null,U.H=kn,t===Ts||t===gi?(t=id(),Ke=3):t===ao?(t=id(),Ke=4):Ke=t===Eo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Wt=t,ze===null&&(dt=1,Ei(e,ra(t,e.current)))}function Qf(){var e=Pt.current;return e===null?!0:(_e&4194048)===_e?da===null:(_e&62914560)===_e||(_e&536870912)!==0?e===da:!1}function Zf(){var e=U.H;return U.H=kn,e===null?kn:e}function Kf(){var e=U.A;return U.A=Jp,e}function Gi(){dt=4,jl||(_e&4194048)!==_e&&Pt.current!==null||(Us=!0),(Nl&134217727)===0&&(ss&134217727)===0||et===null||Cl(et,_e,It,!1)}function ec(e,t,a){var s=Xe;Xe|=2;var i=Zf(),c=Kf();(et!==e||_e!==t)&&(qi=null,Hs(e,t)),t=!1;var h=dt;e:do try{if(Ke!==0&&ze!==null){var g=ze,S=Wt;switch(Ke){case 8:Io(),h=6;break e;case 3:case 2:case 9:case 6:Pt.current===null&&(t=!0);var L=Ke;if(Ke=0,Wt=null,qs(e,g,S,L),a&&Us){h=0;break e}break;default:L=Ke,Ke=0,Wt=null,qs(e,g,S,L)}}Wp(),h=dt;break}catch($){Xf(e,$)}while(!0);return t&&e.shellSuspendCounter++,$a=Jl=null,Xe=s,U.H=i,U.A=c,ze===null&&(et=null,_e=0,ci()),h}function Wp(){for(;ze!==null;)Jf(ze)}function Ip(e,t){var a=Xe;Xe|=2;var s=Zf(),i=Kf();et!==e||_e!==t?(qi=null,Hi=ft()+500,Hs(e,t)):Us=pa(e,t);e:do try{if(Ke!==0&&ze!==null){t=ze;var c=Wt;t:switch(Ke){case 1:Ke=0,Wt=null,qs(e,t,c,1);break;case 2:case 9:if(sd(c)){Ke=0,Wt=null,Pf(t);break}t=function(){Ke!==2&&Ke!==9||et!==e||(Ke=7),Ca(e)},c.then(t,t);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:sd(c)?(Ke=0,Wt=null,Pf(t)):(Ke=0,Wt=null,qs(e,t,c,7));break;case 5:var h=null;switch(ze.tag){case 26:h=ze.memoizedState;case 5:case 27:var g=ze;if(h?_h(h):g.stateNode.complete){Ke=0,Wt=null;var S=g.sibling;if(S!==null)ze=S;else{var L=g.return;L!==null?(ze=L,$i(L)):ze=null}break t}}Ke=0,Wt=null,qs(e,t,c,5);break;case 6:Ke=0,Wt=null,qs(e,t,c,6);break;case 8:Io(),dt=6;break e;default:throw Error(r(462))}}ex();break}catch($){Xf(e,$)}while(!0);return $a=Jl=null,U.H=s,U.A=i,Xe=a,ze!==null?0:(et=null,_e=0,ci(),dt)}function ex(){for(;ze!==null&&!Da();)Jf(ze)}function Jf(e){var t=vf(e.alternate,e,el);e.memoizedProps=e.pendingProps,t===null?$i(e):ze=t}function Pf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=hf(a,t,t.pendingProps,t.type,void 0,_e);break;case 11:t=hf(a,t,t.pendingProps,t.type.render,t.ref,_e);break;case 5:po(t);default:wf(a,t),t=ze=Zu(t,el),t=vf(a,t,el)}e.memoizedProps=e.pendingProps,t===null?$i(e):ze=t}function qs(e,t,a,s){$a=Jl=null,po(t),Ds=null,gn=0;var i=t.return;try{if(Yp(e,i,t,a,_e)){dt=1,Ei(e,ra(a,e.current)),ze=null;return}}catch(c){if(i!==null)throw ze=i,c;dt=1,Ei(e,ra(a,e.current)),ze=null;return}t.flags&32768?(Re||s===1?e=!0:Us||(_e&536870912)!==0?e=!1:(jl=e=!0,(s===2||s===9||s===3||s===6)&&(s=Pt.current,s!==null&&s.tag===13&&(s.flags|=16384))),Ff(t,e)):$i(t)}function $i(e){var t=e;do{if((t.flags&32768)!==0){Ff(t,jl);return}e=t.return;var a=Xp(t.alternate,t,el);if(a!==null){ze=a;return}if(t=t.sibling,t!==null){ze=t;return}ze=t=e}while(t!==null);dt===0&&(dt=5)}function Ff(e,t){do{var a=Qp(e.alternate,e);if(a!==null){a.flags&=32767,ze=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ze=e;return}ze=e=a}while(e!==null);dt=6,ze=null}function Wf(e,t,a,s,i,c,h,g,S){e.cancelPendingCommit=null;do Xi();while(yt!==0);if((Xe&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(c=t.lanes|t.childLanes,c|=qr,X(e,a,c,h,g,S),e===et&&(ze=et=null,_e=0),Vs=t,kl=e,tl=a,Po=c,Fo=i,qf=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,sx(za,function(){return lh(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=U.T,U.T=null,i=ae.p,ae.p=2,h=Xe,Xe|=4;try{Zp(e,t,a)}finally{Xe=h,ae.p=i,U.T=s}}yt=1,If(),eh(),th()}}function If(){if(yt===1){yt=0;var e=kl,t=Vs,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=U.T,U.T=null;var s=ae.p;ae.p=2;var i=Xe;Xe|=4;try{Of(t,e);var c=fc,h=Ru(e.containerInfo),g=c.focusedElem,S=c.selectionRange;if(h!==g&&g&&g.ownerDocument&&Uu(g.ownerDocument.documentElement,g)){if(S!==null&&Lr(g)){var L=S.start,$=S.end;if($===void 0&&($=L),"selectionStart"in g)g.selectionStart=L,g.selectionEnd=Math.min($,g.value.length);else{var P=g.ownerDocument||document,R=P&&P.defaultView||window;if(R.getSelection){var q=R.getSelection(),fe=g.textContent.length,ve=Math.min(S.start,fe),Ie=S.end===void 0?ve:Math.min(S.end,fe);!q.extend&&ve>Ie&&(h=Ie,Ie=ve,ve=h);var T=Lu(g,ve),M=Lu(g,Ie);if(T&&M&&(q.rangeCount!==1||q.anchorNode!==T.node||q.anchorOffset!==T.offset||q.focusNode!==M.node||q.focusOffset!==M.offset)){var _=P.createRange();_.setStart(T.node,T.offset),q.removeAllRanges(),ve>Ie?(q.addRange(_),q.extend(M.node,M.offset)):(_.setEnd(M.node,M.offset),q.addRange(_))}}}}for(P=[],q=g;q=q.parentNode;)q.nodeType===1&&P.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<P.length;g++){var Q=P[g];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}lr=!!dc,fc=dc=null}finally{Xe=i,ae.p=s,U.T=a}}e.current=t,yt=2}}function eh(){if(yt===2){yt=0;var e=kl,t=Vs,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=U.T,U.T=null;var s=ae.p;ae.p=2;var i=Xe;Xe|=4;try{Af(e,t.alternate,t)}finally{Xe=i,ae.p=s,U.T=a}}yt=3}}function th(){if(yt===4||yt===3){yt=0,Ea();var e=kl,t=Vs,a=tl,s=qf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?yt=5:(yt=0,Vs=kl=null,ah(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(Sl=null),qe(a),t=t.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot($t,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=U.T,i=ae.p,ae.p=2,U.T=null;try{for(var c=e.onRecoverableError,h=0;h<s.length;h++){var g=s[h];c(g.value,{componentStack:g.stack})}}finally{U.T=t,ae.p=i}}(tl&3)!==0&&Xi(),Ca(e),i=e.pendingLanes,(a&261930)!==0&&(i&42)!==0?e===Wo?Bn++:(Bn=0,Wo=e):Bn=0,_n(0)}}function ah(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,pn(t)))}function Xi(){return If(),eh(),th(),lh()}function lh(){if(yt!==5)return!1;var e=kl,t=Po;Po=0;var a=qe(tl),s=U.T,i=ae.p;try{ae.p=32>a?32:a,U.T=null,a=Fo,Fo=null;var c=kl,h=tl;if(yt=0,Vs=kl=null,tl=0,(Xe&6)!==0)throw Error(r(331));var g=Xe;if(Xe|=4,Rf(c.current),_f(c,c.current,h,a),Xe=g,_n(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot($t,c)}catch{}return!0}finally{ae.p=i,U.T=s,ah(e,t)}}function sh(e,t,a){t=ra(a,t),t=Do(e.stateNode,t,2),e=bl(e,t,2),e!==null&&(A(e,2),Ca(e))}function Je(e,t,a){if(e.tag===3)sh(e,e,a);else for(;t!==null;){if(t.tag===3){sh(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Sl===null||!Sl.has(s))){e=ra(a,e),a=sf(2),s=bl(t,a,2),s!==null&&(nf(a,s,t,e),A(s,2),Ca(s));break}}t=t.return}}function tc(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new Pp;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(a)||(Zo=!0,i.add(a),e=tx.bind(null,e,t,a),t.then(e,e))}function tx(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,et===e&&(_e&a)===a&&(dt===4||dt===3&&(_e&62914560)===_e&&300>ft()-Vi?(Xe&2)===0&&Hs(e,0):Ko|=a,Rs===_e&&(Rs=0)),Ca(e)}function nh(e,t){t===0&&(t=ol()),e=Ql(e,t),e!==null&&(A(e,t),Ca(e))}function ax(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),nh(e,a)}function lx(e,t){var a=0;switch(e.tag){case 31:case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(a=i.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(r(314))}s!==null&&s.delete(t),nh(e,a)}function sx(e,t){return Ta(e,t)}var Qi=null,Ys=null,ac=!1,Zi=!1,lc=!1,Ml=0;function Ca(e){e!==Ys&&e.next===null&&(Ys===null?Qi=Ys=e:Ys=Ys.next=e),Zi=!0,ac||(ac=!0,ix())}function _n(e,t){if(!lc&&Zi){lc=!0;do for(var a=!1,s=Qi;s!==null;){if(e!==0){var i=s.pendingLanes;if(i===0)var c=0;else{var h=s.suspendedLanes,g=s.pingedLanes;c=(1<<31-jt(42|e)+1)-1,c&=i&~(h&~g),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(a=!0,ch(s,c))}else c=_e,c=Ua(s,s===et?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(c&3)===0||pa(s,c)||(a=!0,ch(s,c));s=s.next}while(a);lc=!1}}function nx(){ih()}function ih(){Zi=ac=!1;var e=0;Ml!==0&&xx()&&(e=Ml);for(var t=ft(),a=null,s=Qi;s!==null;){var i=s.next,c=rh(s,t);c===0?(s.next=null,a===null?Qi=i:a.next=i,i===null&&(Ys=a)):(a=s,(e!==0||(c&3)!==0)&&(Zi=!0)),s=i}yt!==0&&yt!==5||_n(e),Ml!==0&&(Ml=0)}function rh(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var h=31-jt(c),g=1<<h,S=i[h];S===-1?((g&a)===0||(g&s)!==0)&&(i[h]=fs(g,t)):S<=t&&(e.expiredLanes|=g),c&=~g}if(t=et,a=_e,a=Ua(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(Ke===2||Ke===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&la(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||pa(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&la(s),qe(a)){case 2:case 8:a=rl;break;case 32:a=za;break;case 268435456:a=Rl;break;default:a=za}return s=oh.bind(null,e),a=Ta(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&la(s),e.callbackPriority=2,e.callbackNode=null,2}function oh(e,t){if(yt!==0&&yt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Xi()&&e.callbackNode!==a)return null;var s=_e;return s=Ua(e,e===et?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Gf(e,s,t),rh(e,ft()),e.callbackNode!=null&&e.callbackNode===a?oh.bind(null,e):null)}function ch(e,t){if(Xi())return null;Gf(e,t,!0)}function ix(){bx(function(){(Xe&6)!==0?Ta(Ul,nx):ih()})}function sc(){if(Ml===0){var e=Ms;e===0&&(e=Ba,Ba<<=1,(Ba&261888)===0&&(Ba=256)),Ml=e}return Ml}function uh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:na(""+e)}function dh(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function rx(e,t,a,s,i){if(t==="submit"&&a&&a.stateNode===i){var c=uh((i[Pe]||null).action),h=s.submitter;h&&(t=(t=h[Pe]||null)?uh(t.formAction):h.getAttribute("formAction"),t!==null&&(c=t,h=null));var g=new ni("action","action",null,s,i);e.push({event:g,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ml!==0){var S=h?dh(i,h):new FormData(i);So(a,{pending:!0,data:S,method:i.method,action:c},null,S)}}else typeof c=="function"&&(g.preventDefault(),S=h?dh(i,h):new FormData(i),So(a,{pending:!0,data:S,method:i.method,action:c},c,S))},currentTarget:i}]})}}for(var nc=0;nc<Hr.length;nc++){var ic=Hr[nc],ox=ic.toLowerCase(),cx=ic[0].toUpperCase()+ic.slice(1);ba(ox,"on"+cx)}ba(qu,"onAnimationEnd"),ba(Yu,"onAnimationIteration"),ba(Gu,"onAnimationStart"),ba("dblclick","onDoubleClick"),ba("focusin","onFocus"),ba("focusout","onBlur"),ba(kp,"onTransitionRun"),ba(Cp,"onTransitionStart"),ba(Mp,"onTransitionCancel"),ba($u,"onTransitionEnd"),Ra("onMouseEnter",["mouseout","mouseover"]),Ra("onMouseLeave",["mouseout","mouseover"]),Ra("onPointerEnter",["pointerout","pointerover"]),Ra("onPointerLeave",["pointerout","pointerover"]),ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ga("onBeforeInput",["compositionend","keypress","textInput","paste"]),ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ux=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ln));function fh(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],i=s.event;s=s.listeners;e:{var c=void 0;if(t)for(var h=s.length-1;0<=h;h--){var g=s[h],S=g.instance,L=g.currentTarget;if(g=g.listener,S!==c&&i.isPropagationStopped())break e;c=g,i.currentTarget=L;try{c(i)}catch($){oi($)}i.currentTarget=null,c=S}else for(h=0;h<s.length;h++){if(g=s[h],S=g.instance,L=g.currentTarget,g=g.listener,S!==c&&i.isPropagationStopped())break e;c=g,i.currentTarget=L;try{c(i)}catch($){oi($)}i.currentTarget=null,c=S}}}}function Oe(e,t){var a=t[Bt];a===void 0&&(a=t[Bt]=new Set);var s=e+"__bubble";a.has(s)||(hh(t,e,2,!1),a.add(s))}function rc(e,t,a){var s=0;t&&(s|=4),hh(a,e,s,t)}var Ki="_reactListening"+Math.random().toString(36).slice(2);function oc(e){if(!e[Ki]){e[Ki]=!0,Ee.forEach(function(a){a!=="selectionchange"&&(ux.has(a)||rc(a,!1,e),rc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ki]||(t[Ki]=!0,rc("selectionchange",!1,t))}}function hh(e,t,a,s){switch(Yh(t)){case 2:var i=Rx;break;case 8:i=Vx;break;default:i=Nc}a=i.bind(null,t,a,e),i=void 0,!Mr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,a,{capture:!0,passive:i}):e.addEventListener(t,a,!0):i!==void 0?e.addEventListener(t,a,{passive:i}):e.addEventListener(t,a,!1)}function cc(e,t,a,s,i){var c=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var h=s.tag;if(h===3||h===4){var g=s.stateNode.containerInfo;if(g===i)break;if(h===4)for(h=s.return;h!==null;){var S=h.tag;if((S===3||S===4)&&h.stateNode.containerInfo===i)return;h=h.return}for(;g!==null;){if(h=sa(g),h===null)return;if(S=h.tag,S===5||S===6||S===26||S===27){s=c=h;continue e}g=g.parentNode}}s=s.return}gu(function(){var L=c,$=kr(a),P=[];e:{var R=Xu.get(e);if(R!==void 0){var q=ni,fe=e;switch(e){case"keypress":if(li(a)===0)break e;case"keydown":case"keyup":q=lp;break;case"focusin":fe="focus",q=Er;break;case"focusout":fe="blur",q=Er;break;case"beforeblur":case"afterblur":q=Er;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=yu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=X0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=ip;break;case qu:case Yu:case Gu:q=K0;break;case $u:q=op;break;case"scroll":case"scrollend":q=G0;break;case"wheel":q=up;break;case"copy":case"cut":case"paste":q=P0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=ju;break;case"toggle":case"beforetoggle":q=fp}var ve=(t&4)!==0,Ie=!ve&&(e==="scroll"||e==="scrollend"),T=ve?R!==null?R+"Capture":null:R;ve=[];for(var M=L,_;M!==null;){var Q=M;if(_=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||_===null||T===null||(Q=ln(M,T),Q!=null&&ve.push(Un(M,Q,_))),Ie)break;M=M.return}0<ve.length&&(R=new q(R,fe,null,a,$),P.push({event:R,listeners:ve}))}}if((t&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",R&&a!==Sr&&(fe=a.relatedTarget||a.fromElement)&&(sa(fe)||fe[ot]))break e;if((q||R)&&(R=$.window===$?$:(R=$.ownerDocument)?R.defaultView||R.parentWindow:window,q?(fe=a.relatedTarget||a.toElement,q=L,fe=fe?sa(fe):null,fe!==null&&(Ie=f(fe),ve=fe.tag,fe!==Ie||ve!==5&&ve!==27&&ve!==6)&&(fe=null)):(q=null,fe=L),q!==fe)){if(ve=yu,Q="onMouseLeave",T="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(ve=ju,Q="onPointerLeave",T="onPointerEnter",M="pointer"),Ie=q==null?R:Ge(q),_=fe==null?R:Ge(fe),R=new ve(Q,M+"leave",q,a,$),R.target=Ie,R.relatedTarget=_,Q=null,sa($)===L&&(ve=new ve(T,M+"enter",fe,a,$),ve.target=_,ve.relatedTarget=Ie,Q=ve),Ie=Q,q&&fe)t:{for(ve=dx,T=q,M=fe,_=0,Q=T;Q;Q=ve(Q))_++;Q=0;for(var ge=M;ge;ge=ve(ge))Q++;for(;0<_-Q;)T=ve(T),_--;for(;0<Q-_;)M=ve(M),Q--;for(;_--;){if(T===M||M!==null&&T===M.alternate){ve=T;break t}T=ve(T),M=ve(M)}ve=null}else ve=null;q!==null&&mh(P,R,q,ve,!1),fe!==null&&Ie!==null&&mh(P,Ie,fe,ve,!0)}}e:{if(R=L?Ge(L):window,q=R.nodeName&&R.nodeName.toLowerCase(),q==="select"||q==="input"&&R.type==="file")var Ve=Du;else if(Au(R))if(Eu)Ve=jp;else{Ve=yp;var me=vp}else q=R.nodeName,!q||q.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?L&&$e(L.elementType)&&(Ve=Du):Ve=wp;if(Ve&&(Ve=Ve(e,L))){Tu(P,Ve,a,$);break e}me&&me(e,R,L),e==="focusout"&&L&&R.type==="number"&&L.memoizedProps.value!=null&&ps(R,"number",R.value)}switch(me=L?Ge(L):window,e){case"focusin":(Au(me)||me.contentEditable==="true")&&(vs=me,Ur=L,fn=null);break;case"focusout":fn=Ur=vs=null;break;case"mousedown":Rr=!0;break;case"contextmenu":case"mouseup":case"dragend":Rr=!1,Vu(P,a,$);break;case"selectionchange":if(Sp)break;case"keydown":case"keyup":Vu(P,a,$)}var Ae;if(Or)e:{switch(e){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else bs?Cu(e,a)&&(Le="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Le="onCompositionStart");Le&&(Nu&&a.locale!=="ko"&&(bs||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&bs&&(Ae=bu()):(dl=$,Ar="value"in dl?dl.value:dl.textContent,bs=!0)),me=Ji(L,Le),0<me.length&&(Le=new wu(Le,e,null,a,$),P.push({event:Le,listeners:me}),Ae?Le.data=Ae:(Ae=Mu(a),Ae!==null&&(Le.data=Ae)))),(Ae=mp?pp(e,a):xp(e,a))&&(Le=Ji(L,"onBeforeInput"),0<Le.length&&(me=new wu("onBeforeInput","beforeinput",null,a,$),P.push({event:me,listeners:Le}),me.data=Ae)),rx(P,e,L,a,$)}fh(P,t)})}function Un(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Ji(e,t){for(var a=t+"Capture",s=[];e!==null;){var i=e,c=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||c===null||(i=ln(e,a),i!=null&&s.unshift(Un(e,i,c)),i=ln(e,t),i!=null&&s.push(Un(e,i,c))),e.tag===3)return s;e=e.return}return[]}function dx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function mh(e,t,a,s,i){for(var c=t._reactName,h=[];a!==null&&a!==s;){var g=a,S=g.alternate,L=g.stateNode;if(g=g.tag,S!==null&&S===s)break;g!==5&&g!==26&&g!==27||L===null||(S=L,i?(L=ln(a,c),L!=null&&h.unshift(Un(a,L,S))):i||(L=ln(a,c),L!=null&&h.push(Un(a,L,S)))),a=a.return}h.length!==0&&e.push({event:t,listeners:h})}var fx=/\r\n?/g,hx=/\u0000|\uFFFD/g;function ph(e){return(typeof e=="string"?e:""+e).replace(fx,`
`).replace(hx,"")}function xh(e,t){return t=ph(t),ph(e)===t}function We(e,t,a,s,i,c){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||K(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&K(e,""+s);break;case"className":hs(e,"class",s);break;case"tabIndex":hs(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":hs(e,a,s);break;case"style":Ue(e,s,c);break;case"data":if(t!=="object"){hs(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=na(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(a==="formAction"?(t!=="input"&&We(e,t,"name",i.name,i,null),We(e,t,"formEncType",i.formEncType,i,null),We(e,t,"formMethod",i.formMethod,i,null),We(e,t,"formTarget",i.formTarget,i,null)):(We(e,t,"encType",i.encType,i,null),We(e,t,"method",i.method,i,null),We(e,t,"target",i.target,i,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=na(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=Ha);break;case"onScroll":s!=null&&Oe("scroll",e);break;case"onScrollEnd":s!=null&&Oe("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(r(61));if(a=s.__html,a!=null){if(i.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=na(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":Oe("beforetoggle",e),Oe("toggle",e),Yl(e,"popover",s);break;case"xlinkActuate":Et(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Et(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Et(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Et(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Et(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Et(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Et(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Et(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Et(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Yl(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ut.get(a)||a,Yl(e,a,s))}}function uc(e,t,a,s,i,c){switch(a){case"style":Ue(e,s,c);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(r(61));if(a=s.__html,a!=null){if(i.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof s=="string"?K(e,s):(typeof s=="number"||typeof s=="bigint")&&K(e,""+s);break;case"onScroll":s!=null&&Oe("scroll",e);break;case"onScrollEnd":s!=null&&Oe("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Ha);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tt.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(i=a.endsWith("Capture"),t=a.slice(2,i?a.length-7:void 0),c=e[Pe]||null,c=c!=null?c[a]:null,typeof c=="function"&&e.removeEventListener(t,c,i),typeof s=="function")){typeof c!="function"&&c!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,i);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):Yl(e,a,s)}}}function Mt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",e),Oe("load",e);var s=!1,i=!1,c;for(c in a)if(a.hasOwnProperty(c)){var h=a[c];if(h!=null)switch(c){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:We(e,t,c,h,a,null)}}i&&We(e,t,"srcSet",a.srcSet,a,null),s&&We(e,t,"src",a.src,a,null);return;case"input":Oe("invalid",e);var g=c=h=i=null,S=null,L=null;for(s in a)if(a.hasOwnProperty(s)){var $=a[s];if($!=null)switch(s){case"name":i=$;break;case"type":h=$;break;case"checked":S=$;break;case"defaultChecked":L=$;break;case"value":c=$;break;case"defaultValue":g=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,t));break;default:We(e,t,s,$,a,null)}}an(e,c,g,S,L,h,i,!1);return;case"select":Oe("invalid",e),s=h=c=null;for(i in a)if(a.hasOwnProperty(i)&&(g=a[i],g!=null))switch(i){case"value":c=g;break;case"defaultValue":h=g;break;case"multiple":s=g;default:We(e,t,i,g,a,null)}t=c,a=h,e.multiple=!!s,t!=null?cl(e,!!s,t,!1):a!=null&&cl(e,!!s,a,!0);return;case"textarea":Oe("invalid",e),c=i=s=null;for(h in a)if(a.hasOwnProperty(h)&&(g=a[h],g!=null))switch(h){case"value":s=g;break;case"defaultValue":i=g;break;case"children":c=g;break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:We(e,t,h,g,a,null)}V(e,s,i,c);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(s=a[S],s!=null))switch(S){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:We(e,t,S,s,a,null)}return;case"dialog":Oe("beforetoggle",e),Oe("toggle",e),Oe("cancel",e),Oe("close",e);break;case"iframe":case"object":Oe("load",e);break;case"video":case"audio":for(s=0;s<Ln.length;s++)Oe(Ln[s],e);break;case"image":Oe("error",e),Oe("load",e);break;case"details":Oe("toggle",e);break;case"embed":case"source":case"link":Oe("error",e),Oe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(s=a[L],s!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:We(e,t,L,s,a,null)}return;default:if($e(t)){for($ in a)a.hasOwnProperty($)&&(s=a[$],s!==void 0&&uc(e,t,$,s,a,void 0));return}}for(g in a)a.hasOwnProperty(g)&&(s=a[g],s!=null&&We(e,t,g,s,a,null))}function mx(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,c=null,h=null,g=null,S=null,L=null,$=null;for(q in a){var P=a[q];if(a.hasOwnProperty(q)&&P!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":S=P;default:s.hasOwnProperty(q)||We(e,t,q,null,s,P)}}for(var R in s){var q=s[R];if(P=a[R],s.hasOwnProperty(R)&&(q!=null||P!=null))switch(R){case"type":c=q;break;case"name":i=q;break;case"checked":L=q;break;case"defaultChecked":$=q;break;case"value":h=q;break;case"defaultValue":g=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,t));break;default:q!==P&&We(e,t,R,q,s,P)}}tn(e,h,g,S,L,$,c,i);return;case"select":q=h=g=R=null;for(c in a)if(S=a[c],a.hasOwnProperty(c)&&S!=null)switch(c){case"value":break;case"multiple":q=S;default:s.hasOwnProperty(c)||We(e,t,c,null,s,S)}for(i in s)if(c=s[i],S=a[i],s.hasOwnProperty(i)&&(c!=null||S!=null))switch(i){case"value":R=c;break;case"defaultValue":g=c;break;case"multiple":h=c;default:c!==S&&We(e,t,i,c,s,S)}t=g,a=h,s=q,R!=null?cl(e,!!a,R,!1):!!s!=!!a&&(t!=null?cl(e,!!a,t,!0):cl(e,!!a,a?[]:"",!1));return;case"textarea":q=R=null;for(g in a)if(i=a[g],a.hasOwnProperty(g)&&i!=null&&!s.hasOwnProperty(g))switch(g){case"value":break;case"children":break;default:We(e,t,g,null,s,i)}for(h in s)if(i=s[h],c=a[h],s.hasOwnProperty(h)&&(i!=null||c!=null))switch(h){case"value":R=i;break;case"defaultValue":q=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(r(91));break;default:i!==c&&We(e,t,h,i,s,c)}Va(e,R,q);return;case"option":for(var fe in a)if(R=a[fe],a.hasOwnProperty(fe)&&R!=null&&!s.hasOwnProperty(fe))switch(fe){case"selected":e.selected=!1;break;default:We(e,t,fe,null,s,R)}for(S in s)if(R=s[S],q=a[S],s.hasOwnProperty(S)&&R!==q&&(R!=null||q!=null))switch(S){case"selected":e.selected=R&&typeof R!="function"&&typeof R!="symbol";break;default:We(e,t,S,R,s,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)R=a[ve],a.hasOwnProperty(ve)&&R!=null&&!s.hasOwnProperty(ve)&&We(e,t,ve,null,s,R);for(L in s)if(R=s[L],q=a[L],s.hasOwnProperty(L)&&R!==q&&(R!=null||q!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(137,t));break;default:We(e,t,L,R,s,q)}return;default:if($e(t)){for(var Ie in a)R=a[Ie],a.hasOwnProperty(Ie)&&R!==void 0&&!s.hasOwnProperty(Ie)&&uc(e,t,Ie,void 0,s,R);for($ in s)R=s[$],q=a[$],!s.hasOwnProperty($)||R===q||R===void 0&&q===void 0||uc(e,t,$,R,s,q);return}}for(var T in a)R=a[T],a.hasOwnProperty(T)&&R!=null&&!s.hasOwnProperty(T)&&We(e,t,T,null,s,R);for(P in s)R=s[P],q=a[P],!s.hasOwnProperty(P)||R===q||R==null&&q==null||We(e,t,P,R,s,q)}function gh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function px(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),s=0;s<a.length;s++){var i=a[s],c=i.transferSize,h=i.initiatorType,g=i.duration;if(c&&g&&gh(h)){for(h=0,g=i.responseEnd,s+=1;s<a.length;s++){var S=a[s],L=S.startTime;if(L>g)break;var $=S.transferSize,P=S.initiatorType;$&&gh(P)&&(S=S.responseEnd,h+=$*(S<g?1:(g-L)/(S-L)))}if(--s,t+=8*(c+h)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var dc=null,fc=null;function Pi(e){return e.nodeType===9?e:e.ownerDocument}function bh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function hc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mc=null;function xx(){var e=window.event;return e&&e.type==="popstate"?e===mc?!1:(mc=e,!0):(mc=null,!1)}var yh=typeof setTimeout=="function"?setTimeout:void 0,gx=typeof clearTimeout=="function"?clearTimeout:void 0,wh=typeof Promise=="function"?Promise:void 0,bx=typeof queueMicrotask=="function"?queueMicrotask:typeof wh<"u"?function(e){return wh.resolve(null).then(e).catch(vx)}:yh;function vx(e){setTimeout(function(){throw e})}function Al(e){return e==="head"}function jh(e,t){var a=t,s=0;do{var i=a.nextSibling;if(e.removeChild(a),i&&i.nodeType===8)if(a=i.data,a==="/$"||a==="/&"){if(s===0){e.removeChild(i),Qs(t);return}s--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")s++;else if(a==="html")Rn(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Rn(a);for(var c=a.firstChild;c;){var h=c.nextSibling,g=c.nodeName;c[Tt]||g==="SCRIPT"||g==="STYLE"||g==="LINK"&&c.rel.toLowerCase()==="stylesheet"||a.removeChild(c),c=h}}else a==="body"&&Rn(e.ownerDocument.body);a=i}while(a);Qs(t)}function Nh(e,t){var a=e;e=0;do{var s=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=s}while(a)}function pc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":pc(a),Zt(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function yx(e,t,a,s){for(;e.nodeType===1;){var i=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Tt])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=fa(e.nextSibling),e===null)break}return null}function wx(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=fa(e.nextSibling),e===null))return null;return e}function Sh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=fa(e.nextSibling),e===null))return null;return e}function xc(e){return e.data==="$?"||e.data==="$~"}function gc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function jx(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function fa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var bc=null;function kh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return fa(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Ch(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Mh(e,t,a){switch(t=Pi(a),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Rn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Zt(e)}var ha=new Map,Ah=new Set;function Fi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var al=ae.d;ae.d={f:Nx,r:Sx,D:kx,C:Cx,L:Mx,m:Ax,X:Dx,S:Tx,M:Ex};function Nx(){var e=al.f(),t=Yi();return e||t}function Sx(e){var t=xa(e);t!==null&&t.tag===5&&t.type==="form"?$d(t):al.r(e)}var Gs=typeof document>"u"?null:document;function Th(e,t,a){var s=Gs;if(s&&typeof t=="string"&&t){var i=Lt(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof a=="string"&&(i+='[crossorigin="'+a+'"]'),Ah.has(i)||(Ah.add(i),e={rel:e,crossOrigin:a,href:t},s.querySelector(i)===null&&(t=s.createElement("link"),Mt(t,"link",e),Be(t),s.head.appendChild(t)))}}function kx(e){al.D(e),Th("dns-prefetch",e,null)}function Cx(e,t){al.C(e,t),Th("preconnect",e,t)}function Mx(e,t,a){al.L(e,t,a);var s=Gs;if(s&&e&&t){var i='link[rel="preload"][as="'+Lt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(i+='[imagesrcset="'+Lt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(i+='[imagesizes="'+Lt(a.imageSizes)+'"]')):i+='[href="'+Lt(e)+'"]';var c=i;switch(t){case"style":c=$s(e);break;case"script":c=Xs(e)}ha.has(c)||(e=j({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),ha.set(c,e),s.querySelector(i)!==null||t==="style"&&s.querySelector(Vn(c))||t==="script"&&s.querySelector(Hn(c))||(t=s.createElement("link"),Mt(t,"link",e),Be(t),s.head.appendChild(t)))}}function Ax(e,t){al.m(e,t);var a=Gs;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+Lt(s)+'"][href="'+Lt(e)+'"]',c=i;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=Xs(e)}if(!ha.has(c)&&(e=j({rel:"modulepreload",href:e},t),ha.set(c,e),a.querySelector(i)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Hn(c)))return}s=a.createElement("link"),Mt(s,"link",e),Be(s),a.head.appendChild(s)}}}function Tx(e,t,a){al.S(e,t,a);var s=Gs;if(s&&e){var i=ct(s).hoistableStyles,c=$s(e);t=t||"default";var h=i.get(c);if(!h){var g={loading:0,preload:null};if(h=s.querySelector(Vn(c)))g.loading=5;else{e=j({rel:"stylesheet",href:e,"data-precedence":t},a),(a=ha.get(c))&&vc(e,a);var S=h=s.createElement("link");Be(S),Mt(S,"link",e),S._p=new Promise(function(L,$){S.onload=L,S.onerror=$}),S.addEventListener("load",function(){g.loading|=1}),S.addEventListener("error",function(){g.loading|=2}),g.loading|=4,Wi(h,t,s)}h={type:"stylesheet",instance:h,count:1,state:g},i.set(c,h)}}}function Dx(e,t){al.X(e,t);var a=Gs;if(a&&e){var s=ct(a).hoistableScripts,i=Xs(e),c=s.get(i);c||(c=a.querySelector(Hn(i)),c||(e=j({src:e,async:!0},t),(t=ha.get(i))&&yc(e,t),c=a.createElement("script"),Be(c),Mt(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(i,c))}}function Ex(e,t){al.M(e,t);var a=Gs;if(a&&e){var s=ct(a).hoistableScripts,i=Xs(e),c=s.get(i);c||(c=a.querySelector(Hn(i)),c||(e=j({src:e,async:!0,type:"module"},t),(t=ha.get(i))&&yc(e,t),c=a.createElement("script"),Be(c),Mt(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(i,c))}}function Dh(e,t,a,s){var i=(i=ee.current)?Fi(i):null;if(!i)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=$s(a.href),a=ct(i).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=$s(a.href);var c=ct(i).hoistableStyles,h=c.get(e);if(h||(i=i.ownerDocument||i,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,h),(c=i.querySelector(Vn(e)))&&!c._p&&(h.instance=c,h.state.loading=5),ha.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ha.set(e,a),c||zx(i,e,a,h.state))),t&&s===null)throw Error(r(528,""));return h}if(t&&s!==null)throw Error(r(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Xs(a),a=ct(i).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function $s(e){return'href="'+Lt(e)+'"'}function Vn(e){return'link[rel="stylesheet"]['+e+"]"}function Eh(e){return j({},e,{"data-precedence":e.precedence,precedence:null})}function zx(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Mt(t,"link",a),Be(t),e.head.appendChild(t))}function Xs(e){return'[src="'+Lt(e)+'"]'}function Hn(e){return"script[async]"+e}function zh(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Lt(a.href)+'"]');if(s)return t.instance=s,Be(s),s;var i=j({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Be(s),Mt(s,"style",i),Wi(s,a.precedence,e),t.instance=s;case"stylesheet":i=$s(a.href);var c=e.querySelector(Vn(i));if(c)return t.state.loading|=4,t.instance=c,Be(c),c;s=Eh(a),(i=ha.get(i))&&vc(s,i),c=(e.ownerDocument||e).createElement("link"),Be(c);var h=c;return h._p=new Promise(function(g,S){h.onload=g,h.onerror=S}),Mt(c,"link",s),t.state.loading|=4,Wi(c,a.precedence,e),t.instance=c;case"script":return c=Xs(a.src),(i=e.querySelector(Hn(c)))?(t.instance=i,Be(i),i):(s=a,(i=ha.get(c))&&(s=j({},a),yc(s,i)),e=e.ownerDocument||e,i=e.createElement("script"),Be(i),Mt(i,"link",s),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,Wi(s,a.precedence,e));return t.instance}function Wi(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=s.length?s[s.length-1]:null,c=i,h=0;h<s.length;h++){var g=s[h];if(g.dataset.precedence===t)c=g;else if(c!==i)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function vc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function yc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ii=null;function Oh(e,t,a){if(Ii===null){var s=new Map,i=Ii=new Map;i.set(a,s)}else i=Ii,s=i.get(a),s||(s=new Map,i.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),i=0;i<a.length;i++){var c=a[i];if(!(c[Tt]||c[Ce]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var h=c.getAttribute(t)||"";h=e+h;var g=s.get(h);g?g.push(c):s.set(h,[c])}}return s}function Bh(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Ox(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function _h(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Bx(e,t,a,s){if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var i=$s(s.href),c=t.querySelector(Vn(i));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=er.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=c,Be(c);return}c=t.ownerDocument||t,s=Eh(s),(i=ha.get(i))&&vc(s,i),c=c.createElement("link"),Be(c);var h=c;h._p=new Promise(function(g,S){h.onload=g,h.onerror=S}),Mt(c,"link",s),a.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=er.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var wc=0;function _x(e,t){return e.stylesheets&&e.count===0&&ar(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var s=setTimeout(function(){if(e.stylesheets&&ar(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+t);0<e.imgBytes&&wc===0&&(wc=62500*px());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ar(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>wc?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(i)}}:null}function er(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ar(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var tr=null;function ar(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,tr=new Map,t.forEach(Lx,e),tr=null,er.call(e))}function Lx(e,t){if(!(t.state.loading&4)){var a=tr.get(e);if(a)var s=a.get(null);else{a=new Map,tr.set(e,a);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<i.length;c++){var h=i[c];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(a.set(h.dataset.precedence,h),s=h)}s&&a.set(null,s)}i=t.instance,h=i.getAttribute("data-precedence"),c=a.get(h)||s,c===s&&a.set(null,i),a.set(h,i),this.count++,s=er.bind(this),i.addEventListener("load",s),i.addEventListener("error",s),c?c.parentNode.insertBefore(i,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var qn={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function Ux(e,t,a,s,i,c,h,g,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=O(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O(0),this.hiddenUpdates=O(null),this.identifierPrefix=s,this.onUncaughtError=i,this.onCaughtError=c,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Lh(e,t,a,s,i,c,h,g,S,L,$,P){return e=new Ux(e,t,a,h,S,L,$,P,g),t=1,c===!0&&(t|=24),c=Jt(3,null,null,t),e.current=c,c.stateNode=e,t=Ir(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:s,isDehydrated:a,cache:t},lo(c),e}function Uh(e){return e?(e=js,e):js}function Rh(e,t,a,s,i,c){i=Uh(i),s.context===null?s.context=i:s.pendingContext=i,s=gl(t),s.payload={element:a},c=c===void 0?null:c,c!==null&&(s.callback=c),a=bl(e,s,t),a!==null&&(Gt(a,e,t),vn(a,e,t))}function Vh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function jc(e,t){Vh(e,t),(e=e.alternate)&&Vh(e,t)}function Hh(e){if(e.tag===13||e.tag===31){var t=Ql(e,67108864);t!==null&&Gt(t,e,67108864),jc(e,67108864)}}function qh(e){if(e.tag===13||e.tag===31){var t=ea();t=he(t);var a=Ql(e,t);a!==null&&Gt(a,e,t),jc(e,t)}}var lr=!0;function Rx(e,t,a,s){var i=U.T;U.T=null;var c=ae.p;try{ae.p=2,Nc(e,t,a,s)}finally{ae.p=c,U.T=i}}function Vx(e,t,a,s){var i=U.T;U.T=null;var c=ae.p;try{ae.p=8,Nc(e,t,a,s)}finally{ae.p=c,U.T=i}}function Nc(e,t,a,s){if(lr){var i=Sc(s);if(i===null)cc(e,t,s,sr,a),Gh(e,s);else if(qx(i,e,t,a,s))s.stopPropagation();else if(Gh(e,s),t&4&&-1<Hx.indexOf(e)){for(;i!==null;){var c=xa(i);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var h=Qt(c.pendingLanes);if(h!==0){var g=c;for(g.pendingLanes|=2,g.entangledLanes|=2;h;){var S=1<<31-jt(h);g.entanglements[1]|=S,h&=~S}Ca(c),(Xe&6)===0&&(Hi=ft()+500,_n(0))}}break;case 31:case 13:g=Ql(c,2),g!==null&&Gt(g,c,2),Yi(),jc(c,2)}if(c=Sc(s),c===null&&cc(e,t,s,sr,a),c===i)break;i=c}i!==null&&s.stopPropagation()}else cc(e,t,s,null,a)}}function Sc(e){return e=kr(e),kc(e)}var sr=null;function kc(e){if(sr=null,e=sa(e),e!==null){var t=f(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=m(t),e!==null)return e;e=null}else if(a===31){if(e=p(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sr=e,null}function Yh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(il()){case Ul:return 2;case rl:return 8;case za:case cs:return 32;case Rl:return 268435456;default:return 32}default:return 32}}var Cc=!1,Tl=null,Dl=null,El=null,Yn=new Map,Gn=new Map,zl=[],Hx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gh(e,t){switch(e){case"focusin":case"focusout":Tl=null;break;case"dragenter":case"dragleave":Dl=null;break;case"mouseover":case"mouseout":El=null;break;case"pointerover":case"pointerout":Yn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gn.delete(t.pointerId)}}function $n(e,t,a,s,i,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:c,targetContainers:[i]},t!==null&&(t=xa(t),t!==null&&Hh(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function qx(e,t,a,s,i){switch(t){case"focusin":return Tl=$n(Tl,e,t,a,s,i),!0;case"dragenter":return Dl=$n(Dl,e,t,a,s,i),!0;case"mouseover":return El=$n(El,e,t,a,s,i),!0;case"pointerover":var c=i.pointerId;return Yn.set(c,$n(Yn.get(c)||null,e,t,a,s,i)),!0;case"gotpointercapture":return c=i.pointerId,Gn.set(c,$n(Gn.get(c)||null,e,t,a,s,i)),!0}return!1}function $h(e){var t=sa(e.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=m(a),t!==null){e.blockedOn=t,lt(e.priority,function(){qh(a)});return}}else if(t===31){if(t=p(a),t!==null){e.blockedOn=t,lt(e.priority,function(){qh(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Sc(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);Sr=s,a.target.dispatchEvent(s),Sr=null}else return t=xa(a),t!==null&&Hh(t),e.blockedOn=a,!1;t.shift()}return!0}function Xh(e,t,a){nr(e)&&a.delete(t)}function Yx(){Cc=!1,Tl!==null&&nr(Tl)&&(Tl=null),Dl!==null&&nr(Dl)&&(Dl=null),El!==null&&nr(El)&&(El=null),Yn.forEach(Xh),Gn.forEach(Xh)}function ir(e,t){e.blockedOn===t&&(e.blockedOn=null,Cc||(Cc=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,Yx)))}var rr=null;function Qh(e){rr!==e&&(rr=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){rr===e&&(rr=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],i=e[t+2];if(typeof s!="function"){if(kc(s||a)===null)continue;break}var c=xa(a);c!==null&&(e.splice(t,3),t-=3,So(c,{pending:!0,data:i,method:a.method,action:s},s,i))}}))}function Qs(e){function t(S){return ir(S,e)}Tl!==null&&ir(Tl,e),Dl!==null&&ir(Dl,e),El!==null&&ir(El,e),Yn.forEach(t),Gn.forEach(t);for(var a=0;a<zl.length;a++){var s=zl[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<zl.length&&(a=zl[0],a.blockedOn===null);)$h(a),a.blockedOn===null&&zl.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var i=a[s],c=a[s+1],h=i[Pe]||null;if(typeof c=="function")h||Qh(a);else if(h){var g=null;if(c&&c.hasAttribute("formAction")){if(i=c,h=c[Pe]||null)g=h.formAction;else if(kc(i)!==null)continue}else g=h.action;typeof g=="function"?a[s+1]=g:(a.splice(s,3),s-=3),Qh(a)}}}function Zh(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(h){return i=h})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),s||setTimeout(a,20)}function a(){if(!s&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function Mc(e){this._internalRoot=e}or.prototype.render=Mc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var a=t.current,s=ea();Rh(a,s,e,t,null,null)},or.prototype.unmount=Mc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rh(e.current,2,null,e,null,null),Yi(),t[ot]=null}};function or(e){this._internalRoot=e}or.prototype.unstable_scheduleHydration=function(e){if(e){var t=Te();e={blockedOn:null,target:e,priority:t};for(var a=0;a<zl.length&&t!==0&&t<zl[a].priority;a++);zl.splice(a,0,e),a===0&&$h(e)}};var Kh=n.version;if(Kh!=="19.2.1")throw Error(r(527,Kh,"19.2.1"));ae.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=b(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Gx={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cr.isDisabled&&cr.supportsFiber)try{$t=cr.inject(Gx),pt=cr}catch{}}return Qn.createRoot=function(e,t){if(!d(e))throw Error(r(299));var a=!1,s="",i=ef,c=tf,h=af;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Lh(e,1,!1,null,null,a,s,null,i,c,h,Zh),e[ot]=t.current,oc(e),new Mc(t)},Qn.hydrateRoot=function(e,t,a){if(!d(e))throw Error(r(299));var s=!1,i="",c=ef,h=tf,g=af,S=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onUncaughtError!==void 0&&(c=a.onUncaughtError),a.onCaughtError!==void 0&&(h=a.onCaughtError),a.onRecoverableError!==void 0&&(g=a.onRecoverableError),a.formState!==void 0&&(S=a.formState)),t=Lh(e,1,!0,t,a??null,s,i,S,c,h,g,Zh),t.context=Uh(null),a=t.current,s=ea(),s=he(s),i=gl(s),i.callback=null,bl(a,i,s),a=s,t.current.lanes=a,A(t,a),Ca(t),e[ot]=t.current,oc(e),new or(t)},Qn.version="19.2.1",Qn}var em;function lg(){if(em)return Tc.exports;em=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(n){console.error(n)}}return u(),Tc.exports=ag(),Tc.exports}var sg=lg();const ng=Km(sg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=u=>u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rg=u=>u.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,o,r)=>r?r.toUpperCase():o.toLowerCase()),tm=u=>{const n=rg(u);return n.charAt(0).toUpperCase()+n.slice(1)},Jm=(...u)=>u.filter((n,o,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===o).join(" ").trim(),og=u=>{for(const n in u)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=y.forwardRef(({color:u="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:r,className:d="",children:f,iconNode:m,...p},x)=>y.createElement("svg",{ref:x,...cg,width:n,height:n,stroke:u,strokeWidth:r?Number(o)*24/Number(n):o,className:Jm("lucide",d),...!f&&!og(p)&&{"aria-hidden":"true"},...p},[...m.map(([b,v])=>y.createElement(b,v)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=(u,n)=>{const o=y.forwardRef(({className:r,...d},f)=>y.createElement(ug,{ref:f,iconNode:n,className:Jm(`lucide-${ig(tm(u))}`,`lucide-${u}`,r),...d}));return o.displayName=tm(u),o};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],fg=ue("activity",dg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Pm=ue("arrow-left",hg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],pg=ue("arrow-right",mg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],Fm=ue("bell-ring",xg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ps=ue("bell",gg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Wm=ue("book-open",bg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],ur=ue("bot",vg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],mr=ue("calendar",yg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],jg=ue("camera",wg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=[["path",{d:"M9 5v4",key:"14uxtq"}],["rect",{width:"4",height:"6",x:"7",y:"9",rx:"1",key:"f4fvz0"}],["path",{d:"M9 15v2",key:"r5rk32"}],["path",{d:"M17 3v2",key:"1l2re6"}],["rect",{width:"4",height:"8",x:"15",y:"5",rx:"1",key:"z38je5"}],["path",{d:"M17 13v3",key:"5l0wba"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}]],am=ue("chart-candlestick",Ng);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Yc=ue("chart-no-axes-column",Sg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Bl=ue("check",kg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Im=ue("chevron-down",Cg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],e0=ue("chevron-left",Mg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],t0=ue("chevron-right",Ag);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Dg=ue("chevron-up",Tg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Gc=ue("circle-alert",Eg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Og=ue("circle-check-big",zg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],_g=ue("circle-minus",Bg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$c=ue("circle-user-round",Lg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],a0=ue("clock",Ug);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],l0=ue("copy",Rg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],tu=ue("crosshair",Vg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],lm=ue("crown",Hg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Yg=ue("dollar-sign",qg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],$g=ue("download",Gg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Qg=ue("ellipsis",Xg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Kg=ue("external-link",Zg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Pg=ue("eye-off",Jg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],s0=ue("eye",Fg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],Ig=ue("git-merge",Wg);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],sm=ue("grip-horizontal",eb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ab=ue("history",tb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],sb=ue("house",lb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],au=ue("keyboard",nb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],rb=ue("layers",ib);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],cb=ue("link-2",ob);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],nm=ue("loader-circle",ub);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],n0=ue("lock-open",db);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],i0=ue("log-in",fb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Xc=ue("lock",hb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],pb=ue("log-out",mb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=[["path",{d:"m12 15 4 4",key:"lnac28"}],["path",{d:"M2.352 10.648a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l6.029-6.029a1 1 0 1 1 3 3l-6.029 6.029a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l6.365-6.367A1 1 0 0 0 8.716 4.282z",key:"nlhkjb"}],["path",{d:"m5 8 4 4",key:"j6kj7e"}]],gb=ue("magnet",xb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Qc=ue("mail",bb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=[["path",{d:"M5 12h14",key:"1ays0h"}]],lu=ue("minus",vb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],wb=ue("monitor",yb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Nb=ue("moon",jb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],r0=ue("mouse-pointer-2",Sb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],o0=ue("pause",kb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],c0=ue("play",Cb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],u0=ue("plus",Mb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],d0=ue("redo",Ab);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_l=ue("refresh-cw",Tb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Eb=ue("save",Db);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],xr=ue("search",zb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Bb=ue("send",Ob);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m16 16 4-4-4-4",key:"1js579"}],["path",{d:"m8 8-4 4 4 4",key:"1whems"}]],f0=ue("separator-vertical",_b);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],su=ue("settings-2",Lb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],im=ue("shield",Ub);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Zc=ue("sparkles",Rb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Hb=ue("square-plus",Vb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],h0=ue("square",qb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],br=ue("star",Yb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],$b=ue("sun",Gb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Kc=ue("target",Xb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],os=ue("trash-2",Qb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Kb=ue("trending-down",Zb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],wa=ue("trending-up",Jb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],nl=ue("triangle-alert",Pb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],m0=ue("type",Fb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],p0=ue("undo",Wb);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ev=ue("user",Ib);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],rm=ue("users",tv);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],om=ue("wifi-off",av);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],sv=ue("wifi",lv);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wt=ue("x",nv);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],cm=ue("zap",iv),rv=({currentMode:u,onModeChange:n,onAlertClick:o,hasActiveAlerts:r,onProfileClick:d,onSettingsClick:f,onJournalClick:m,onShortcutsClick:p,onFeaturesClick:x,isAuthenticated:b})=>{const v=j=>`w-full p-2 sm:p-3 flex justify-center items-center transition-all duration-200 border-l-2 touch-active ${u===j?"border-[var(--accent-blue)] text-white bg-[#2d2d2d]":"border-transparent text-gray-400 hover:text-white hover:bg-[#252525] active:bg-[#2d2d2d]"}`;return l.jsxs("aside",{className:"hidden sm:flex flex-shrink-0 w-[44px] sm:w-[50px] bg-[var(--bg-secondary)] border-r border-[var(--border-color)] flex-col items-center py-1 sm:py-2 space-y-1 sm:space-y-2 z-20",children:[l.jsx("button",{className:v("standard"),onClick:()=>n("standard"),title:"Chart Mode",children:l.jsx(wa,{className:"h-5 w-5"})}),l.jsxs("button",{onClick:o,className:`w-full p-2 sm:p-3 flex justify-center items-center transition-colors relative touch-active ${r?"text-[var(--accent-bullish)]":"text-gray-400 hover:text-white hover:bg-[#252525] active:bg-[#2d2d2d]"}`,title:"Set Price Alert",children:[l.jsx(Ps,{className:"h-5 w-5"}),r&&l.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-[var(--accent-bullish)] rounded-full animate-pulse"})]}),l.jsx("button",{className:v("ai"),onClick:()=>n("ai"),title:"AI Assistant",children:l.jsx(Zc,{className:"h-5 w-5"})}),l.jsx("button",{className:v("black-swan"),onClick:()=>n("black-swan"),title:"Black Swan / Risk",children:l.jsx(nl,{className:"h-5 w-5"})}),l.jsx("button",{onClick:m,className:"w-full p-2 sm:p-3 flex justify-center items-center text-gray-400 hover:text-white hover:bg-[#252525] active:bg-[#2d2d2d] transition-colors touch-active",title:"Trading Journal & History",children:l.jsx(Wm,{className:"h-5 w-5"})}),l.jsx("div",{className:"flex-grow"}),l.jsx("button",{onClick:p,className:"w-full p-2 sm:p-3 flex justify-center items-center text-gray-400 hover:text-white hover:bg-[#252525] active:bg-[#2d2d2d] transition-colors touch-active",title:"Keyboard Shortcuts (?)",children:l.jsx(au,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),l.jsx("button",{onClick:f,className:"w-full p-2 sm:p-3 flex justify-center items-center text-gray-400 hover:text-white hover:bg-[#252525] active:bg-[#2d2d2d] transition-colors touch-active",title:"Settings",children:l.jsx(su,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),l.jsx("button",{onClick:d,className:`w-full p-2 sm:p-3 flex justify-center items-center transition-colors mb-2 touch-active ${b?"text-[var(--accent-blue)] hover:bg-[#252525] active:bg-[#2d2d2d]":"text-gray-400 hover:text-white hover:bg-[#252525] active:bg-[#2d2d2d]"}`,title:b?"Profile":"Sign In",children:b?l.jsx($c,{className:"h-5 w-5 sm:h-6 sm:w-6"}):l.jsx(i0,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})},um=u=>{let n;const o=new Set,r=(b,v)=>{const j=typeof b=="function"?b(n):b;if(!Object.is(j,n)){const C=n;n=v??(typeof j!="object"||j===null)?j:Object.assign({},n,j),o.forEach(w=>w(n,C))}},d=()=>n,p={setState:r,getState:d,getInitialState:()=>x,subscribe:b=>(o.add(b),()=>o.delete(b))},x=n=u(r,d,p);return p},ov=(u=>u?um(u):um),cv=u=>u;function uv(u,n=cv){const o=ll.useSyncExternalStore(u.subscribe,ll.useCallback(()=>n(u.getState()),[u,n]),ll.useCallback(()=>n(u.getInitialState()),[u,n]));return ll.useDebugValue(o),o}const dm=u=>{const n=ov(u),o=r=>uv(n,r);return Object.assign(o,n),o},Pn=(u=>u?dm(u):dm);function vr(u,n){let o;try{o=u()}catch{return}return{getItem:d=>{var f;const m=x=>x===null?null:JSON.parse(x,void 0),p=(f=o.getItem(d))!=null?f:null;return p instanceof Promise?p.then(m):m(p)},setItem:(d,f)=>o.setItem(d,JSON.stringify(f,void 0)),removeItem:d=>o.removeItem(d)}}const Jc=u=>n=>{try{const o=u(n);return o instanceof Promise?o:{then(r){return Jc(r)(o)},catch(r){return this}}}catch(o){return{then(r){return this},catch(r){return Jc(r)(o)}}}},dv=(u,n)=>(o,r,d)=>{let f={storage:vr(()=>localStorage),partialize:k=>k,version:0,merge:(k,B)=>({...B,...k}),...n},m=!1;const p=new Set,x=new Set;let b=f.storage;if(!b)return u((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${f.name}', the given storage is currently unavailable.`),o(...k)},r,d);const v=()=>{const k=f.partialize({...r()});return b.setItem(f.name,{state:k,version:f.version})},j=d.setState;d.setState=(k,B)=>(j(k,B),v());const C=u((...k)=>(o(...k),v()),r,d);d.getInitialState=()=>C;let w;const N=()=>{var k,B;if(!b)return;m=!1,p.forEach(H=>{var Z;return H((Z=r())!=null?Z:C)});const E=((B=f.onRehydrateStorage)==null?void 0:B.call(f,(k=r())!=null?k:C))||void 0;return Jc(b.getItem.bind(b))(f.name).then(H=>{if(H)if(typeof H.version=="number"&&H.version!==f.version){if(f.migrate){const Z=f.migrate(H.state,H.version);return Z instanceof Promise?Z.then(ne=>[!0,ne]):[!0,Z]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,H.state];return[!1,void 0]}).then(H=>{var Z;const[ne,re]=H;if(w=f.merge(re,(Z=r())!=null?Z:C),o(w,!0),ne)return v()}).then(()=>{E==null||E(w,void 0),w=r(),m=!0,x.forEach(H=>H(w))}).catch(H=>{E==null||E(void 0,H)})};return d.persist={setOptions:k=>{f={...f,...k},k.storage&&(b=k.storage)},clearStorage:()=>{b==null||b.removeItem(f.name)},getOptions:()=>f,rehydrate:()=>N(),hasHydrated:()=>m,onHydrate:k=>(p.add(k),()=>{p.delete(k)}),onFinishHydration:k=>(x.add(k),()=>{x.delete(k)})},f.skipHydration||N(),w||C},nu=dv,x0=Pn()(nu((u,n)=>({theme:"dark",resolvedTheme:"dark",setTheme:o=>{const r=o==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":o;document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(r),u({theme:o,resolvedTheme:r})}}),{name:"tradevision-theme",storage:vr(()=>localStorage)}));Pn()(nu((u,n)=>({sidebarCollapsed:!1,watchlistVisible:!0,aiPanelVisible:!1,templates:[],activeTemplateId:null,toggleSidebar:()=>u(o=>({sidebarCollapsed:!o.sidebarCollapsed})),toggleWatchlist:()=>u(o=>({watchlistVisible:!o.watchlistVisible})),toggleAIPanel:()=>u(o=>({aiPanelVisible:!o.aiPanelVisible})),saveTemplate:(o,r)=>{const d={id:crypto.randomUUID(),name:o,createdAt:Date.now(),config:r};u(f=>({templates:[...f.templates,d]}))},loadTemplate:o=>{const r=n().templates.find(d=>d.id===o);return r?(u({activeTemplateId:o}),r.config):null},deleteTemplate:o=>{u(r=>({templates:r.templates.filter(d=>d.id!==o),activeTemplateId:r.activeTemplateId===o?null:r.activeTemplateId}))}}),{name:"tradevision-layout",storage:vr(()=>localStorage)}));Pn()(nu((u,n)=>({alerts:[],triggeredAlerts:new Set,addAlert:o=>{const r={...o,id:crypto.randomUUID()};u(d=>({alerts:[...d.alerts,r]})),"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},removeAlert:o=>{u(r=>({alerts:r.alerts.filter(d=>d.id!==o)}))},toggleAlert:o=>{u(r=>({alerts:r.alerts.map(d=>d.id===o?{...d,isActive:!d.isActive}:d)}))},triggerAlert:o=>{const r=n().alerts.find(d=>d.id===o);r&&!n().triggeredAlerts.has(o)&&("Notification"in window&&Notification.permission==="granted"&&new Notification("Price Alert Triggered!",{body:`${r.symbol} is ${r.condition} $${r.targetPrice}`,icon:"/icons/icon-192.png"}),u(d=>({triggeredAlerts:new Set([...d.triggeredAlerts,o])})))},checkAlerts:(o,r)=>{const{alerts:d,triggerAlert:f,triggeredAlerts:m}=n(),p=[];return d.filter(x=>x.symbol===o&&x.isActive&&!m.has(x.id)).forEach(x=>{(x.condition==="above"&&r>=x.targetPrice||x.condition==="below"&&r<=x.targetPrice)&&(f(x.id),p.push(x))}),p}}),{name:"tradevision-alerts",storage:vr(()=>localStorage),partialize:u=>({alerts:u.alerts})}));Pn((u,n)=>({charts:[{id:"main",symbol:"BTCUSD",timeframe:"1D",chartType:"Candlestick"}],activeChartId:"main",layout:"1x1",addChart:o=>{const r={"1x1":1,"1x2":2,"2x1":2,"2x2":4,"1x3":3,"3x1":3,"2x3":6,"3x2":6,"3x3":9};if(n().charts.length>=r[n().layout])return;const d={id:crypto.randomUUID(),symbol:o,timeframe:"1D",chartType:"Candlestick"};u(f=>({charts:[...f.charts,d],activeChartId:d.id}))},removeChart:o=>{n().charts.length<=1||u(r=>({charts:r.charts.filter(d=>d.id!==o),activeChartId:r.activeChartId===o?r.charts[0].id:r.activeChartId}))},setActiveChart:o=>u({activeChartId:o}),updateChart:(o,r)=>{u(d=>({charts:d.charts.map(f=>f.id===o?{...f,...r}:f)}))},setLayout:o=>{const r={"1x1":1,"1x2":2,"2x1":2,"2x2":4,"1x3":3,"3x1":3,"2x3":6,"3x2":6,"3x3":9};u(d=>({layout:o,charts:d.charts.slice(0,r[o])}))}}));Pn()(u=>({shortcuts:[{key:"s",modifiers:["ctrl"],action:"save",description:"Save layout"},{key:"z",modifiers:["ctrl"],action:"undo",description:"Undo drawing"},{key:"y",modifiers:["ctrl"],action:"redo",description:"Redo drawing"},{key:"Delete",modifiers:[],action:"delete",description:"Delete selected"},{key:"Escape",modifiers:[],action:"deselect",description:"Deselect tool"},{key:"1",modifiers:[],action:"tool-cursor",description:"Cursor tool"},{key:"2",modifiers:[],action:"tool-crosshair",description:"Crosshair"},{key:"3",modifiers:[],action:"tool-trendline",description:"Trendline"},{key:"4",modifiers:[],action:"tool-horizontal",description:"Horizontal line"},{key:"5",modifiers:[],action:"tool-rectangle",description:"Rectangle"},{key:"f",modifiers:[],action:"tool-fibonacci",description:"Fibonacci"},{key:"t",modifiers:[],action:"tool-text",description:"Text tool"},{key:"+",modifiers:[],action:"zoom-in",description:"Zoom in"},{key:"-",modifiers:[],action:"zoom-out",description:"Zoom out"},{key:"0",modifiers:[],action:"zoom-reset",description:"Reset zoom"},{key:"ArrowLeft",modifiers:[],action:"pan-left",description:"Pan left"},{key:"ArrowRight",modifiers:[],action:"pan-right",description:"Pan right"},{key:"i",modifiers:["ctrl"],action:"toggle-ai",description:"Toggle AI panel"},{key:"w",modifiers:["ctrl"],action:"toggle-watchlist",description:"Toggle watchlist"},{key:"/",modifiers:["ctrl"],action:"search",description:"Search symbol"},{key:"?",modifiers:["shift"],action:"help",description:"Show shortcuts"}],enabled:!0,setEnabled:n=>u({enabled:n})}));const Pc=(u,n)=>n.some(o=>u instanceof o);let fm,hm;function fv(){return fm||(fm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hv(){return hm||(hm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fc=new WeakMap,zc=new WeakMap,yr=new WeakMap;function mv(u){const n=new Promise((o,r)=>{const d=()=>{u.removeEventListener("success",f),u.removeEventListener("error",m)},f=()=>{o(rs(u.result)),d()},m=()=>{r(u.error),d()};u.addEventListener("success",f),u.addEventListener("error",m)});return yr.set(n,u),n}function pv(u){if(Fc.has(u))return;const n=new Promise((o,r)=>{const d=()=>{u.removeEventListener("complete",f),u.removeEventListener("error",m),u.removeEventListener("abort",m)},f=()=>{o(),d()},m=()=>{r(u.error||new DOMException("AbortError","AbortError")),d()};u.addEventListener("complete",f),u.addEventListener("error",m),u.addEventListener("abort",m)});Fc.set(u,n)}let Wc={get(u,n,o){if(u instanceof IDBTransaction){if(n==="done")return Fc.get(u);if(n==="store")return o.objectStoreNames[1]?void 0:o.objectStore(o.objectStoreNames[0])}return rs(u[n])},set(u,n,o){return u[n]=o,!0},has(u,n){return u instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in u}};function g0(u){Wc=u(Wc)}function xv(u){return hv().includes(u)?function(...n){return u.apply(Ic(this),n),rs(this.request)}:function(...n){return rs(u.apply(Ic(this),n))}}function gv(u){return typeof u=="function"?xv(u):(u instanceof IDBTransaction&&pv(u),Pc(u,fv())?new Proxy(u,Wc):u)}function rs(u){if(u instanceof IDBRequest)return mv(u);if(zc.has(u))return zc.get(u);const n=gv(u);return n!==u&&(zc.set(u,n),yr.set(n,u)),n}const Ic=u=>yr.get(u);function bv(u,n,{blocked:o,upgrade:r,blocking:d,terminated:f}={}){const m=indexedDB.open(u,n),p=rs(m);return r&&m.addEventListener("upgradeneeded",x=>{r(rs(m.result),x.oldVersion,x.newVersion,rs(m.transaction),x)}),o&&m.addEventListener("blocked",x=>o(x.oldVersion,x.newVersion,x)),p.then(x=>{f&&x.addEventListener("close",()=>f()),d&&x.addEventListener("versionchange",b=>d(b.oldVersion,b.newVersion,b))}).catch(()=>{}),p}const vv=["get","getKey","getAll","getAllKeys","count"],yv=["put","add","delete","clear"],Oc=new Map;function mm(u,n){if(!(u instanceof IDBDatabase&&!(n in u)&&typeof n=="string"))return;if(Oc.get(n))return Oc.get(n);const o=n.replace(/FromIndex$/,""),r=n!==o,d=yv.includes(o);if(!(o in(r?IDBIndex:IDBObjectStore).prototype)||!(d||vv.includes(o)))return;const f=async function(m,...p){const x=this.transaction(m,d?"readwrite":"readonly");let b=x.store;return r&&(b=b.index(p.shift())),(await Promise.all([b[o](...p),d&&x.done]))[0]};return Oc.set(n,f),f}g0(u=>({...u,get:(n,o,r)=>mm(n,o)||u.get(n,o,r),has:(n,o)=>!!mm(n,o)||u.has(n,o)}));const wv=["continue","continuePrimaryKey","advance"],pm={},eu=new WeakMap,b0=new WeakMap,jv={get(u,n){if(!wv.includes(n))return u[n];let o=pm[n];return o||(o=pm[n]=function(...r){eu.set(this,b0.get(this)[n](...r))}),o}};async function*Nv(...u){let n=this;if(n instanceof IDBCursor||(n=await n.openCursor(...u)),!n)return;n=n;const o=new Proxy(n,jv);for(b0.set(o,n),yr.set(o,Ic(n));n;)yield o,n=await(eu.get(o)||n.continue()),eu.delete(o)}function xm(u,n){return n===Symbol.asyncIterator&&Pc(u,[IDBIndex,IDBObjectStore,IDBCursor])||n==="iterate"&&Pc(u,[IDBIndex,IDBObjectStore])}g0(u=>({...u,get(n,o,r){return xm(n,o)?Nv:u.get(n,o,r)},has(n,o){return xm(n,o)||u.has(n,o)}}));const Sv="tradevision-db",kv=1;let dr=null;async function iu(){return dr||(dr=await bv(Sv,kv,{upgrade(u){u.objectStoreNames.contains("watchlist")||u.createObjectStore("watchlist",{keyPath:"symbol"}).createIndex("by-symbol","symbol"),u.objectStoreNames.contains("drawings")||u.createObjectStore("drawings",{keyPath:"id"}).createIndex("by-symbol-timeframe","symbolTimeframe"),u.objectStoreNames.contains("candles")||u.createObjectStore("candles",{keyPath:"id"}).createIndex("by-symbol-timeframe",["symbol","timeframe"]),u.objectStoreNames.contains("preferences")||u.createObjectStore("preferences",{keyPath:"key"})}}),dr)}async function Cv(){return(await(await iu()).getAll("watchlist")).map(({updatedAt:o,...r})=>r)}async function Mv(){const u=await iu(),n=await Cv(),o=await u.getAll("drawings"),r=await u.getAll("preferences"),d=o.map(({symbolTimeframe:m,updatedAt:p,...x})=>x),f=r.reduce((m,{key:p,value:x})=>(m[p]=x,m),{});return{watchlist:n,drawings:d,preferences:f}}async function Av(){const u=await iu();await u.clear("watchlist"),await u.clear("drawings"),await u.clear("candles"),await u.clear("preferences")}const Tv=({isOpen:u,onClose:n})=>{const{theme:o,setTheme:r}=x0(),[d,f]=y.useState(!0),[m,p]=y.useState(!0),[x,b]=y.useState(!0),[v,j]=y.useState(!1),[C,w]=y.useState(!1),[N,k]=y.useState(0),B=y.useRef(0),E=y.useRef(0),H=y.useCallback(F=>{F.target.closest(".sheet-handle")&&(w(!0),B.current=F.touches[0].clientY,E.current=0)},[]),Z=y.useCallback(F=>{if(!C)return;const G=F.touches[0].clientY-B.current;G>0&&(E.current=G,k(G))},[C]),ne=y.useCallback(()=>{C&&(w(!1),E.current>100&&n(),k(0),E.current=0)},[C,n]);y.useEffect(()=>{const F=localStorage.getItem("tv_notifications"),G=localStorage.getItem("tv_sound"),z=localStorage.getItem("tv_auto_refresh");F!==null&&f(F==="true"),G!==null&&p(G==="true"),z!==null&&b(z==="true")},[]);const re=(F,G)=>{localStorage.setItem(F,String(G))},Y=async()=>{try{const F=await Mv(),G=new Blob([JSON.stringify(F,null,2)],{type:"application/json"}),z=URL.createObjectURL(G),D=document.createElement("a");D.href=z,D.download=`tradevision-backup-${new Date().toISOString().split("T")[0]}.json`,D.click(),URL.revokeObjectURL(z)}catch(F){console.error("Export failed:",F)}},W=async()=>{if(!v){j(!0),setTimeout(()=>j(!1),3e3);return}try{await Av(),localStorage.clear(),j(!1),window.location.reload()}catch(F){console.error("Clear data failed:",F)}};return u?l.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded-t-2xl sm:rounded-2xl w-full sm:max-w-md max-h-[90vh] overflow-hidden shadow-xl flex flex-col",style:{transform:`translateY(${N}px)`,transition:C?"none":"transform 0.2s ease-out"},onTouchStart:H,onTouchMove:Z,onTouchEnd:ne,children:[l.jsx("div",{className:"sheet-handle sm:hidden flex justify-center pt-3 pb-1 cursor-grab active:cursor-grabbing",children:l.jsx("div",{className:"w-10 h-1 bg-[var(--border-color)] rounded-full"})}),l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[var(--border-color)]",children:[l.jsx("h2",{className:"text-lg font-bold text-white",children:"Settings"}),l.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-[var(--bg-panel)] transition-colors touch-active",children:l.jsx(wt,{className:"w-5 h-5 text-[var(--text-secondary)]"})})]}),l.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto overscroll-contain flex-1 safe-area-bottom",children:[l.jsxs("section",{children:[l.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Appearance"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs text-[var(--text-secondary)] block mb-2",children:"Theme"}),l.jsx("div",{className:"flex gap-2",children:[{value:"light",icon:$b,label:"Light"},{value:"dark",icon:Nb,label:"Dark"},{value:"system",icon:wb,label:"System"}].map(({value:F,icon:G,label:z})=>l.jsxs("button",{onClick:()=>r(F),className:`flex-1 flex flex-col items-center gap-1 p-3 rounded-xl sm:rounded-lg border transition-colors touch-active ${o===F?"bg-[var(--accent-blue)] border-[var(--accent-blue)] text-white":"bg-[var(--bg-panel)] border-[var(--border-color)] text-[var(--text-secondary)] hover:border-[var(--accent-blue)]"}`,children:[l.jsx(G,{className:"w-5 h-5"}),l.jsx("span",{className:"text-xs",children:z})]},F))})]})]}),l.jsxs("section",{children:[l.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Notifications"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(Bc,{icon:Ps,label:"Price Alerts",description:"Get notified when price targets are hit",checked:d,onChange:F=>{f(F),re("tv_notifications",F)}}),l.jsx(Bc,{icon:Ps,label:"Sound Effects",description:"Play sound for notifications",checked:m,onChange:F=>{p(F),re("tv_sound",F)}})]})]}),l.jsxs("section",{children:[l.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Data & Sync"}),l.jsx("div",{className:"space-y-3",children:l.jsx(Bc,{icon:_l,label:"Auto Refresh",description:"Automatically update chart data",checked:x,onChange:F=>{b(F),re("tv_auto_refresh",F)}})})]}),l.jsxs("section",{className:"hidden sm:block",children:[l.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Keyboard Shortcuts"}),l.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-lg p-3 space-y-2 text-sm",children:[l.jsx(Zn,{keys:["?"],description:"Show shortcuts"}),l.jsx(Zn,{keys:["","K"],description:"Search"}),l.jsx(Zn,{keys:["","/"],description:"Toggle AI panel"}),l.jsx(Zn,{keys:["Esc"],description:"Close modals"}),l.jsx(Zn,{keys:["1-5"],description:"Switch timeframes"})]})]}),l.jsxs("section",{children:[l.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Data Management"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("button",{onClick:Y,className:"w-full flex items-center gap-3 px-4 py-4 sm:py-3 bg-[var(--bg-panel)] border border-[var(--border-color)] rounded-xl sm:rounded-lg text-white hover:bg-[var(--bg-primary)] transition-colors touch-active",children:[l.jsx($g,{className:"w-5 h-5 text-[var(--accent-blue)]"}),l.jsxs("div",{className:"text-left",children:[l.jsx("p",{className:"text-sm font-medium",children:"Export Data"}),l.jsx("p",{className:"text-xs text-[var(--text-secondary)]",children:"Download your watchlist and settings"})]})]}),l.jsxs("button",{onClick:W,className:`w-full flex items-center gap-3 px-4 py-4 sm:py-3 border rounded-xl sm:rounded-lg transition-colors touch-active ${v?"bg-red-500/20 border-red-500 text-red-400":"bg-[var(--bg-panel)] border-[var(--border-color)] text-white hover:bg-[var(--bg-primary)]"}`,children:[l.jsx(os,{className:"w-5 h-5 text-red-400"}),l.jsxs("div",{className:"text-left",children:[l.jsx("p",{className:"text-sm font-medium",children:v?"Click again to confirm":"Clear All Data"}),l.jsx("p",{className:"text-xs text-[var(--text-secondary)]",children:v?"This action cannot be undone":"Reset app to default state"})]})]})]})]}),l.jsx("div",{className:"pt-4 border-t border-[var(--border-color)] text-center",children:l.jsx("p",{className:"text-xs text-[var(--text-secondary)]",children:"TradeVision AI v0.0.2"})})]})]})}):null},Bc=({icon:u,label:n,description:o,checked:r,onChange:d})=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-[var(--bg-panel)] rounded-xl sm:rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(u,{className:"w-5 h-5 text-[var(--text-secondary)]"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-white",children:n}),l.jsx("p",{className:"text-xs text-[var(--text-secondary)]",children:o})]})]}),l.jsx("button",{onClick:()=>d(!r),className:`relative w-12 h-7 sm:w-11 sm:h-6 rounded-full transition-colors touch-active ${r?"bg-[var(--accent-blue)]":"bg-[var(--border-color)]"}`,children:l.jsx("span",{className:`absolute top-1 w-5 h-5 sm:w-4 sm:h-4 rounded-full bg-white transition-transform ${r?"left-6":"left-1"}`})})]}),Zn=({keys:u,description:n})=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[var(--text-secondary)]",children:n}),l.jsx("div",{className:"flex gap-1",children:u.map((o,r)=>l.jsx("kbd",{className:"px-2 py-0.5 bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded text-xs font-mono text-white",children:o},r))})]}),Dv=({symbol:u,timeframe:n,onTimeframeChange:o,onToggleReplay:r,isReplayActive:d,chartType:f,onChartTypeChange:m,onSave:p,onSymbolSearch:x,onScreenshot:b,isAuthenticated:v,user:j,onLogin:C,onRegister:w,onProfileClick:N})=>{const k=["1m","5m","15m","1H","4H","1D"],[B,E]=y.useState(!1),H=Y=>{const W="px-2 sm:px-3 py-1 rounded text-[10px] sm:text-xs font-medium transition-colors touch-active";return n===Y?W+" bg-[var(--text-primary)] text-[var(--bg-primary)]":W+" text-[var(--text-secondary)] hover:bg-[#252525] hover:text-white active:bg-[#252525]"},Z=()=>{const Y="p-2 rounded hover:bg-[#252525] hover:text-white flex gap-1 items-center";return B?Y+" text-white bg-[#252525]":Y+" text-[var(--text-secondary)]"},ne=Y=>{const W="w-full text-left px-4 py-3 text-sm rounded-lg flex items-center gap-3 transition-colors";return f===Y?W+" bg-[var(--accent-blue)] text-white":W+" text-gray-300 hover:bg-[#1a1a1a]"},re=()=>{const Y="p-1.5 sm:p-2 rounded transition-colors";return d?Y+" bg-[var(--accent-blue)] text-white":Y+" hover:bg-[#252525] text-[var(--text-secondary)] hover:text-white"};return l.jsxs("header",{className:"flex-shrink-0 h-[44px] sm:h-[50px] flex items-center px-2 sm:px-4 border-b border-[var(--border-color)] bg-[var(--bg-secondary)] w-full overflow-x-auto scrollbar-hide",children:[l.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[l.jsx("span",{className:"text-white font-bold text-sm sm:text-lg tracking-tight hidden sm:inline",children:"TradeVision"}),l.jsx("span",{className:"text-white font-bold text-sm sm:text-lg tracking-tight sm:hidden",children:"TV"}),l.jsxs("button",{onClick:x,className:"flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-1 sm:py-1.5 rounded-md border border-[var(--border-color)] bg-[var(--bg-primary)] hover:border-gray-500 cursor-pointer transition-colors w-28 sm:w-44 group touch-active",children:[l.jsx(xr,{className:"h-3 w-3 sm:h-4 sm:w-4 text-[var(--text-secondary)]"}),l.jsx("span",{className:"text-white text-xs sm:text-sm font-medium flex-1 text-left truncate",children:u}),l.jsx("span",{className:"text-xs text-gray-600 group-hover:text-gray-400 hidden sm:inline",children:"/"})]})]}),l.jsx("div",{className:"flex items-center space-x-0.5 sm:space-x-1 mx-2 sm:mx-4 border-l border-[var(--border-color)] pl-2 sm:pl-4 flex-shrink-0",children:k.map(Y=>l.jsx("button",{onClick:()=>o(Y),className:H(Y),disabled:d,children:Y},Y))}),l.jsxs("div",{className:"flex items-center space-x-1 border-l border-r border-[var(--border-color)] px-1 sm:px-2 relative flex-shrink-0 hidden sm:flex",children:[l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>E(!B),className:Z(),title:"Chart Type",children:[f==="Candlestick"&&l.jsx(am,{className:"h-5 w-5"}),f==="Area"&&l.jsx(wa,{className:"h-5 w-5"}),f==="Line"&&l.jsx(wa,{className:"h-5 w-5"}),l.jsx(Im,{className:"h-3 w-3"})]}),B&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-[100]",onClick:()=>E(!1)}),l.jsxs("div",{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[280px] bg-[#0a0a0a] border border-[var(--border-color)] rounded-xl shadow-2xl z-[101] overflow-hidden",children:[l.jsxs("div",{className:"p-3 border-b border-[var(--border-color)] flex justify-between items-center",children:[l.jsx("h3",{className:"text-white text-sm font-semibold",children:"Chart Type"}),l.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-white transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"p-2",children:[l.jsxs("button",{onClick:()=>{m("Candlestick"),E(!1)},className:ne("Candlestick"),children:[l.jsx(am,{className:"h-5 w-5"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Candlestick"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Classic OHLC candles"})]})]}),l.jsxs("button",{onClick:()=>{m("Line"),E(!1)},className:ne("Line"),children:[l.jsx(wa,{className:"h-5 w-5"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Line"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Simple line chart"})]})]}),l.jsxs("button",{onClick:()=>{m("Area"),E(!1)},className:ne("Area"),children:[l.jsx(wa,{className:"h-5 w-5"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Area"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Filled area chart"})]})]})]})]})]})]}),l.jsx("button",{className:"p-2 rounded hover:bg-[#252525] text-[var(--text-secondary)] hover:text-white hidden sm:block",title:"Alerts",children:l.jsx(Gc,{className:"h-5 w-5"})})]}),l.jsx("div",{className:"flex-grow"}),l.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[l.jsx("button",{onClick:r,className:re(),title:"Replay Mode",children:l.jsx(ab,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),l.jsx("button",{className:"p-1.5 sm:p-2 rounded hover:bg-[#252525] text-[var(--text-secondary)] hover:text-white hidden sm:block",title:"Undo",children:l.jsx(p0,{className:"h-5 w-5"})}),l.jsx("button",{className:"p-1.5 sm:p-2 rounded hover:bg-[#252525] text-[var(--text-secondary)] hover:text-white hidden sm:block",title:"Redo",children:l.jsx(d0,{className:"h-5 w-5"})}),l.jsx("div",{className:"h-5 w-px bg-[var(--border-color)] mx-1 sm:mx-2 hidden sm:block"}),l.jsx("button",{className:"p-1.5 sm:p-2 rounded hover:bg-[#252525] text-[var(--text-secondary)] hover:text-white hidden md:block",title:"Keyboard Shortcuts",children:l.jsx(au,{className:"h-5 w-5"})}),l.jsx("button",{className:"p-1.5 sm:p-2 rounded hover:bg-[#252525] text-[var(--text-secondary)] hover:text-white hidden md:block",children:l.jsx(su,{className:"h-5 w-5"})}),l.jsx("button",{onClick:b,className:"p-1.5 sm:p-2 rounded hover:bg-[#252525] text-[var(--text-secondary)] hover:text-white hidden sm:block",title:"Screenshot (Ctrl+Shift+S)",children:l.jsx(jg,{className:"h-5 w-5"})}),l.jsx("button",{onClick:p,className:"px-2 sm:px-4 py-1 sm:py-1.5 text-black bg-white rounded-md text-[10px] sm:text-xs font-bold hover:bg-gray-200 transition-colors hidden sm:block",children:"Save"}),l.jsx("div",{className:"h-5 w-px bg-[var(--border-color)] mx-1 sm:mx-2 hidden sm:block"}),v&&j?l.jsxs("button",{onClick:N,className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 rounded-md border border-[var(--border-color)] hover:bg-[var(--bg-panel)] transition-colors",children:[l.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-gradient-to-br from-[var(--accent-blue)] to-purple-600 flex items-center justify-center text-white text-[10px] sm:text-xs font-bold",children:j.name.charAt(0).toUpperCase()}),l.jsx("span",{className:"text-xs sm:text-sm text-white hidden md:inline",children:j.name.split(" ")[0]})]}):l.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[l.jsxs("button",{onClick:C,className:"flex items-center gap-1 px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm text-[var(--text-secondary)] hover:text-white transition-colors",children:[l.jsx(i0,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Sign In"})]}),l.jsx("button",{onClick:w,className:"px-2 sm:px-4 py-1 sm:py-1.5 bg-[var(--accent-blue)] text-white rounded-md text-[10px] sm:text-xs font-bold hover:bg-neutral-700 transition-colors hidden sm:block",children:"Sign Up"})]})]})]})},Ev=({activeTool:u,onToolChange:n,onClearDrawings:o,onOpenTemplates:r,isHidden:d})=>{if(d)return null;const f=[{id:"cursor",icon:l.jsx(r0,{className:"h-5 w-5"}),label:"Cursor"},{id:"crosshair",icon:l.jsx(tu,{className:"h-5 w-5"}),label:"Crosshair"},{id:"trendline",icon:l.jsx(wa,{className:"h-5 w-5"}),label:"Trend Line"},{id:"horizontal",icon:l.jsx(lu,{className:"h-5 w-5"}),label:"Horizontal Line"},{id:"vertical",icon:l.jsx(f0,{className:"h-5 w-5"}),label:"Vertical Line"},{id:"rectangle",icon:l.jsx(h0,{className:"h-5 w-5"}),label:"Rectangle"},{id:"text",icon:l.jsx(m0,{className:"h-5 w-5"}),label:"Text"}];return l.jsxs("div",{className:"hidden sm:flex flex-shrink-0 w-[44px] sm:w-[50px] bg-[var(--bg-primary)] border-r border-[var(--border-color)] flex-col items-center py-1 sm:py-2 space-y-0.5 sm:space-y-1 overflow-y-auto z-10",children:[f.map((m,p)=>l.jsxs(ll.Fragment,{children:[p===2&&l.jsx("div",{className:"h-px w-6 sm:w-8 bg-[var(--border-color)] my-0.5 sm:my-1"}),l.jsx("button",{onClick:()=>n(m.id),className:`p-2 sm:p-3 rounded transition-colors touch-active ${u===m.id?"bg-[#2d2d2d] text-[var(--accent-blue)]":"text-[var(--text-secondary)] hover:bg-[#252525] hover:text-white active:bg-[#2d2d2d]"}`,title:m.label,children:l.jsx("span",{className:"[&>svg]:h-4 [&>svg]:w-4 sm:[&>svg]:h-5 sm:[&>svg]:w-5",children:m.icon})})]},m.id)),l.jsx("div",{className:"h-px w-6 sm:w-8 bg-[var(--border-color)] my-0.5 sm:my-1"}),l.jsx("button",{className:"p-2 sm:p-3 rounded text-[var(--text-secondary)] hover:bg-[#252525] hover:text-white active:bg-[#2d2d2d] touch-active",title:"Magnet Mode",children:l.jsx(gb,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),l.jsx("button",{className:"p-2 sm:p-3 rounded text-[var(--text-secondary)] hover:bg-[#252525] hover:text-white active:bg-[#2d2d2d] touch-active",title:"Lock",children:l.jsx(n0,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),l.jsx("button",{className:"p-2 sm:p-3 rounded text-[var(--text-secondary)] hover:bg-[#252525] hover:text-white active:bg-[#2d2d2d] touch-active",title:"Hide",children:l.jsx(s0,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),l.jsx("button",{onClick:o,className:"p-2 sm:p-3 rounded text-[var(--text-secondary)] hover:bg-[#252525] hover:text-red-400 active:bg-[#2d2d2d] touch-active",title:"Delete All",children:l.jsx(os,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),r&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"h-px w-6 sm:w-8 bg-[var(--border-color)] my-0.5 sm:my-1"}),l.jsx("button",{onClick:r,className:"p-2 sm:p-3 rounded text-[var(--text-secondary)] hover:bg-[#252525] hover:text-[var(--accent-blue)] active:bg-[#2d2d2d] touch-active",title:"Drawing Templates",children:l.jsx("svg",{className:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})})})]})]})},zv=({items:u,currentSymbol:n,onSelect:o,isHidden:r,onAddSymbol:d,onRemoveSymbol:f})=>{const[m,p]=y.useState(!1);return r?null:l.jsxs("aside",{className:"flex flex-1 bg-[var(--bg-primary)] border-l border-[var(--border-color)] flex-col overflow-hidden animate-fade-in",children:[l.jsxs("div",{className:"p-3 border-b border-[var(--border-color)] flex justify-between items-center",children:[l.jsx("h2",{className:"text-white font-semibold text-sm",children:"Watchlist"}),l.jsx("div",{className:"flex items-center gap-1",children:l.jsx("button",{onClick:()=>p(!m),className:`p-1.5 rounded transition-colors ${m?"bg-[var(--accent-blue)] text-white":"text-gray-400 hover:text-white hover:bg-[#252525]"}`,title:"Edit Watchlist",children:l.jsx(br,{className:"h-3.5 w-3.5"})})})]}),l.jsx("div",{className:"overflow-y-auto flex-grow",children:l.jsxs("table",{className:"w-full text-xs text-left",children:[l.jsx("thead",{className:"text-[var(--text-secondary)] sticky top-0 bg-[var(--bg-primary)] z-10",children:l.jsxs("tr",{className:"border-b border-[var(--border-color)]",children:[l.jsx("th",{className:"p-2 font-normal",children:"Symbol"}),l.jsx("th",{className:"p-2 font-normal text-right",children:"Price"}),l.jsx("th",{className:"p-2 font-normal text-right",children:m?"":"Change %"})]})}),l.jsx("tbody",{children:u.map(x=>l.jsx(Ov,{item:x,isSelected:x.symbol===n,onClick:()=>o(x.symbol),editMode:m,onRemove:f},x.symbol))})]})}),l.jsxs("div",{className:"p-2 border-t border-[var(--border-color)] bg-[var(--bg-secondary)]",children:[l.jsxs("div",{className:"flex justify-between text-xs",children:[l.jsx("span",{className:"text-gray-500",children:"Total Assets"}),l.jsx("span",{className:"text-white",children:u.length})]}),l.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[l.jsx("span",{className:"text-gray-500",children:"Gainers / Losers"}),l.jsxs("span",{children:[l.jsx("span",{className:"text-[var(--accent-bullish)]",children:u.filter(x=>x.change>0).length}),l.jsx("span",{className:"text-gray-500",children:" / "}),l.jsx("span",{className:"text-[var(--accent-bearish)]",children:u.filter(x=>x.change<0).length})]})]})]})]})},Ov=({item:u,isSelected:n,onClick:o,editMode:r,onRemove:d})=>{const[f,m]=y.useState(null),[p,x]=y.useState(u.price);return y.useEffect(()=>{u.price>p?m("green"):u.price<p&&m("red"),x(u.price);const b=setTimeout(()=>m(null),500);return()=>clearTimeout(b)},[u.price]),l.jsxs("tr",{onClick:o,className:`cursor-pointer transition-colors border-l-2 ${n?"bg-[var(--bg-panel)] border-[var(--accent-blue)]":"border-transparent hover:bg-[var(--bg-secondary)]"} ${f==="green"?"bg-neutral-800/30":f==="red"?"bg-red-900/30":""}`,children:[l.jsx("td",{className:"p-2 text-white font-medium",children:u.symbol}),l.jsx("td",{className:`p-2 text-right font-mono transition-colors ${f==="green"?"text-white":f==="red"?"text-red-400":"text-white"}`,children:u.price.toFixed(2)}),l.jsx("td",{className:"p-2 text-right",children:r?l.jsx("button",{onClick:b=>{b.stopPropagation(),d==null||d(u.symbol)},className:"p-1 text-gray-500 hover:text-red-400 hover:bg-red-900/20 rounded",children:l.jsx(wt,{className:"h-3 w-3"})}):l.jsxs("span",{className:`${u.change>=0?"text-[var(--accent-bullish)]":"text-[var(--accent-bearish)]"}`,children:[u.change>=0?"+":"",u.change.toFixed(2),"%"]})})]})},v0=new Map,y0=new Map,Bv=new Map,_v=new Map,Lv=new Map,gm=50,Uv=u=>{if(u.length===0)return"empty";const n=u[u.length-1],o=u[0];return`${u.length}-${o.time}-${n.time}-${n.close.toFixed(2)}`},Rv=u=>{u.size>gm&&Array.from(u.keys()).slice(0,u.size-gm).forEach(o=>u.delete(o))},w0=(u,n,o,r,d)=>{const f=Uv(o),m=u.get(n);if(m&&m.dataHash===f&&m.period===r)return m.data;const p=d();return u.set(n,{data:p,dataHash:f,period:r}),Rv(u),p},bm=(u,n)=>{if(u.length<n)return[];const o=`sma-${n}`;return w0(v0,o,u,n,()=>{const r=[];let d=0;for(let f=0;f<n;f++)d+=u[f].close;r.push({time:u[n-1].time,value:d/n});for(let f=n;f<u.length;f++)d=d-u[f-n].close+u[f].close,r.push({time:u[f].time,value:d/n});return r})},Vv=(u,n)=>{if(u.length===0)return[];const o=`ema-${n}`;return w0(y0,o,u,n,()=>{const r=2/(n+1),d=[];let f=u[0].close;for(let m=0;m<u.length;m++){const p=u[m].close;m===0?f=p:f=p*r+f*(1-r),m>=n-1&&d.push({time:u[m].time,value:f})}return d})},Hv=()=>{v0.clear(),y0.clear(),Bv.clear(),_v.clear(),Lv.clear()},pr=(u,n)=>Math.sqrt(Math.pow(n.x-u.x,2)+Math.pow(n.y-u.y,2)),qv=(u,n,o)=>{const r=Math.pow(pr(n,o),2);if(r===0)return pr(u,n);let d=((u.x-n.x)*(o.x-n.x)+(u.y-n.y)*(o.y-n.y))/r;d=Math.max(0,Math.min(1,d));const f={x:n.x+d*(o.x-n.x),y:n.y+d*(o.y-n.y)};return pr(u,f)},Yv=(u,n,o,r=6)=>qv(u,n,o)<r,_c=(u,n,o=8)=>pr(u,n)<o,Gv=(u,n,o)=>{const r=Math.min(n.x,o.x),d=Math.max(n.x,o.x),f=Math.min(n.y,o.y),m=Math.max(n.y,o.y);return u.x>=r&&u.x<=d&&u.y>=f&&u.y<=m},$v=({drawing:u,position:n,onUpdate:o,onDelete:r,onDuplicate:d,onClose:f})=>{const{style:m}=u,p=v=>{o(u.id,{style:{...m,...v}})},x=v=>v&&v.startsWith("#")?v:"#2962ff",b={left:Math.max(10,n.x),top:Math.max(10,n.y-180)};return l.jsxs("div",{className:"absolute z-50 bg-[#1a1a1a] border border-[#333333] rounded-md shadow-2xl p-0 flex flex-col w-[240px] animate-fade-in text-sm font-sans",style:b,onMouseDown:v=>v.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center px-3 py-2 border-b border-[#333333] bg-[#1f1f1f] rounded-t-md",children:[l.jsx("span",{className:"text-[11px] font-bold text-[#cccccc] uppercase tracking-wider",children:u.tool}),l.jsx("button",{onClick:f,className:"text-[#666666] hover:text-white transition-colors",children:l.jsx(wt,{className:"w-3 h-3"})})]}),l.jsxs("div",{className:"p-3 flex flex-col gap-3",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("label",{className:"text-[11px] text-[#888888] font-medium uppercase",children:"Stroke"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"relative w-8 h-8 rounded border border-[#444444] overflow-hidden cursor-pointer hover:border-white transition-colors",style:{backgroundColor:x(m.lineColor)},children:l.jsx("input",{type:"color",value:x(m.lineColor),onChange:v=>p({lineColor:v.target.value}),className:"absolute opacity-0 w-full h-full cursor-pointer",title:"Border Color"})}),l.jsxs("select",{value:m.lineWidth,onChange:v=>p({lineWidth:parseInt(v.target.value)}),className:"bg-[#2a2a2a] text-[#eeeeee] border border-[#444444] rounded h-8 px-2 text-xs outline-none focus:border-[#2962ff] flex-1 cursor-pointer",children:[l.jsx("option",{value:"1",children:"1px"}),l.jsx("option",{value:"2",children:"2px"}),l.jsx("option",{value:"3",children:"3px"}),l.jsx("option",{value:"4",children:"4px"})]}),l.jsx("button",{onClick:()=>p({lineStyle:m.lineStyle===0?1:0}),className:"bg-[#2a2a2a] border border-[#444444] rounded h-8 w-8 flex items-center justify-center hover:bg-[#3a3a3a] transition-colors",title:"Toggle Line Style",children:m.lineStyle===0?l.jsx(lu,{className:"w-4 h-4 text-white -rotate-45"}):l.jsx(Qg,{className:"w-4 h-4 text-white"})})]})]}),u.tool==="rectangle"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"h-px bg-[#333333] w-full my-1"}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("label",{className:"text-[11px] text-[#888888] font-medium uppercase",children:"Background"}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[l.jsx("div",{className:`w-3 h-3 border rounded-sm flex items-center justify-center transition-colors ${m.fillEnabled!==!1?"bg-[#2962ff] border-[#2962ff]":"border-[#666666] group-hover:border-[#888888]"}`,children:m.fillEnabled!==!1&&l.jsx(Bl,{className:"w-2.5 h-2.5 text-white"})}),l.jsx("input",{type:"checkbox",checked:m.fillEnabled!==!1,onChange:()=>p({fillEnabled:!m.fillEnabled}),className:"hidden"}),l.jsx("span",{className:`text-[10px] ${m.fillEnabled!==!1?"text-white":"text-[#666666]"}`,children:"Enable"})]})]}),l.jsx("div",{className:`flex flex-col gap-2 transition-opacity ${m.fillEnabled===!1?"opacity-40 pointer-events-none":"opacity-100"}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"relative w-8 h-8 rounded border border-[#444444] overflow-hidden cursor-pointer hover:border-white transition-colors",style:{backgroundColor:x(m.fillColor)},children:l.jsx("input",{type:"color",value:x(m.fillColor),onChange:v=>p({fillColor:v.target.value}),className:"absolute opacity-0 w-full h-full cursor-pointer",title:"Fill Color"})}),l.jsxs("div",{className:"flex-1 flex flex-col justify-center gap-1",children:[l.jsxs("div",{className:"flex justify-between text-[10px] text-[#888888]",children:[l.jsx("span",{children:"Opacity"}),l.jsxs("span",{children:[Math.round((m.fillOpacity??.2)*100),"%"]})]}),l.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.01",value:m.fillOpacity??.2,onChange:v=>p({fillOpacity:parseFloat(v.target.value)}),className:"w-full h-1 bg-[#2a2a2a] rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-[#cccccc] hover:[&::-webkit-slider-thumb]:bg-white"})]})]})})]})]}),l.jsx("div",{className:"h-px bg-[#333333] w-full my-1"}),l.jsxs("div",{className:"flex justify-between items-center pt-1",children:[l.jsxs("button",{onClick:()=>o(u.id,{locked:!u.locked}),className:`flex items-center gap-1.5 px-2 py-1.5 rounded text-xs transition-colors ${u.locked?"text-[#2962ff] bg-[#2962ff]/10":"text-[#888888] hover:text-white hover:bg-[#2a2a2a]"}`,children:[u.locked?l.jsx(Xc,{className:"w-3 h-3"}):l.jsx(n0,{className:"w-3 h-3"}),l.jsx("span",{children:u.locked?"Locked":"Lock"})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>d(u),className:"p-1.5 text-[#888888] hover:text-white hover:bg-[#2a2a2a] rounded transition-colors",title:"Duplicate",children:l.jsx(l0,{className:"w-3.5 h-3.5"})}),l.jsx("button",{onClick:()=>r(u.id),className:"p-1.5 text-[#888888] hover:text-[#ef5350] hover:bg-[#2a2a2a] rounded transition-colors",title:"Delete",children:l.jsx(os,{className:"w-3.5 h-3.5"})})]})]})]})]})},Xv=({data:u,symbol:n,activeTool:o,onAddDrawing:r,onUpdateDrawing:d,onDeleteDrawing:f,drawings:m,purchaseMarkers:p,chartType:x,timeLeft:b,alerts:v,onCreateAlert:j,indicators:C,entryMarker:w,chartIndicatorSettings:N,onToggleIndicator:k,onRemoveIndicator:B,onChartIndicatorToggle:E,onUpdateChartIndicatorSettings:H,onBuy:Z,onSell:ne,isPaperMode:re=!0,currentPrice:Y=0})=>{var Ul,rl,za,cs,Rl,Oa,us,$t,pt,Xt,jt,Vl,ds,Hl,Ba,_a,La,Qt,Ua,pa,fs,ol;const W=y.useRef(null),F=y.useRef(null),G=y.useRef(null),z=y.useRef(null),D=y.useRef(null),te=y.useRef([]),[se,I]=y.useState(null),[pe,U]=y.useState(null),[ae,ce]=y.useState(!1),[de,we]=y.useState(!1),De=y.useRef(n),[je,Ne]=y.useState(!1),[be,at]=y.useState(null),[ee,xe]=y.useState(null),[Se,Qe]=y.useState(null),[ye,ta]=y.useState(null),aa=y.useCallback(()=>{const O=localStorage.getItem("tv_drawing_defaults");if(O)try{return JSON.parse(O)}catch{}return{lineColor:"#2962ff",lineWidth:2,lineStyle:0,fillColor:"#2962ff",fillOpacity:.2,fillEnabled:!0,showLabel:!1,fontSize:12}},[]),Ma=y.useCallback(O=>{localStorage.setItem("tv_drawing_defaults",JSON.stringify(O))},[]),At=(O,A)=>{if(!G.current||!z.current)return null;const X=G.current.timeScale().coordinateToTime(O),ie=z.current.coordinateToPrice(A);if(X===null&&u.length>0){const J=G.current.timeScale().getVisibleLogicalRange();if(J){const le=G.current.timeScale().width(),he=(J.to-J.from)/le,qe=J.from+O*he,Te=u.length>1?(u[u.length-1].time-u[0].time)/(u.length-1):3600,lt=u[0].time+qe*Te;return ie!==null?{time:Math.round(lt),price:ie}:null}}return X!==null&&ie!==null?{time:X,price:ie}:null},Dt=(O,A)=>{if(!G.current||!z.current)return null;let X=G.current.timeScale().timeToCoordinate(O);const ie=z.current.priceToCoordinate(A);if(X===null&&u.length>0){const J=G.current.timeScale().getVisibleLogicalRange();if(J){const le=G.current.timeScale().width(),he=u.length>1?(u[u.length-1].time-u[0].time)/(u.length-1):3600,qe=(O-u[0].time)/he,Te=le/(J.to-J.from);X=(qe-J.from)*Te}}return X!==null&&ie!==null?{x:X,y:ie}:null},Ze=(O,A)=>{if(!O)return`rgba(0,0,0,${A})`;if(O.startsWith("rgba"))return O;let X=0,ie=0,J=0;return O.length===4?(X=parseInt(O[1]+O[1],16),ie=parseInt(O[2]+O[2],16),J=parseInt(O[3]+O[3],16)):O.length===7&&(X=parseInt(O.substring(1,3),16),ie=parseInt(O.substring(3,5),16),J=parseInt(O.substring(5,7),16)),`rgba(${X},${ie},${J},${A})`};y.useEffect(()=>{if(!W.current)return;const O=Qx(W.current,{layout:{background:{type:Kx.Solid,color:"#0a0a0a"},textColor:"#a0a0a0",attributionLogo:!1},grid:{vertLines:{color:"#1a1a1a"},horzLines:{color:"#1a1a1a"}},width:W.current.clientWidth,height:W.current.clientHeight,timeScale:{borderColor:"#2a2a2a",timeVisible:!0,rightOffset:50,secondsVisible:!1,shiftVisibleRangeOnNewBar:!1,allowShiftVisibleRangeOnWhitespaceReplacement:!0},rightPriceScale:{borderColor:"#2a2a2a",autoScale:!0},crosshair:{mode:Zx.Normal,vertLine:{color:"rgba(255, 255, 255, 0.4)",width:1,style:2,labelBackgroundColor:"#2962ff"},horzLine:{color:"rgba(255, 255, 255, 0.4)",width:1,style:2,labelBackgroundColor:"#2962ff"}},handleScale:{axisPressedMouseMove:{time:!0,price:!0},mouseWheel:!0,pinch:!0},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},kineticScroll:{touch:!0,mouse:!0}});G.current=O,O.subscribeCrosshairMove(X=>{if(!X.point||X.point.x<0||X.point.y<0){U(null);return}const ie=X.time;if(ie&&z.current){const J=z.current.coordinateToPrice(X.point.y);J!==null&&U({x:X.point.x,y:X.point.y,price:J,time:ie})}});const A=new ResizeObserver(X=>{if(X.length===0||!X[0].contentRect)return;const{width:ie,height:J}=X[0].contentRect;G.current&&G.current.resize(ie,J),F.current&&(F.current.width=ie,F.current.height=J,requestAnimationFrame(Da))});return A.observe(W.current),O.timeScale().subscribeVisibleTimeRangeChange(()=>requestAnimationFrame(Da)),()=>{A.disconnect(),O.remove()}},[]),y.useEffect(()=>{if(!G.current)return;try{if(z.current&&G.current){try{G.current.removeSeries(z.current)}catch{}z.current=null}}catch{}let O;if(x==="Area"?O=G.current.addSeries(Jx,{lineColor:"#2962ff",topColor:"rgba(41, 98, 255, 0.3)",bottomColor:"rgba(41, 98, 255, 0)"}):x==="Line"?O=G.current.addSeries(Zs,{color:"#2962ff",lineWidth:2}):O=G.current.addSeries(Px,{upColor:"#ffffff",downColor:"#666666",borderUpColor:"#ffffff",borderDownColor:"#666666",wickUpColor:"#ffffff",wickDownColor:"#666666"}),z.current=O,G.current.subscribeCrosshairMove(A=>{try{if(A.time&&A.seriesData&&A.seriesData.get(O)){const X=A.seriesData.get(O);if(!X)return;const ie=X.open??X.value??0,J=X.close??X.value??0,le=X.high??X.value??0,he=X.low??X.value??0,qe=ie!==0?(J-ie)/ie*100:0;I({o:ie.toFixed(2),h:le.toFixed(2),l:he.toFixed(2),c:J.toFixed(2),change:qe})}}catch{}}),u&&u.length>0)try{const A=x==="Candlestick"?u.filter(X=>X.time!=null&&X.open!=null).map(X=>({...X,time:X.time})):u.filter(X=>X.time!=null&&X.close!=null).map(X=>({time:X.time,value:X.close}));A.length>0&&O.setData(A)}catch(A){console.warn("Chart setData error:",A)}},[x]),y.useEffect(()=>{if(z.current&&u&&u.length>0)try{const O=De.current!==n,A=x==="Candlestick"?u.filter(X=>X.time!=null&&X.open!=null).map(X=>({...X,time:X.time})):u.filter(X=>X.time!=null&&X.close!=null).map(X=>({time:X.time,value:X.close}));A.length>0&&(z.current.setData(A),O&&G.current&&(De.current=n,G.current.priceScale("right").applyOptions({autoScale:!0}),setTimeout(()=>{if(G.current){G.current.timeScale().fitContent();const X=Math.min(100,A.length),ie=A.length-X,J=A.length+10;G.current.timeScale().setVisibleLogicalRange({from:ie,to:J})}},100)))}catch(O){console.warn("Chart update error:",O)}},[u,x,n]),y.useEffect(()=>{var O;if(G.current){if(D.current){try{G.current.removeSeries(D.current)}catch{}D.current=null}if((O=N==null?void 0:N.volume)!=null&&O.enabled&&u&&u.length>0){const A=G.current.addSeries(Fx,{priceFormat:{type:"volume"},priceScaleId:"volume"});G.current.priceScale("volume").applyOptions({scaleMargins:{top:.8,bottom:0}});const X=u.map(ie=>({time:ie.time,value:ie.volume||(ie.high-ie.low)*1e6,color:ie.close>=ie.open?N.volume.upColor+"80":N.volume.downColor+"80"}));A.setData(X),D.current=A}}},[(Ul=N==null?void 0:N.volume)==null?void 0:Ul.enabled,u]),y.useEffect(()=>{var O,A;if(!(!G.current||!u||u.length===0)){if(te.current.forEach(X=>G.current.removeSeries(X)),te.current=[],C.forEach(X=>{if(!X.active)return;const ie=X.type==="SMA"?bm(u,X.period):X.type==="EMA"?Vv(u,X.period):bm(u,14);if(ie.length>0){const J=G.current.addSeries(Zs,{color:X.color,lineWidth:1,crosshairMarkerVisible:!1,lastValueVisible:!1,priceLineVisible:!1});J.setData(ie.map(le=>({time:le.time,value:le.value}))),te.current.push(J)}}),(O=N==null?void 0:N.vwap)!=null&&O.enabled){let X=0,ie=0;const J=[];if(u.forEach(le=>{const he=(le.high+le.low+le.close)/3,qe=le.high-le.low;X+=he*qe,ie+=qe;const Te=ie>0?X/ie:he;J.push({time:le.time,value:Te})}),J.length>0){const le=G.current.addSeries(Zs,{color:N.vwap.color,lineWidth:2,crosshairMarkerVisible:!1,lastValueVisible:!0,priceLineVisible:!1});le.setData(J),te.current.push(le)}}if((A=N==null?void 0:N.bollinger)!=null&&A.enabled){const X=N.bollinger.period,ie=N.bollinger.stdDev,J=N.bollinger.color,le=[],he=[],qe=[];for(let Te=X-1;Te<u.length;Te++){const Ye=u.slice(Te-X+1,Te+1).map(Bt=>Bt.close),Ce=Ye.reduce((Bt,ja)=>Bt+ja,0)/X,Pe=Ye.reduce((Bt,ja)=>Bt+Math.pow(ja-Ce,2),0)/X,ot=Math.sqrt(Pe);le.push({time:u[Te].time,value:Ce}),he.push({time:u[Te].time,value:Ce+ot*ie}),qe.push({time:u[Te].time,value:Ce-ot*ie})}if(le.length>0){const Te=G.current.addSeries(Zs,{color:J,lineWidth:1,crosshairMarkerVisible:!1,lastValueVisible:!1,priceLineVisible:!1});Te.setData(le),te.current.push(Te)}if(he.length>0){const Te=G.current.addSeries(Zs,{color:J,lineWidth:1,lineStyle:2,crosshairMarkerVisible:!1,lastValueVisible:!1,priceLineVisible:!1});Te.setData(he),te.current.push(Te)}if(qe.length>0){const Te=G.current.addSeries(Zs,{color:J,lineWidth:1,lineStyle:2,crosshairMarkerVisible:!1,lastValueVisible:!1,priceLineVisible:!1});Te.setData(qe),te.current.push(Te)}}}},[C,u,N]);const Ll=(O,A)=>{if(ee){const X=m.find(ie=>ie.id===ee);if(X){const ie=Dt(X.start.time,X.start.price),J=Dt(X.end.time,X.end.price);if(ie&&_c({x:O,y:A},ie))return{id:X.id,part:"start"};if(J&&_c({x:O,y:A},J))return{id:X.id,part:"end"}}}for(let X=m.length-1;X>=0;X--){const ie=m[X],J=Dt(ie.start.time,ie.start.price),le=Dt(ie.end.time,ie.end.price);if(!J||!le)continue;let he=!1;if(ie.tool==="trendline"||ie.tool==="arrow"?he=Yv({x:O,y:A},J,le):ie.tool==="rectangle"||ie.tool==="fibonacci"?he=Gv({x:O,y:A},J,le):ie.tool==="horizontal"?he=Math.abs(A-J.y)<6:ie.tool==="vertical"?he=Math.abs(O-J.x)<6:ie.tool==="text"&&(he=_c({x:O,y:A},J,20)),he)return{id:ie.id,part:"body"}}return null},ma=O=>{var X;const A=(X=W.current)==null?void 0:X.getBoundingClientRect();if(!A)return null;if("touches"in O){if(O.touches.length===0)return null;const ie=O.touches[0];return{x:ie.clientX-A.left,y:ie.clientY-A.top}}else return{x:O.clientX-A.left,y:O.clientY-A.top}},Aa=O=>{const A=ma(O);if(!A)return;const{x:X,y:ie}=A;if(o==="alert"&&j&&z.current){const le=z.current.coordinateToPrice(ie);le&&j(le),O.stopPropagation();return}if(o==="cursor"){const le=Ll(X,ie);if(le){O.stopPropagation();const he=m.find(qe=>qe.id===le.id);if(he.locked)return;xe(le.id),at({id:le.id,part:le.part,startMouse:{x:X,y:ie},initialStart:{...he.start},initialEnd:{...he.end}}),G.current.applyOptions({handleScroll:!1,handleScale:!1})}else xe(null);return}O.stopPropagation();const J=At(X,ie);J&&(Ne(!0),ta({start:{x:X,y:ie},end:{x:X,y:ie}}),at({id:"temp",part:"end",startMouse:{x:X,y:ie},initialStart:J,initialEnd:J}))},Ta=O=>{const A=ma(O);if(!A)return;const{x:X,y:ie}=A;if(o==="cursor"&&!be){const J=Ll(X,ie);Qe(J?J.id:null),W.current.style.cursor=J?J.part==="body"?"move":"crosshair":"default"}else o!=="cursor"&&(W.current.style.cursor="crosshair");if(be){O.stopPropagation();const J=At(X,ie);if(!J)return;if(je)ta(le=>le?{...le,end:{x:X,y:ie}}:null);else{const le=m.find(he=>he.id===be.id);if(!le)return;if(be.part==="body"){const he=At(be.startMouse.x,be.startMouse.y),qe=J.time-he.time,Te=J.price-he.price;d(le.id,{start:{time:be.initialStart.time+qe,price:be.initialStart.price+Te},end:{time:be.initialEnd.time+qe,price:be.initialEnd.price+Te}})}else d(le.id,{[be.part]:J})}}},la=O=>{if(be&&je){const A=ma(O),X=be.initialStart,ie=A?At(A.x,A.y):null;if(ie){const J=aa(),le={id:Date.now().toString(),tool:o,start:X,end:ie,style:{...J,showLabel:!1,fontSize:12}};r(le),xe(le.id)}}Ne(!1),at(null),ta(null)},Da=y.useCallback(()=>{var ie;const O=F.current,A=O==null?void 0:O.getContext("2d");if(!O||!A||!z.current)return;A.clearRect(0,0,O.width,O.height),v==null||v.forEach(J=>{if(!J.isActive)return;const le=z.current.priceToCoordinate(J.targetPrice);le&&(A.strokeStyle="#ef5350",A.lineWidth=1,A.setLineDash([5,5]),A.beginPath(),A.moveTo(0,le),A.lineTo(O.width,le),A.stroke(),A.fillStyle="#ef5350",A.fillText("",O.width-20,le-5))});const X=[...m];if(je&&ye&&(be!=null&&be.initialStart)&&(be!=null&&be.initialEnd)&&X.push({id:"temp",tool:o,start:At(ye.start.x,ye.start.y),end:At(ye.end.x,ye.end.y),style:{lineColor:"#2962ff",lineWidth:2,lineStyle:0,fillColor:"#2962ff",fillOpacity:.2,fillEnabled:!0,showLabel:!1,fontSize:12}}),X.forEach(J=>{const le=Dt(J.start.time,J.start.price),he=Dt(J.end.time,J.end.price);if(!le||!he)return;const qe=J.id===ee,Te=J.id===Se,lt=J.style||{lineColor:"#fff",lineWidth:1,lineStyle:0,fillColor:"#fff",fillOpacity:.1,fillEnabled:!0,fontSize:12};if(A.save(),A.strokeStyle=lt.lineColor,A.lineWidth=lt.lineWidth,A.setLineDash(lt.lineStyle===1?[5,5]:lt.lineStyle===2?[2,2]:[]),(qe||Te)&&(A.shadowColor=lt.lineColor,A.shadowBlur=10),A.beginPath(),J.tool==="trendline"||J.tool==="arrow"){if(A.moveTo(le.x,le.y),A.lineTo(he.x,he.y),A.stroke(),J.tool==="arrow"){const Ye=Math.atan2(he.y-le.y,he.x-le.x);A.beginPath(),A.moveTo(he.x,he.y),A.lineTo(he.x-10*Math.cos(Ye-Math.PI/6),he.y-10*Math.sin(Ye-Math.PI/6)),A.lineTo(he.x-10*Math.cos(Ye+Math.PI/6),he.y-10*Math.sin(Ye+Math.PI/6)),A.fillStyle=lt.lineColor,A.fill()}}else if(J.tool==="rectangle"){const Ye=he.x-le.x,Ce=he.y-le.y;lt.fillEnabled!==!1&&(A.fillStyle=Ze(lt.fillColor,lt.fillOpacity??.2),A.fillRect(le.x,le.y,Ye,Ce)),A.strokeRect(le.x,le.y,Ye,Ce)}else if(J.tool==="horizontal")A.moveTo(0,le.y),A.lineTo(O.width,le.y),A.stroke();else if(J.tool==="vertical")A.moveTo(le.x,0),A.lineTo(le.x,O.height),A.stroke();else if(J.tool==="fibonacci"){const Ye=[0,.236,.382,.5,.618,.786,1],Ce=he.y-le.y;Ye.forEach(Pe=>{const ot=le.y+Ce*Pe;A.beginPath(),A.moveTo(le.x,ot),A.lineTo(he.x,ot),A.stroke(),A.fillStyle=lt.lineColor,A.font="10px sans-serif",A.fillText(Pe.toString(),le.x,ot-2)})}else J.tool==="text"&&(A.font=`${lt.fontSize||16}px Inter`,A.fillStyle=lt.lineColor,A.fillText(J.text||"Text",le.x,le.y));if(A.restore(),qe){const Ye=(Ce,Pe)=>{A.fillStyle="white",A.strokeStyle="#2962ff",A.lineWidth=2,A.beginPath(),A.arc(Ce,Pe,5,0,Math.PI*2),A.fill(),A.stroke()};Ye(le.x,le.y),Ye(he.x,he.y)}}),w&&w.symbol===n&&z.current){const J=z.current.priceToCoordinate(w.price);if(J!==null){A.save(),A.setLineDash([5,5]),A.strokeStyle="#00ff88",A.lineWidth=2,A.beginPath(),A.moveTo(0,J),A.lineTo(O.width,J),A.stroke(),A.setLineDash([]),A.fillStyle="#00ff88",A.font="bold 11px Inter";const le=`Entry: $${w.price.toLocaleString()}`,he=A.measureText(le).width;A.fillStyle="rgba(0, 255, 136, 0.2)",A.fillRect(10,J-20,he+16,18),A.strokeStyle="#00ff88",A.lineWidth=1,A.strokeRect(10,J-20,he+16,18),A.fillStyle="#00ff88",A.fillText(le,18,J-7),A.beginPath(),A.moveTo(O.width-30,J),A.lineTo(O.width-20,J-8),A.lineTo(O.width-20,J+8),A.closePath(),A.fill(),A.restore()}}if((ie=N==null?void 0:N.volumeProfile)!=null&&ie.enabled&&u.length>0&&z.current){const J=N.volumeProfile,le=J.rowCount||24,he=u.map(Ge=>[Ge.high,Ge.low]).flat(),qe=Math.min(...he),lt=Math.max(...he)-qe,Ye=lt/le,Ce=[];for(let Ge=0;Ge<le;Ge++){const ct=qe+Ye*Ge+Ye/2;Ce.push({price:ct,volume:0})}u.forEach(Ge=>{const ct=Ge.high-Ge.low,Be=Math.floor((Ge.close-qe)/Ye);Be>=0&&Be<le&&(Ce[Be].volume+=ct)});const Pe=Math.max(...Ce.map(Ge=>Ge.volume));let ot=0,Bt=0;Ce.forEach((Ge,ct)=>{Ge.volume>Bt&&(Bt=Ge.volume,ot=ct)});const Ws=Ce.reduce((Ge,ct)=>Ge+ct.volume,0)*(J.valueAreaPercent/100);let ql=Ce[ot].volume,Tt=ot,Zt=ot;for(;ql<Ws&&(Tt<le-1||Zt>0);){const Ge=Tt<le-1?Ce[Tt+1].volume:0,ct=Zt>0?Ce[Zt-1].volume:0;Ge>=ct&&Tt<le-1?(Tt++,ql+=Ce[Tt].volume):Zt>0&&(Zt--,ql+=Ce[Zt].volume)}const sa=80,xa=O.width-10;A.save(),Ce.forEach((Ge,ct)=>{const Be=z.current.priceToCoordinate(Ge.price);if(Be===null)return;const Ee=Ge.volume/Pe*sa,tt=Math.max(2,Ye*.8*(O.height/lt)),ga=xa-Ee;ct===ot?A.fillStyle=Ze(J.pocColor,.8):ct>=Zt&&ct<=Tt?A.fillStyle=Ze(J.valueAreaColor,.5):A.fillStyle=Ze(J.volumeColor,.3),A.fillRect(ga,Be-tt/2,Ee,tt),ct===ot&&(A.strokeStyle=J.pocColor,A.lineWidth=1,A.setLineDash([3,3]),A.beginPath(),A.moveTo(0,Be),A.lineTo(xa-Ee-5,Be),A.stroke(),A.setLineDash([]),A.font="9px Inter",A.fillStyle=J.pocColor,A.fillText("POC",5,Be+3))}),A.restore()}},[m,ee,Se,je,ye,v,w,n,N,u]);y.useEffect(()=>{let O;const A=()=>{Da(),O=requestAnimationFrame(A)};return A(),()=>cancelAnimationFrame(O)},[Da]),y.useEffect(()=>{const O=A=>{(A.key==="Delete"||A.key==="Backspace")&&ee&&(f(ee),xe(null))};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[ee]);const Ea=m.find(O=>O.id===ee),ft=Ea?Dt(Ea.end.time,Ea.end.price):null,il=y.useCallback((O,A)=>{d(O,A),A.style&&Ma(A.style)},[d,Ma]);return l.jsxs("div",{className:"relative w-full h-full group",onContextMenu:O=>O.preventDefault(),children:[Ea&&ft&&l.jsx($v,{drawing:Ea,position:{x:ft.x+20,y:ft.y-40},onUpdate:il,onDelete:O=>{f(O),xe(null)},onDuplicate:O=>r({...O,id:Date.now().toString(),start:{...O.start,time:O.start.time+3600},end:{...O.end,time:O.end.time+3600}}),onClose:()=>xe(null)}),l.jsxs("div",{className:"absolute top-2 sm:top-4 left-2 sm:left-4 z-20 pointer-events-none text-xs font-mono",children:[l.jsxs("h1",{className:"text-sm sm:text-base font-bold text-white mb-0.5 sm:mb-1 tracking-wider",children:[n," ",l.jsx("span",{className:"text-gray-500 hidden sm:inline",children:""})," ",l.jsx("span",{className:"hidden sm:inline",children:x})," ",l.jsx("span",{className:"text-blue-400",children:u.length>0&&((rl=u[u.length-1])==null?void 0:rl.close)!=null?u[u.length-1].close.toFixed(2):""})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-6 mt-0.5 sm:mt-1",children:[se&&l.jsxs("div",{className:"flex space-x-2 sm:space-x-3 text-[10px] sm:text-[11px]",children:[l.jsxs("span",{className:"text-gray-500",children:["O ",l.jsx("span",{className:"text-white",children:se.o})]}),l.jsxs("span",{className:"text-gray-500",children:["H ",l.jsx("span",{className:"text-white",children:se.h})]}),l.jsxs("span",{className:"text-gray-500",children:["L ",l.jsx("span",{className:"text-white",children:se.l})]}),l.jsxs("span",{className:"text-gray-500",children:["C ",l.jsx("span",{className:"text-white",children:se.c})]}),l.jsxs("span",{className:`${se.change>=0?"text-green-400":"text-red-400"}`,children:[se.change>=0?"+":"",se.change.toFixed(2),"%"]})]}),l.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-[10px] sm:text-xs bg-[#111] px-1.5 sm:px-2 py-0.5 rounded border border-[#333] w-fit",children:[l.jsx("span",{className:"text-gray-500 uppercase text-[8px] sm:text-[10px]",children:"Close"}),l.jsx("span",{className:`font-mono ${b==="00:00"?"text-orange-400":"text-gray-300"}`,children:b})]})]}),l.jsxs("div",{className:"flex flex-col gap-1 mt-2 pointer-events-auto",children:[Z&&ne&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("button",{onClick:ne,className:"flex items-center gap-1.5 px-2.5 py-1 bg-red-600 hover:bg-red-500 text-white text-[11px] font-medium rounded transition-colors",children:[l.jsx("span",{children:"Sell"}),l.jsx("span",{className:"font-mono text-[10px] opacity-90",children:Y.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),l.jsxs("button",{onClick:Z,className:"flex items-center gap-1.5 px-2.5 py-1 bg-green-600 hover:bg-green-500 text-white text-[11px] font-medium rounded transition-colors",children:[l.jsx("span",{children:"Buy"}),l.jsx("span",{className:"font-mono text-[10px] opacity-90",children:Y.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>we(!de),className:"flex items-center gap-1.5 px-2 py-1 bg-[#111]/90 border border-[#333] rounded text-[11px] text-gray-300 hover:text-white hover:border-gray-500 transition-all",children:[l.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),l.jsx("span",{children:"Indicators"}),l.jsxs("span",{className:"text-gray-500 text-[10px]",children:["(",C.filter(O=>O.active).length+((za=N==null?void 0:N.volumeProfile)!=null&&za.enabled?1:0)+((cs=N==null?void 0:N.vwap)!=null&&cs.enabled?1:0)+((Rl=N==null?void 0:N.bollinger)!=null&&Rl.enabled?1:0)+((Oa=N==null?void 0:N.volume)!=null&&Oa.enabled?1:0),")"]}),l.jsx("svg",{className:`w-3 h-3 transition-transform ${de?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),de&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>we(!1)}),l.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-[#0a0a0a] border border-[var(--border-color)] rounded-lg shadow-xl z-50 overflow-hidden",children:[l.jsxs("div",{className:"p-2 border-b border-[var(--border-color)] flex justify-between items-center",children:[l.jsx("span",{className:"text-xs text-gray-400",children:"Active Indicators"}),l.jsxs("button",{onClick:()=>{we(!1),ce(!0)},className:"text-[10px] text-[var(--accent-blue)] hover:text-blue-400 flex items-center gap-1",children:[l.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})]}),l.jsxs("div",{className:"max-h-[300px] overflow-y-auto",children:[C.filter(O=>O.active).map(O=>l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-[#1a1a1a] border-b border-[#1a1a1a]",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:O.color}}),l.jsxs("span",{className:"text-xs text-white",children:[O.type,"(",O.period,")"]})]}),k&&l.jsx("button",{onClick:()=>k(O.id),className:"text-gray-500 hover:text-red-400 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},O.id)),((us=N==null?void 0:N.volumeProfile)==null?void 0:us.enabled)&&l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-[#1a1a1a] border-b border-[#1a1a1a]",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded bg-blue-500"}),l.jsx("span",{className:"text-xs text-white",children:"Volume Profile"})]}),E&&l.jsx("button",{onClick:()=>E("volumeProfile",!1),className:"text-gray-500 hover:text-red-400 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(($t=N==null?void 0:N.vwap)==null?void 0:$t.enabled)&&l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-[#1a1a1a] border-b border-[#1a1a1a]",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:N.vwap.color}}),l.jsx("span",{className:"text-xs text-white",children:"VWAP"})]}),E&&l.jsx("button",{onClick:()=>E("vwap",!1),className:"text-gray-500 hover:text-red-400 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),((pt=N==null?void 0:N.bollinger)==null?void 0:pt.enabled)&&l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-[#1a1a1a] border-b border-[#1a1a1a]",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:N.bollinger.color}}),l.jsxs("span",{className:"text-xs text-white",children:["Bollinger(",N.bollinger.period,")"]})]}),E&&l.jsx("button",{onClick:()=>E("bollinger",!1),className:"text-gray-500 hover:text-red-400 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),((Xt=N==null?void 0:N.volume)==null?void 0:Xt.enabled)&&l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-[#1a1a1a]",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded bg-amber-500"}),l.jsx("span",{className:"text-xs text-white",children:"Volume"})]}),E&&l.jsx("button",{onClick:()=>E("volume",!1),className:"text-gray-500 hover:text-red-400 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),C.filter(O=>O.active).length===0&&!((jt=N==null?void 0:N.volumeProfile)!=null&&jt.enabled)&&!((Vl=N==null?void 0:N.vwap)!=null&&Vl.enabled)&&!((ds=N==null?void 0:N.bollinger)!=null&&ds.enabled)&&!((Hl=N==null?void 0:N.volume)!=null&&Hl.enabled)&&l.jsx("div",{className:"px-3 py-4 text-center text-xs text-gray-500",children:"No active indicators"})]})]})]})]})]})]}),l.jsx("div",{ref:W,className:`w-full h-full ${o!=="cursor"?"touch-none":"touch-auto"}`,onMouseDown:O=>{(o!=="cursor"||m.length>0)&&Aa(O)},onMouseMove:Ta,onMouseUp:la,onTouchStart:O=>{var A;if(o!=="cursor")O.preventDefault(),Aa(O);else if(m.length>0){const X=O.touches[0],ie=(A=W.current)==null?void 0:A.getBoundingClientRect();if(ie){const J=X.clientX-ie.left,le=X.clientY-ie.top;Ll(J,le)&&(O.preventDefault(),Aa(O))}}},onTouchMove:O=>{(be||je)&&(O.preventDefault(),Ta(O))},onTouchEnd:O=>{var A;if(be||je){O.preventDefault();const X=(A=O.changedTouches)==null?void 0:A[0];if(X&&W.current){W.current.getBoundingClientRect();const ie={clientX:X.clientX,clientY:X.clientY,touches:[X],stopPropagation:()=>{}};la(ie)}else la(O)}}}),l.jsx("canvas",{ref:F,className:"absolute top-0 left-0 z-10 w-full h-full pointer-events-none"}),ae&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/60 z-[200]",onClick:()=>ce(!1)}),l.jsxs("div",{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[90%] max-w-[450px] max-h-[80vh] bg-[#0a0a0a] border border-[var(--border-color)] rounded-xl shadow-2xl z-[201] overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b border-[var(--border-color)] flex justify-between items-center",children:[l.jsxs("h2",{className:"text-white font-semibold flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5 text-[var(--accent-blue)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Indicators"]}),l.jsx("button",{onClick:()=>ce(!1),className:"text-gray-500 hover:text-white transition-colors p-1",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"p-4 overflow-y-auto flex-1 space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs uppercase text-gray-500 font-semibold mb-2",children:"Moving Averages"}),l.jsx("div",{className:"space-y-2",children:C.map(O=>l.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${O.active?"bg-[var(--accent-blue)]/10 border-[var(--accent-blue)]/50":"bg-[#111] border-[#222] hover:border-[#333]"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:`linear-gradient(135deg, ${O.color}, ${O.color}88)`},children:l.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-white text-sm font-medium",children:[O.type,"(",O.period,")"]}),l.jsx("p",{className:"text-[10px] text-gray-500",children:O.type==="SMA"?"Simple Moving Average":O.type==="EMA"?"Exponential Moving Average":"Relative Strength Index"})]})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:O.active,onChange:()=>k==null?void 0:k(O.id),className:"sr-only peer"}),l.jsx("div",{className:"w-10 h-5 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-[var(--accent-blue)]"})]})]},O.id))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs uppercase text-gray-500 font-semibold mb-2",children:"Chart Overlays"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${(Ba=N==null?void 0:N.volumeProfile)!=null&&Ba.enabled?"bg-blue-500/10 border-blue-500/50":"bg-[#111] border-[#222] hover:border-[#333]"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm font-medium",children:"Volume Profile"}),l.jsx("p",{className:"text-[10px] text-gray-500",children:"Volume at price levels"})]})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:((_a=N==null?void 0:N.volumeProfile)==null?void 0:_a.enabled)??!1,onChange:O=>E==null?void 0:E("volumeProfile",O.target.checked),className:"sr-only peer"}),l.jsx("div",{className:"w-10 h-5 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-[var(--accent-blue)]"})]})]}),l.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${(La=N==null?void 0:N.vwap)!=null&&La.enabled?"bg-purple-500/10 border-purple-500/50":"bg-[#111] border-[#222] hover:border-[#333]"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm font-medium",children:"VWAP"}),l.jsx("p",{className:"text-[10px] text-gray-500",children:"Volume Weighted Average Price"})]})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:((Qt=N==null?void 0:N.vwap)==null?void 0:Qt.enabled)??!1,onChange:O=>E==null?void 0:E("vwap",O.target.checked),className:"sr-only peer"}),l.jsx("div",{className:"w-10 h-5 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-[var(--accent-blue)]"})]})]}),l.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${(Ua=N==null?void 0:N.bollinger)!=null&&Ua.enabled?"bg-green-500/10 border-green-500/50":"bg-[#111] border-[#222] hover:border-[#333]"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm font-medium",children:"Bollinger Bands"}),l.jsx("p",{className:"text-[10px] text-gray-500",children:"Volatility bands"})]})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:((pa=N==null?void 0:N.bollinger)==null?void 0:pa.enabled)??!1,onChange:O=>E==null?void 0:E("bollinger",O.target.checked),className:"sr-only peer"}),l.jsx("div",{className:"w-10 h-5 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-[var(--accent-blue)]"})]})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs uppercase text-gray-500 font-semibold mb-2",children:"Lower Panels"}),l.jsx("div",{className:"space-y-2",children:l.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${(fs=N==null?void 0:N.volume)!=null&&fs.enabled?"bg-amber-500/10 border-amber-500/50":"bg-[#111] border-[#222] hover:border-[#333]"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm font-medium",children:"Volume"}),l.jsx("p",{className:"text-[10px] text-gray-500",children:"Trading volume bars"})]})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:((ol=N==null?void 0:N.volume)==null?void 0:ol.enabled)??!1,onChange:O=>E==null?void 0:E("volume",O.target.checked),className:"sr-only peer"}),l.jsx("div",{className:"w-10 h-5 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-[var(--accent-blue)]"})]})]})})]})]}),l.jsx("div",{className:"p-4 border-t border-[var(--border-color)]",children:l.jsx("button",{onClick:()=>ce(!1),className:"w-full py-2 bg-[var(--accent-blue)] text-white font-medium rounded-lg hover:bg-blue-600 transition-colors",children:"Done"})})]})]})]})},Qv=({isPlaying:u,onPlayPause:n,onStep:o,onExit:r,progress:d,total:f,onSeek:m,currentDate:p,speed:x,onSpeedChange:b})=>l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-[var(--bg-secondary)] border-t border-[var(--border-color)] p-4 z-[60] shadow-[0_-4px_12px_rgba(0,0,0,0.5)] animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:n,className:`flex items-center gap-2 px-3 py-1.5 rounded border border-[var(--border-color)] transition-colors ${u?"bg-white text-black":"bg-[var(--bg-panel)] text-white hover:bg-[#252525]"}`,children:[u?l.jsx(o0,{className:"h-4 w-4"}):l.jsx(c0,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm font-medium",children:u?"Pause":"Play"})]}),l.jsx("button",{onClick:()=>o(-1),className:"p-2 rounded border border-[var(--border-color)] bg-[var(--bg-panel)] hover:bg-[#252525]",children:l.jsx(e0,{className:"h-4 w-4 text-white"})}),l.jsx("button",{onClick:()=>o(1),className:"p-2 rounded border border-[var(--border-color)] bg-[var(--bg-panel)] hover:bg-[#252525]",children:l.jsx(t0,{className:"h-4 w-4 text-white"})})]}),l.jsx("div",{className:"h-6 w-px bg-[var(--border-color)] mx-2"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-gray-400",children:"Speed:"}),[.5,1,2,5].map(v=>l.jsxs("button",{onClick:()=>b(v),className:`px-2 py-0.5 rounded text-xs border border-[var(--border-color)] transition-colors ${x===v?"bg-white text-black":"bg-[var(--bg-panel)] text-white hover:bg-[#252525]"}`,children:[v,"x"]},v))]}),l.jsx("div",{className:"flex-grow"}),l.jsx("div",{className:"text-sm text-white font-mono bg-[var(--bg-primary)] px-3 py-1 rounded border border-[var(--border-color)]",children:p}),l.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-3 py-1.5 rounded border border-[var(--border-color)] bg-[var(--bg-panel)] text-white hover:bg-red-900/30 hover:border-red-800 hover:text-red-400 transition-colors",children:[l.jsx(wt,{className:"h-4 w-4"}),l.jsx("span",{className:"text-sm",children:"Exit Replay"})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{className:"text-xs text-gray-400 w-24 text-right",children:[d," / ",f]}),l.jsx("input",{type:"range",min:"0",max:f,value:d,onChange:v=>m(parseInt(v.target.value)),className:"flex-grow h-1.5 bg-[var(--bg-panel)] rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white"})]})]});function sl(u,n){const o=[],r=2/(n+1);let d=0;for(let f=0;f<n&&f<u.length;f++)d+=u[f];o[n-1]=d/Math.min(n,u.length);for(let f=n;f<u.length;f++)o[f]=(u[f]-o[f-1])*r+o[f-1];return o}function ru(u,n){const o=[];for(let r=n-1;r<u.length;r++){let d=0;for(let f=0;f<n;f++)d+=u[r-f];o[r]=d/n}return o}function ou(u,n=14){const o=[],r=[],d=[];for(let p=1;p<u.length;p++){const x=u[p]-u[p-1];r[p]=x>0?x:0,d[p]=x<0?Math.abs(x):0}let f=0,m=0;for(let p=1;p<=n&&p<u.length;p++)f+=r[p],m+=d[p];f/=n,m/=n,o[n]=m===0?100:100-100/(1+f/m);for(let p=n+1;p<u.length;p++)f=(f*(n-1)+r[p])/n,m=(m*(n-1)+d[p])/n,o[p]=m===0?100:100-100/(1+f/m);return o}function j0(u,n=12,o=26,r=9){const d=sl(u,n),f=sl(u,o),m=[];for(let v=0;v<u.length;v++)d[v]!==void 0&&f[v]!==void 0&&(m[v]=d[v]-f[v]);const p=sl(m.filter(v=>v!==void 0),r),x=[];let b=0;for(let v=0;v<m.length;v++)m[v]!==void 0&&p[b]!==void 0&&(x[v]=m[v]-p[b],b++);return{macd:m,signal:p,histogram:x}}function N0(u,n=20,o=2){const r=ru(u,n),d=[],f=[];for(let m=n-1;m<u.length;m++){let p=0;for(let b=0;b<n;b++)p+=Math.pow(u[m-b]-r[m],2);const x=Math.sqrt(p/n);d[m]=r[m]+o*x,f[m]=r[m]-o*x}return{upper:d,middle:r,lower:f}}function cu(u,n=14){const o=[],r=[];for(let f=0;f<u.length;f++)f===0?o[f]=u[f].high-u[f].low:o[f]=Math.max(u[f].high-u[f].low,Math.abs(u[f].high-u[f-1].close),Math.abs(u[f].low-u[f-1].close));let d=0;for(let f=0;f<n&&f<o.length;f++)d+=o[f];r[n-1]=d/n;for(let f=n;f<u.length;f++)r[f]=(r[f-1]*(n-1)+o[f])/n;return r}function S0(u,n=14,o=3){const r=[];for(let f=n-1;f<u.length;f++){let m=-1/0,p=1/0;for(let b=0;b<n;b++)m=Math.max(m,u[f-b].high),p=Math.min(p,u[f-b].low);const x=m-p;r[f]=x===0?50:(u[f].close-p)/x*100}const d=ru(r.filter(f=>f!==void 0),o);return{k:r,d}}function Zv(u){const n=[];let o=0,r=0;for(let d=0;d<u.length;d++){const f=(u[d].high+u[d].low+u[d].close)/3,m=u[d].volume||1;o+=f*m,r+=m,n[d]=o/r}return n}function uu(u){const n=[];for(let o=2;o<u.length-2;o++){const r=u[o],d=u[o-1],f=u[o+1],m=Math.abs(r.close-r.open);Math.abs(d.close-d.open);const p=Math.abs(f.close-f.open);r.close<r.open&&f.close>f.open&&p>m*1.5&&u.slice(o+1,o+10).map(v=>v.close).some(v=>v>r.high)&&n.push({id:`ob-bull-${r.time}`,type:"bullish",priceHigh:r.high,priceLow:r.low,time:r.time,mitigated:!1,strength:Math.min(100,p/m*30+40)}),r.close>r.open&&f.close<f.open&&p>m*1.5&&u.slice(o+1,o+10).map(v=>v.close).some(v=>v<r.low)&&n.push({id:`ob-bear-${r.time}`,type:"bearish",priceHigh:r.high,priceLow:r.low,time:r.time,mitigated:!1,strength:Math.min(100,p/m*30+40)})}return n.slice(-10)}function du(u){const n=[];for(let o=2;o<u.length;o++){const r=u[o-2],d=u[o];if(d.low>r.high){const f=d.low-r.high,m=(r.high-r.low+d.high-d.low)/2;f>m*.3&&n.push({id:`fvg-bull-${u[o-1].time}`,type:"bullish",priceHigh:d.low,priceLow:r.high,time:u[o-1].time,filled:!1,fillPercentage:0})}if(d.high<r.low){const f=r.low-d.high,m=(r.high-r.low+d.high-d.low)/2;f>m*.3&&n.push({id:`fvg-bear-${u[o-1].time}`,type:"bearish",priceHigh:r.low,priceLow:d.high,time:u[o-1].time,filled:!1,fillPercentage:0})}}return n.slice(-15)}function Fs(u){const n=[],o=[];for(let r=2;r<u.length-2;r++)u[r].high>u[r-1].high&&u[r].high>u[r-2].high&&u[r].high>u[r+1].high&&u[r].high>u[r+2].high&&n.push(u[r].high),u[r].low<u[r-1].low&&u[r].low<u[r-2].low&&u[r].low<u[r+1].low&&u[r].low<u[r+2].low&&o.push(u[r].low);return{highs:n,lows:o}}function k0(u){const n=[],o=Fs(u);for(let r=10;r<u.length;r++)u[r].close,o.highs.includes(u[r].high)&&u[r].high,o.lows.includes(u[r].low)&&u[r].low;return n.slice(-10)}function C0(u){const n=[],o=Fs(u);for(let r=0;r<o.highs.length-1;r++)for(let d=r+1;d<o.highs.length;d++)Math.abs(o.highs[r]-o.highs[d])/o.highs[r]<.002&&n.push({id:`liq-buy-${r}-${d}`,type:"buy-side",price:(o.highs[r]+o.highs[d])/2,size:2,touched:!1});for(let r=0;r<o.lows.length-1;r++)for(let d=r+1;d<o.lows.length;d++)Math.abs(o.lows[r]-o.lows[d])/o.lows[r]<.002&&n.push({id:`liq-sell-${r}-${d}`,type:"sell-side",price:(o.lows[r]+o.lows[d])/2,size:2,touched:!1});return n}function fu(u){const n=[];if(u.length<5)return n;const o=u[u.length-1],r=u[u.length-2],d=u[u.length-3];r.close<r.open&&o.close>o.open&&o.open<r.close&&o.close>r.open&&n.push({name:"Bullish Engulfing",type:"reversal",direction:"bullish",confidence:75,pricePoints:[{price:r.open,time:r.time},{price:o.close,time:o.time}],target:o.close+(o.close-o.open)*2,invalidation:o.low}),r.close>r.open&&o.close<o.open&&o.open>r.close&&o.close<r.open&&n.push({name:"Bearish Engulfing",type:"reversal",direction:"bearish",confidence:75,pricePoints:[{price:r.open,time:r.time},{price:o.close,time:o.time}],target:o.close-(o.open-o.close)*2,invalidation:o.high}),d.close<d.open&&Math.abs(r.close-r.open)<(d.high-d.low)*.3&&o.close>o.open&&o.close>(d.open+d.close)/2&&n.push({name:"Morning Star",type:"reversal",direction:"bullish",confidence:80,pricePoints:[{price:d.low,time:d.time},{price:r.close,time:r.time},{price:o.close,time:o.time}],target:o.close+(d.open-d.close)*1.5,invalidation:r.low}),d.close>d.open&&Math.abs(r.close-r.open)<(d.high-d.low)*.3&&o.close<o.open&&o.close<(d.open+d.close)/2&&n.push({name:"Evening Star",type:"reversal",direction:"bearish",confidence:80,pricePoints:[{price:d.high,time:d.time},{price:r.close,time:r.time},{price:o.close,time:o.time}],target:o.close-(d.close-d.open)*1.5,invalidation:r.high});const f=Math.abs(o.close-o.open),m=Math.min(o.close,o.open)-o.low,p=o.high-Math.max(o.close,o.open);m>f*2&&p<f*.5&&n.push({name:"Hammer",type:"reversal",direction:"bullish",confidence:65,pricePoints:[{price:o.close,time:o.time}],target:o.close+m,invalidation:o.low}),p>f*2&&m<f*.5&&n.push({name:"Shooting Star",type:"reversal",direction:"bearish",confidence:65,pricePoints:[{price:o.close,time:o.time}],target:o.close-p,invalidation:o.high}),f<(o.high-o.low)*.1&&n.push({name:"Doji",type:"reversal",direction:"neutral",confidence:50,pricePoints:[{price:o.close,time:o.time}],target:o.close,invalidation:o.low});const x=u.slice(-3);return x.every(b=>b.close>b.open)&&x[1].open>x[0].open&&x[2].open>x[1].open&&n.push({name:"Three White Soldiers",type:"continuation",direction:"bullish",confidence:85,pricePoints:x.map(b=>({price:b.close,time:b.time})),target:x[2].close+(x[2].close-x[0].open)*.5,invalidation:x[0].low}),x.every(b=>b.close<b.open)&&x[1].open<x[0].open&&x[2].open<x[1].open&&n.push({name:"Three Black Crows",type:"continuation",direction:"bearish",confidence:85,pricePoints:x.map(b=>({price:b.close,time:b.time})),target:x[2].close-(x[0].open-x[2].close)*.5,invalidation:x[0].high}),n}function M0(u){const n=[];if(u.length<30)return n;const o=Fs(u);if(u.map(r=>r.close),o.highs.length>=2){const r=o.highs.slice(-2);if(Math.abs(r[0]-r[1])/r[0]<.02){const d=Math.min(...o.lows.slice(-3));n.push({name:"Double Top",type:"reversal",direction:"bearish",confidence:70,pricePoints:[{price:r[0],time:u[u.length-10].time},{price:r[1],time:u[u.length-3].time}],target:d-(r[0]-d),invalidation:Math.max(...r)*1.01})}}if(o.lows.length>=2){const r=o.lows.slice(-2);if(Math.abs(r[0]-r[1])/r[0]<.02){const d=Math.max(...o.highs.slice(-3));n.push({name:"Double Bottom",type:"reversal",direction:"bullish",confidence:70,pricePoints:[{price:r[0],time:u[u.length-10].time},{price:r[1],time:u[u.length-3].time}],target:d+(d-r[0]),invalidation:Math.min(...r)*.99})}}return n}function hu(u){var f,m,p,x;const n=[];if(u.length<30)return n;const o=u.map(b=>b.close),r=ou(o,14),d=Fs(u);for(let b=1;b<d.lows.length;b++){const v=d.lows[b-1],j=d.lows[b];if(j<v){const C=o.findIndex(N=>N===v),w=o.findIndex(N=>N===j);C>=0&&w>=0&&r[C]&&r[w]&&r[w]>r[C]&&n.push({type:"regular",direction:"bullish",indicator:"RSI",startPrice:v,endPrice:j,startTime:((f=u[C])==null?void 0:f.time)||0,endTime:((m=u[w])==null?void 0:m.time)||0,strength:Math.min(100,Math.abs(r[w]-r[C])*2)})}}for(let b=1;b<d.highs.length;b++){const v=d.highs[b-1],j=d.highs[b];if(j>v){const C=o.findIndex(N=>N===v),w=o.findIndex(N=>N===j);C>=0&&w>=0&&r[C]&&r[w]&&r[w]<r[C]&&n.push({type:"regular",direction:"bearish",indicator:"RSI",startPrice:v,endPrice:j,startTime:((p=u[C])==null?void 0:p.time)||0,endTime:((x=u[w])==null?void 0:x.time)||0,strength:Math.min(100,Math.abs(r[C]-r[w])*2)})}}return n}function A0(u,n,o){const r=[];if(u.length<50)return r;const d=u.map(ye=>ye.close),f=d[d.length-1],m=u[u.length-1].time,p=ou(d),x=j0(d),b=sl(d,20),v=sl(d,50),j=sl(d,200),C=cu(u),w=N0(d),N=S0(u),k=p[p.length-1]||50,B=x.macd[x.macd.length-1]||0,E=x.signal[x.signal.length-1]||0,H=b[b.length-1]||f,Z=v[v.length-1]||f,ne=j[j.length-1]||f,re=C[C.length-1]||f*.02,Y=w.upper[w.upper.length-1]||f,W=w.lower[w.lower.length-1]||f,F=N.k[N.k.length-1]||50,G=uu(u);du(u);const z=fu(u),D=hu(u);let te=0,se=0;const I=[],pe=[];pe.push({name:"RSI",value:k,signal:k<30?"bullish":k>70?"bearish":"neutral"}),k<30?(te+=15,I.push(`RSI oversold at ${k.toFixed(1)}`)):k>70&&(se+=15,I.push(`RSI overbought at ${k.toFixed(1)}`)),pe.push({name:"MACD",value:B,signal:B>E?"bullish":"bearish"}),B>E&&x.macd[x.macd.length-2]<=x.signal[x.signal.length-2]?(te+=20,I.push("MACD bullish crossover")):B<E&&x.macd[x.macd.length-2]>=x.signal[x.signal.length-2]&&(se+=20,I.push("MACD bearish crossover")),pe.push({name:"EMA Trend",value:H,signal:f>H&&H>Z?"bullish":f<H&&H<Z?"bearish":"neutral"}),f>H&&H>Z?(te+=15,I.push("Price above EMA stack (20 > 50)")):f<H&&H<Z&&(se+=15,I.push("Price below EMA stack (20 < 50)")),f>ne?(te+=10,I.push("Above 200 EMA (bullish macro)")):(se+=10,I.push("Below 200 EMA (bearish macro)")),pe.push({name:"Bollinger Bands",value:f,signal:f<W?"bullish":f>Y?"bearish":"neutral"}),f<W?(te+=10,I.push("Price below lower Bollinger Band")):f>Y&&(se+=10,I.push("Price above upper Bollinger Band")),pe.push({name:"Stochastic",value:F,signal:F<20?"bullish":F>80?"bearish":"neutral"}),F<20?(te+=10,I.push(`Stochastic oversold at ${F.toFixed(1)}`)):F>80&&(se+=10,I.push(`Stochastic overbought at ${F.toFixed(1)}`)),z.forEach(ye=>{ye.direction==="bullish"?(te+=ye.confidence*.2,I.push(`${ye.name} pattern detected`)):ye.direction==="bearish"&&(se+=ye.confidence*.2,I.push(`${ye.name} pattern detected`))}),D.forEach(ye=>{ye.direction==="bullish"?(te+=ye.strength*.25,I.push(`${ye.type} bullish divergence on ${ye.indicator}`)):(se+=ye.strength*.25,I.push(`${ye.type} bearish divergence on ${ye.indicator}`))});const U=G.find(ye=>ye.type==="bullish"&&f>=ye.priceLow&&f<=ye.priceHigh*1.01),ae=G.find(ye=>ye.type==="bearish"&&f<=ye.priceHigh&&f>=ye.priceLow*.99);U&&(te+=U.strength*.2,I.push("Price at bullish Order Block")),ae&&(se+=ae.strength*.2,I.push("Price at bearish Order Block"));const ce=te+se,de=Math.min(95,Math.max(30,ce)),we=te-se;let De,je;Math.abs(we)<15?(De="HOLD",je="WEAK"):we>0?(De="BUY",je=we>40?"STRONG":we>25?"MODERATE":"WEAK"):(De="SELL",je=we<-40?"STRONG":we<-25?"MODERATE":"WEAK");const Ne=De==="BUY"?1:-1,be=f,at=f-Ne*re*1.5,ee=f+Ne*re*1.5,xe=f+Ne*re*2.5,Se=f+Ne*re*4,Qe=Math.abs(xe-be)/Math.abs(be-at);return r.push({id:`signal-${m}-${n}`,type:De,strength:je,confidence:de,price:f,timestamp:m,symbol:n,timeframe:o,reasoning:I,targets:{entry:be,stopLoss:at,takeProfit1:ee,takeProfit2:xe,takeProfit3:Se},indicators:pe,riskReward:Qe,expectedMove:Ne*re*2,expiresAt:m+Kv(o)*10}),r}function Kv(u){return{"1m":6e4,"5m":3e5,"15m":9e5,"30m":18e5,"1h":36e5,"4h":144e5,"1d":864e5,"1w":6048e5}[u]||36e5}function Jv(u,n,o){const r=u.map(I=>I.close),d=r[r.length-1]||0,f=uu(u),m=du(u),p=Fs(u),x=k0(u),b=C0(u),v=fu(u),j=M0(u),C=hu(u),w=A0(u,n,o),N=cu(u),k=sl(r,20),B=sl(r,50),E=k[k.length-1]||d,H=B[B.length-1]||d;let Z,ne;d>E&&E>H?(Z="BULLISH",ne=Math.min(100,(d-H)/H*1e3)):d<E&&E<H?(Z="BEARISH",ne=Math.min(100,(H-d)/H*1e3)):(Z="RANGING",ne=30);const re=N[N.length-1]||0,Y=re/d*100;let W;Y<1?W="LOW":Y<3?W="MEDIUM":Y<5?W="HIGH":W="EXTREME";const F=[...f.map(I=>({price:(I.priceHigh+I.priceLow)/2,type:`${I.type} Order Block`,importance:I.strength})),...p.highs.slice(-3).map(I=>({price:I,type:"Swing High",importance:70})),...p.lows.slice(-3).map(I=>({price:I,type:"Swing Low",importance:70}))].sort((I,pe)=>pe.importance-I.importance),G=(r[r.length-1]-r[r.length-5])/r[r.length-5],z={shortTerm:{direction:G>0?"UP":"DOWN",probability:Math.min(80,50+Math.abs(G)*500),price:d*(1+G*.5)},mediumTerm:{direction:Z==="BULLISH"?"UP":Z==="BEARISH"?"DOWN":"SIDEWAYS",probability:ne,price:d*(Z==="BULLISH"?1.05:Z==="BEARISH"?.95:1)},longTerm:{direction:d>H?"UP":"DOWN",probability:Math.min(75,50+Math.abs((d-H)/H)*200),price:d>H?d*1.1:d*.9}},D=w[0]||null,te=[...v,...j].map(I=>I.name).slice(0,3),se=`${n} is in a ${Z.toLowerCase()} trend with ${ne.toFixed(0)}% strength. ${D?`Primary signal: ${D.type} (${D.confidence}% confidence). `:""}${te.length>0?`Patterns: ${te.join(", ")}. `:""}Risk: ${W}. Volatility: ${Y.toFixed(2)}%.`;return{symbol:n,timeframe:o,timestamp:Date.now(),marketStructure:{trend:Z,trendStrength:ne,swingHighs:p.highs,swingLows:p.lows,bos:x,choch:x.filter((I,pe)=>pe%2===1),orderBlocks:f,fairValueGaps:m,liquidityPools:b},signals:w,primarySignal:D,patterns:[...v,...j],divergences:C,volatility:Y,atr:re,riskLevel:W,predictions:z,summary:se,keyLevels:F}}const Lc={analyze:Jv,generateSignals:A0,calculateEMA:sl,calculateSMA:ru,calculateRSI:ou,calculateMACD:j0,calculateBollingerBands:N0,calculateATR:cu,calculateStochastic:S0,calculateVWAP:Zv,detectOrderBlocks:uu,detectFairValueGaps:du,detectSwingPoints:Fs,detectBOSandCHoCH:k0,detectLiquidityPools:C0,detectCandlePatterns:fu,detectChartPatterns:M0,detectDivergences:hu};function T0(u){const n=u.map(o=>o.high-o.low);return n.reduce((o,r)=>o+r,0)/n.length}function Pv(u,n,o,r){const d=u.close>u.open,f=Math.abs(u.close-u.open),m=f>r,p=n.every(b=>Math.abs(b.close-b.open)<f*.5),x=o.length>0&&o[0].close>u.close;return d&&m&&p&&x}function Fv(u,n,o,r){const d=u.close<u.open,f=Math.abs(u.close-u.open),m=f>r,p=n.every(b=>Math.abs(b.close-b.open)<f*.5),x=o.length>0&&o[0].close<u.close;return d&&m&&p&&x}function vm(u,n){const o=Math.abs(u.close-u.open),r=n.reduce((d,f)=>d+Math.abs(f.close-f.open),0)/n.length;return o>r*3?"strong":o>r*2?"medium":"weak"}function ym(u,n,o){let r=0;for(const d of o)d.low<=n&&d.high>=u&&r++;return Math.min(r,5)}function Wv(u){if(u.length<2)return u;const n=[...u].sort((r,d)=>r.priceBottom-d.priceBottom),o=[n[0]];for(let r=1;r<n.length;r++){const d=n[r],f=o[o.length-1];d.priceBottom<=f.priceTop&&d.type===f.type?(f.priceTop=Math.max(f.priceTop,d.priceTop),f.strength=d.strength==="strong"||f.strength==="strong"?"strong":d.strength==="medium"||f.strength==="medium"?"medium":"weak"):o.push(d)}return o}function D0(u,n=1){var f,m;if(u.length<20)return[];const o=[],d=T0(u)*(2-n);for(let p=3;p<u.length-3;p++){const x=u[p],b=u.slice(Math.max(0,p-3),p),v=u.slice(p+1,Math.min(u.length,p+4));if(Pv(x,b,v,d)){const j=Math.min(x.low,...b.map(w=>w.low)),C=Math.max(x.open,x.close);o.push({id:`demand-${x.time}`,type:"demand",priceBottom:j,priceTop:C,startTime:((f=b[0])==null?void 0:f.time)||x.time,endTime:x.time,strength:vm(x,b),tested:ym(j,C,u.slice(p))})}if(Fv(x,b,v,d)){const j=Math.max(x.high,...b.map(w=>w.high)),C=Math.min(x.open,x.close);o.push({id:`supply-${x.time}`,type:"supply",priceBottom:C,priceTop:j,startTime:((m=b[0])==null?void 0:m.time)||x.time,endTime:x.time,strength:vm(x,b),tested:ym(C,j,u.slice(p))})}}return Wv(o).slice(0,6)}function E0(u,n=5){if(u.length<10)return[];const o=[];for(let f=2;f<u.length-2;f++){const m=u[f].high>u[f-1].high&&u[f].high>u[f+1].high,p=u[f].low<u[f-1].low&&u[f].low<u[f+1].low;m&&o.push({price:u[f].high,type:"high"}),p&&o.push({price:u[f].low,type:"low"})}const r=T0(u)*.5,d=[];for(const f of o){const m=d.find(p=>Math.abs(p.avgPrice-f.price)<r);m?(m.avgPrice=(m.avgPrice*m.count+f.price)/(m.count+1),m.count++):d.push({avgPrice:f.price,count:1,dominantType:f.type})}return d.filter(f=>f.count>=2).map(f=>({price:f.avgPrice,type:f.dominantType==="low"?"support":"resistance",strength:Math.min(100,f.count*20),touches:f.count})).sort((f,m)=>m.strength-f.strength).slice(0,n)}function Iv(u){const n=[];if(u.length<5)return n;const o=u[u.length-1],r=u[u.length-2];if(r&&o&&(r.close<r.open&&o.close>o.open&&o.close>r.open&&o.open<r.close&&n.push("Bullish Engulfing"),r.close>r.open&&o.close<o.open&&o.close<r.open&&o.open>r.close&&n.push("Bearish Engulfing")),o&&Math.abs(o.close-o.open)<(o.high-o.low)*.1&&n.push("Doji"),o){const d=Math.abs(o.close-o.open);Math.min(o.open,o.close)-o.low>d*2&&n.push("Hammer")}return n}function ey(u){const n=D0(u),o=E0(u),r=Iv(u);let d=0,f=0;r.forEach(x=>{(x.includes("Bullish")||x==="Hammer")&&d++,x.includes("Bearish")&&f++});const m=d>f?"bullish":f>d?"bearish":"neutral",p=Math.min(95,50+r.length*10+n.length*5);return{zones:n,supportResistance:o,trendLines:[],patterns:r,sentiment:m,confidence:p}}const ty=({isVisible:u,chartData:n,onDrawCommand:o})=>{const[r,d]=y.useState(""),[f,m]=y.useState([{id:"1",role:"assistant",content:"Ready  zones  levels  analyze",timestamp:Date.now()}]),[p,x]=y.useState(!1),[b,v]=y.useState(null),[j,C]=y.useState(""),w=y.useRef(null);y.useEffect(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[f,j]);const N=y.useCallback((Y,W)=>{v(Y),C("");let F=0;const G=()=>{F<W.length?(C(W.slice(0,F+1)),F++,setTimeout(G,15+Math.random()*25)):(v(null),x(!1))};G()},[]),k=y.useCallback(Y=>{const W=Date.now().toString();m(F=>[...F,{id:W,role:"assistant",content:Y,timestamp:Date.now()}]),N(W,Y)},[N]),B=y.useCallback(()=>{if(!n||n.length<20){k("waiting for data...");return}x(!0);const Y=D0(n);if(Y.length===0){k("no zones found");return}Y.forEach(G=>{o({type:"ZONE",priceTop:G.priceTop,priceBottom:G.priceBottom,zoneType:G.type.toUpperCase()})});const W=Y.filter(G=>G.type==="demand").length,F=Y.filter(G=>G.type==="supply").length;k(`drew ${Y.length} zones  ${W} demand  ${F} supply`)},[n,o,k]),E=y.useCallback(()=>{if(!n||n.length<20){k("waiting for data...");return}x(!0);const Y=E0(n);if(Y.length===0){k("no levels found");return}Y.forEach(G=>{o({type:"HORIZONTAL",value:G.price})});const W=Y.filter(G=>G.type==="support").length,F=Y.filter(G=>G.type==="resistance").length;k(`drew ${Y.length} levels  ${W} support  ${F} resistance`)},[n,o,k]),H=y.useCallback(()=>{if(!n||n.length<20){k("waiting for data...");return}x(!0);const Y=ey(n);Y.zones.forEach(F=>{o({type:"ZONE",priceTop:F.priceTop,priceBottom:F.priceBottom,zoneType:F.type.toUpperCase()})}),Y.supportResistance.forEach(F=>{o({type:"HORIZONTAL",value:F.price})});const W=Y.zones.length+Y.supportResistance.length;k(`${Y.sentiment} ${Y.confidence}%  ${W} drawings`)},[n,o,k]),Z=y.useCallback(Y=>{const W=Y.toLowerCase();if(W.match(/^(hi|hello|hey|sup|yo|greetings)/)){const G=["Hey! I'm your trading assistant. Try 'zones', 'levels', or 'analyze' to get started.","Hello trader! Ready to help. Ask me about support/resistance, supply/demand zones, or chart analysis.","Hi there! I can draw zones, identify levels, and analyze charts. What do you need?"];return G[Math.floor(Math.random()*G.length)]}if(W.includes("help")||W.includes("what can you do")||W.includes("commands"))return`I can help with:
 'zones'  draw supply & demand zones
 'levels'  identify support & resistance
 'analyze'  full chart analysis
 Ask about trends, price action, or trading concepts!`;if(W.includes("price")||W.includes("current")){const G=n==null?void 0:n[n.length-1];if(G){const z=((G.close-G.open)/G.open*100).toFixed(2);return`Current price: $${G.close.toLocaleString()}. ${Number(z)>=0?"":""} ${z}% this candle.`}return"Loading price data..."}if(W.includes("trend")||W.includes("direction")||W.includes("bullish")||W.includes("bearish")){if(n&&n.length>=20){const G=n.slice(-20),z=G[0].close,te=((G[G.length-1].close-z)/z*100).toFixed(2);return`Short-term trend looks ${Number(te)>1?"bullish ":Number(te)<-1?"bearish ":"neutral "} (${te}% over last 20 candles). Use 'analyze' for full breakdown.`}return"Need more data to determine trend. Try again shortly."}if(W.includes("volume")){if(n&&n.length>=10){const G=n.slice(-5).reduce((te,se)=>te+(se.volume||0),0)/5,z=n.slice(-10,-5).reduce((te,se)=>te+(se.volume||0),0)/5,D=z>0?((G-z)/z*100).toFixed(0):0;return`Recent volume is ${Number(D)>0?"up":"down"} ${Math.abs(Number(D))}% compared to previous period.`}return"Volume data is loading..."}if(W.includes("thank")||W.includes("thanks"))return"You're welcome! Happy trading! ";if(W.includes("what is")||W.includes("explain")||W.includes("define")){if(W.includes("supply")||W.includes("demand"))return"Supply zones are areas where sellers dominated, causing price drops. Demand zones are where buyers took control, pushing prices up. These zones often act as future reversal points.";if(W.includes("support")||W.includes("resistance"))return"Support is a price level where buying pressure prevents further decline. Resistance is where selling pressure caps upward movement. These levels are key for entries/exits.";if(W.includes("trend"))return"A trend is the overall direction of price movement. Uptrend = higher highs & higher lows. Downtrend = lower highs & lower lows. Always trade with the trend!"}const F=["I understand! Try 'zones', 'levels', or 'analyze' for chart tools. Or ask me about trends, price, or trading concepts.","Interesting question! My main features are: zones, levels, analyze. I can also discuss basic trading concepts.","Got it! For chart analysis, try: zones  levels  analyze. For info, ask about trends, support/resistance, or price action."];return F[Math.floor(Math.random()*F.length)]},[n]),ne=y.useCallback(()=>{if(!r.trim()||p)return;const Y=r.toLowerCase().trim();m(W=>[...W,{id:Date.now().toString(),role:"user",content:r,timestamp:Date.now()}]),d(""),Y.includes("zone")||Y.includes("s&d")||Y.includes("supply")||Y.includes("demand")?B():Y.includes("level")||Y.includes("s/r")||Y.includes("support")||Y.includes("resistance")?E():Y.includes("analy")||Y.includes("full")?H():(x(!0),setTimeout(()=>{const W=Z(r);k(W)},300+Math.random()*400))},[r,p,B,E,H,Z,k]),re=y.useCallback(Y=>{d(Y)},[]);return u?l.jsxs("aside",{className:"w-full sm:w-80 bg-black border-l border-neutral-800 flex flex-col h-full",children:[l.jsxs("div",{className:"px-4 py-3 border-b border-neutral-800 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),l.jsx("span",{className:"text-white text-xs font-medium tracking-widest uppercase",children:"ai"})]}),l.jsx("span",{className:"text-neutral-600 text-[10px] font-mono",children:(n==null?void 0:n.length)||0})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-3 min-h-0",ref:w,children:[f.map(Y=>l.jsx("div",{className:`flex ${Y.role==="user"?"justify-end":"justify-start"}`,children:l.jsxs("span",{className:`text-[11px] leading-relaxed max-w-[90%] ${Y.role==="user"?"text-white bg-neutral-800 px-3 py-1.5 rounded-2xl rounded-br-sm":"text-neutral-400"}`,children:[b===Y.id?j:Y.content,b===Y.id&&l.jsx("span",{className:"animate-pulse",children:"|"})]})},Y.id)),p&&!b&&l.jsx("div",{className:"flex justify-start",children:l.jsxs("span",{className:"text-neutral-600 text-[11px] flex gap-1",children:[l.jsx("span",{className:"animate-bounce",style:{animationDelay:"0ms"},children:""}),l.jsx("span",{className:"animate-bounce",style:{animationDelay:"150ms"},children:""}),l.jsx("span",{className:"animate-bounce",style:{animationDelay:"300ms"},children:""})]})})]}),l.jsxs("div",{className:"px-4 py-2 flex gap-1.5 flex-wrap",children:[l.jsx("button",{onClick:()=>re("draw zones"),disabled:p||!n||n.length<20,className:"px-2.5 py-1 text-[9px] font-medium rounded-full bg-neutral-900 border border-neutral-800 text-neutral-500 hover:text-white hover:border-neutral-600 hover:bg-neutral-800 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:"zones"}),l.jsx("button",{onClick:()=>re("draw levels"),disabled:p||!n||n.length<20,className:"px-2.5 py-1 text-[9px] font-medium rounded-full bg-neutral-900 border border-neutral-800 text-neutral-500 hover:text-white hover:border-neutral-600 hover:bg-neutral-800 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:"levels"}),l.jsx("button",{onClick:()=>re("full analysis"),disabled:p||!n||n.length<20,className:"px-2.5 py-1 text-[9px] font-medium rounded-full bg-neutral-900 border border-neutral-800 text-neutral-500 hover:text-white hover:border-neutral-600 hover:bg-neutral-800 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:"analyze"}),l.jsx("button",{onClick:()=>re("what is the trend?"),disabled:p,className:"px-2.5 py-1 text-[9px] font-medium rounded-full bg-neutral-900 border border-neutral-800 text-neutral-500 hover:text-white hover:border-neutral-600 hover:bg-neutral-800 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:"trend?"}),l.jsx("button",{onClick:()=>re("current price"),disabled:p,className:"px-2.5 py-1 text-[9px] font-medium rounded-full bg-neutral-900 border border-neutral-800 text-neutral-500 hover:text-white hover:border-neutral-600 hover:bg-neutral-800 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:"price"}),l.jsx("button",{onClick:()=>re("help"),disabled:p,className:"px-2.5 py-1 text-[9px] font-medium rounded-full bg-neutral-900 border border-neutral-800 text-neutral-500 hover:text-white hover:border-neutral-600 hover:bg-neutral-800 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:"help"})]}),l.jsx("div",{className:"px-4 py-3 border-t border-neutral-800",children:l.jsxs("div",{className:"flex gap-2 items-center",children:[l.jsx("input",{type:"text",value:r,onChange:Y=>d(Y.target.value),onKeyDown:Y=>Y.key==="Enter"&&ne(),placeholder:"Ask anything...",className:"flex-1 px-3 py-2 bg-neutral-900 rounded-full text-white text-[11px] placeholder-neutral-600 focus:outline-none focus:ring-1 focus:ring-neutral-700"}),l.jsx("button",{onClick:ne,disabled:p||!r.trim(),className:"p-2 rounded-full bg-neutral-800 text-neutral-500 hover:text-white hover:bg-neutral-700 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx(Bb,{className:"w-3 h-3"})})]})})]}):null},ay=({chartData:u,symbol:n,timeframe:o,onDrawCommand:r,isVisible:d=!0})=>{const[f,m]=y.useState(!1),[p,x]=y.useState(null),[b,v]=y.useState(!1),[j,C]=y.useState(""),w=y.useCallback((E,H=300)=>{E.forEach((Z,ne)=>{setTimeout(()=>{r(Z)},ne*H)})},[r]),N=y.useCallback(()=>{!u||u.length<50||f||(m(!0),x("zones"),setTimeout(()=>{const H=Lc.analyze(u,n,o).marketStructure.orderBlocks;if(H.length===0){C("No zones found"),v(!0),setTimeout(()=>v(!1),2e3),m(!1);return}const Z=H.slice(0,4).map(Y=>({type:"ZONE",priceTop:Y.priceHigh,priceBottom:Y.priceLow,zoneType:Y.type==="bullish"?"DEMAND":"SUPPLY"}));w(Z,400);const ne=H.filter(Y=>Y.type==="bullish").length,re=H.filter(Y=>Y.type==="bearish").length;C(` ${ne} demand, ${re} supply`),v(!0),setTimeout(()=>v(!1),3e3),m(!1)},500))},[u,n,o,f,w]),k=y.useCallback(()=>{!u||u.length<30||f||(m(!0),x("levels"),setTimeout(()=>{const E=Lc.detectSwingPoints(u),H=[...E.highs.slice(-3).map(Y=>({price:Y,type:"resistance"})),...E.lows.slice(-3).map(Y=>({price:Y,type:"support"}))];if(H.length===0){C("No levels found"),v(!0),setTimeout(()=>v(!1),2e3),m(!1);return}const Z=H.map(Y=>({type:"HORIZONTAL",value:Y.price}));w(Z,250);const ne=H.filter(Y=>Y.type==="support").length,re=H.filter(Y=>Y.type==="resistance").length;C(` ${ne} support, ${re} resistance`),v(!0),setTimeout(()=>v(!1),3e3),m(!1)},500))},[u,f,w]),B=y.useCallback(()=>{!u||u.length<50||f||(m(!0),x("full"),setTimeout(()=>{const E=Lc.analyze(u,n,o),H=[];E.marketStructure.orderBlocks.slice(0,3).forEach(re=>{H.push({type:"ZONE",priceTop:re.priceHigh,priceBottom:re.priceLow,zoneType:re.type==="bullish"?"DEMAND":"SUPPLY"})});const Z=E.marketStructure;if(Z.swingHighs.slice(-2).forEach(re=>{H.push({type:"HORIZONTAL",value:re})}),Z.swingLows.slice(-2).forEach(re=>{H.push({type:"HORIZONTAL",value:re})}),H.length===0){C("No patterns found"),v(!0),setTimeout(()=>v(!1),2e3),m(!1);return}w(H,350);const ne=E.marketStructure.trend==="BULLISH"?"":E.marketStructure.trend==="BEARISH"?"":"";C(`${ne} ${E.marketStructure.trend} ${E.marketStructure.trendStrength.toFixed(0)}%`),v(!0),setTimeout(()=>v(!1),4e3),m(!1)},800))},[u,n,o,f,w]);return!d||!u||u.length<30?null:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"absolute top-3 right-3 z-50 flex flex-col gap-2",children:[l.jsxs("button",{onClick:B,disabled:f,className:`group relative flex items-center gap-2 px-3 py-2 rounded-xl transition-all duration-300 shadow-lg ${f&&p==="full"?"bg-purple-500 text-white scale-105":"bg-[var(--bg-secondary)]/90 backdrop-blur-md border border-[var(--border-color)] text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)] hover:border-purple-500 hover:scale-105"}`,children:[f&&p==="full"?l.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):l.jsx("svg",{className:"w-5 h-5 text-purple-400 group-hover:text-purple-300",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z"})}),l.jsx("span",{className:"text-sm font-medium",children:f&&p==="full"?"Analyzing...":"AI Analyze"})]}),l.jsxs("div",{className:"flex gap-1.5",children:[l.jsx("button",{onClick:N,disabled:f,title:"Draw Supply & Demand Zones",className:`flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-200 shadow-md ${f&&p==="zones"?"bg-emerald-500 text-white animate-pulse":"bg-[var(--bg-secondary)]/90 backdrop-blur-md border border-[var(--border-color)] text-emerald-400 hover:bg-emerald-500/20 hover:border-emerald-500"}`,children:f&&p==="zones"?l.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 5h16M4 10h16M4 15h16M4 20h16"})})}),l.jsx("button",{onClick:k,disabled:f,title:"Draw Support & Resistance",className:`flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-200 shadow-md ${f&&p==="levels"?"bg-blue-500 text-white animate-pulse":"bg-[var(--bg-secondary)]/90 backdrop-blur-md border border-[var(--border-color)] text-blue-400 hover:bg-blue-500/20 hover:border-blue-500"}`,children:f&&p==="levels"?l.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12h18M3 6h18M3 18h18"})})})]})]}),b&&l.jsx("div",{className:"absolute top-16 right-3 z-50 animate-slide-in-right",children:l.jsx("div",{className:"px-4 py-2 rounded-xl bg-[var(--bg-secondary)]/95 backdrop-blur-md border border-[var(--border-color)] shadow-xl",children:l.jsx("span",{className:"text-sm font-medium text-[var(--text-primary)]",children:j})})})]})},ly=({isVisible:u,portfolio:n,onSymbolSelect:o,onShowEntry:r})=>{const[d,f]=y.useState("portfolio"),[m,p]=y.useState(["SOLUSD","AVAXUSD","MATICUSD"]),[x,b]=y.useState("");if(!u)return null;const v=()=>{x&&!m.includes(x.toUpperCase())&&(p([...m,x.toUpperCase()]),b(""))},j=w=>{p(m.filter(N=>N!==w))},C=w=>{o(w.symbol),r&&r(w.symbol,w.avgPrice,w.entryTime)};return l.jsxs("aside",{className:"w-[400px] bg-[var(--bg-primary)] border-r border-[var(--border-color)] flex flex-col flex-shrink-0 animate-fade-in",children:[l.jsxs("div",{className:"p-4 border-b border-[var(--border-color)] flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-black border border-red-900 flex items-center justify-center text-red-500",children:l.jsx(nl,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-white font-semibold",children:"Black Swan Spot"}),l.jsx("p",{className:"text-xs text-[var(--text-secondary)]",children:"Anomaly Detection & Portfolio"})]})]}),l.jsxs("div",{className:"flex border-b border-[var(--border-color)]",children:[l.jsx("button",{onClick:()=>f("portfolio"),className:`flex-1 p-3 text-sm font-medium transition-colors ${d==="portfolio"?"text-white border-b-2 border-[var(--accent-blue)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]"}`,children:"My Portfolio"}),l.jsx("button",{onClick:()=>f("watchlist"),className:`flex-1 p-3 text-sm font-medium transition-colors ${d==="watchlist"?"text-white border-b-2 border-[var(--accent-blue)]":"text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)]"}`,children:"Watchlist"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:d==="portfolio"?l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"text-white font-semibold mb-2 text-xs uppercase tracking-wider text-gray-500",children:"Active Holdings"}),n.map(w=>l.jsxs("div",{onClick:()=>C(w),className:"p-3 bg-[var(--bg-secondary)] rounded-lg cursor-pointer hover:bg-[var(--bg-panel)] transition-all border border-transparent hover:border-[var(--accent-blue)] group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-white font-bold text-lg",children:w.symbol}),l.jsx("span",{className:"text-[var(--accent-bullish)] font-mono text-sm",children:"+2.4%"})]}),l.jsxs("div",{className:"flex justify-between items-center text-xs text-[var(--text-secondary)]",children:[l.jsxs("span",{children:["Size: ",l.jsx("span",{className:"text-white",children:w.amount})]}),l.jsxs("span",{children:["Entry: ",l.jsxs("span",{className:"text-white",children:["$",w.avgPrice.toLocaleString()]})]})]}),l.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[l.jsxs("div",{className:"text-[10px] text-gray-500 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Bot Active"]}),l.jsxs("button",{onClick:N=>{N.stopPropagation(),r&&r(w.symbol,w.avgPrice,w.entryTime),o(w.symbol)},className:"flex items-center gap-1 px-2 py-1 rounded bg-[var(--accent-blue)]/20 text-[var(--accent-blue)] text-[10px] opacity-0 group-hover:opacity-100 transition-opacity hover:bg-[var(--accent-blue)]/30",title:"Show entry point on chart",children:[l.jsx(Kc,{className:"h-3 w-3"}),"Show Entry"]})]})]},w.symbol))]}):l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"text-white font-semibold mb-2 text-xs uppercase tracking-wider text-gray-500",children:"Anomaly Monitor"}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{type:"text",value:x,onChange:w=>b(w.target.value),placeholder:"Add Symbol (e.g. DOTUSD)",className:"flex-grow bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded px-3 py-1.5 text-xs text-white focus:outline-none focus:border-[var(--accent-blue)]",onKeyDown:w=>w.key==="Enter"&&v()}),l.jsx("button",{onClick:v,className:"bg-[var(--bg-panel)] border border-[var(--border-color)] rounded px-3 hover:bg-[var(--bg-secondary)] text-white",children:l.jsx(Hb,{className:"h-4 w-4"})})]}),l.jsx("div",{className:"space-y-2",children:m.map(w=>l.jsxs("div",{className:"p-2 bg-[var(--bg-secondary)] rounded-lg flex justify-between items-center group hover:border border-[var(--border-color)] transition-colors",children:[l.jsx("span",{className:"text-white cursor-pointer hover:text-[var(--accent-blue)] font-medium",onClick:()=>o(w),children:w}),l.jsx("button",{onClick:()=>j(w),className:"p-1.5 rounded text-[var(--text-secondary)] hover:text-red-400 hover:bg-[#252525] opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(_g,{className:"h-4 w-4"})})]},w))})]})}),l.jsxs("div",{className:"p-4 border-t border-[var(--border-color)] bg-[var(--bg-secondary)]",children:[l.jsx("p",{className:"text-xs text-[var(--text-secondary)] mb-1",children:"System Status:"}),l.jsxs("p",{className:"text-sm text-white flex items-center gap-2 font-medium",children:[l.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"Monitoring 3 Assets"]})]})]})},sy=({message:u,type:n,onClose:o})=>{y.useEffect(()=>{const d=setTimeout(()=>{o()},5e3);return()=>clearTimeout(d)},[o]);const r=n==="alert"?"bg-[#ef5350]":n==="success"?"bg-[#26a69a]":"bg-[#2962ff]";return l.jsxs("div",{className:`fixed top-4 right-4 z-[100] flex items-center gap-3 p-4 rounded-lg shadow-2xl text-white ${r} animate-fade-in min-w-[300px]`,children:[l.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:n==="alert"?l.jsx(Fm,{className:"h-5 w-5"}):l.jsx(Bl,{className:"h-5 w-5"})}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("h4",{className:"font-bold text-sm uppercase tracking-wide",children:n==="alert"?"Price Alert":"Notification"}),l.jsx("p",{className:"text-sm font-medium",children:u})]}),l.jsx("button",{onClick:o,className:"text-white/70 hover:text-white",children:l.jsx(wt,{className:"h-4 w-4"})})]})},ny=({isOpen:u,onClose:n,alerts:o,currentPrice:r,symbol:d,onCreateAlert:f,onDeleteAlert:m,onPickOnChart:p})=>{const[x,b]=y.useState(""),[v,j]=y.useState(!1),[C,w]=y.useState(0),N=y.useRef(0),k=y.useRef(0),B=y.useCallback(ne=>{ne.target.closest(".sheet-handle")&&(j(!0),N.current=ne.touches[0].clientY,k.current=0)},[]),E=y.useCallback(ne=>{if(!v)return;const re=ne.touches[0].clientY-N.current;re>0&&(k.current=re,w(re))},[v]),H=y.useCallback(()=>{v&&(j(!1),k.current>100&&n(),w(0),k.current=0)},[v,n]);if(!u)return null;const Z=ne=>{ne.preventDefault();const re=parseFloat(x);!isNaN(re)&&re>0&&(f(re),b(""))};return l.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-end sm:items-center justify-center backdrop-blur-sm",children:l.jsxs("div",{className:"bg-[var(--bg-secondary)] border border-[var(--border-color)] w-full sm:w-[400px] rounded-t-2xl sm:rounded-lg shadow-2xl animate-fade-in flex flex-col max-h-[85vh] sm:max-h-[80vh] safe-area-bottom",style:{transform:`translateY(${C}px)`,transition:v?"none":"transform 0.2s ease-out"},onTouchStart:B,onTouchMove:E,onTouchEnd:H,children:[l.jsx("div",{className:"sheet-handle sm:hidden flex justify-center pt-3 pb-1 cursor-grab active:cursor-grabbing",children:l.jsx("div",{className:"w-10 h-1 bg-[var(--border-color)] rounded-full"})}),l.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-[var(--border-color)]",children:[l.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[l.jsx(Fm,{className:"h-5 w-5 text-[var(--accent-blue)]"}),"Alerts Manager"]}),l.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white p-1 -mr-1 touch-active rounded-lg",children:l.jsx(wt,{className:"h-5 w-5"})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain p-4 space-y-3",children:o.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(Ps,{className:"h-10 w-10 mx-auto mb-2 opacity-20"}),l.jsxs("p",{className:"text-sm",children:["No active alerts for ",d]})]}):o.map(ne=>l.jsxs("div",{className:"bg-[var(--bg-primary)] p-3 rounded-xl sm:rounded border border-[var(--border-color)] flex justify-between items-center group",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-white",children:ne.symbol}),l.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${ne.condition==="above"?"bg-green-900 text-green-200":"bg-red-900 text-red-200"}`,children:["Crossing ",ne.condition==="above"?"Up":"Down"]})]}),l.jsxs("div",{className:"text-sm text-gray-400 mt-1 font-mono",children:["Target: ",l.jsxs("span",{className:"text-white",children:["$",ne.targetPrice.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]}),l.jsx("button",{onClick:()=>m(ne.id),className:"p-3 sm:p-2 text-gray-500 hover:text-red-400 hover:bg-[#252525] rounded-lg transition-colors touch-active",children:l.jsx(os,{className:"h-5 w-5 sm:h-4 sm:w-4"})})]},ne.id))}),l.jsx("div",{className:"p-4 border-t border-[var(--border-color)] bg-[var(--bg-panel)]",children:l.jsxs("form",{onSubmit:Z,children:[l.jsxs("label",{className:"block text-xs text-gray-400 mb-2",children:["Create new alert for ",l.jsx("span",{className:"text-white font-bold",children:d})]}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[l.jsx("input",{type:"number",step:"0.01",value:x,onChange:ne=>b(ne.target.value),placeholder:`Current: $${r.toLocaleString(void 0,{minimumFractionDigits:2})}`,className:"flex-grow bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg px-3 py-3 sm:py-2 text-white text-base sm:text-sm focus:outline-none focus:border-[var(--accent-blue)] font-mono",autoFocus:!0}),l.jsx("button",{type:"submit",disabled:!x,className:"bg-[var(--accent-blue)] text-white px-5 sm:px-4 py-3 sm:py-2 rounded-lg text-sm font-medium hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed touch-active",children:"Add"})]}),l.jsxs("button",{type:"button",onClick:p,className:"w-full py-3 sm:py-2 bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded-lg text-sm text-[var(--text-secondary)] hover:text-white hover:bg-[#252525] transition-colors flex items-center justify-center gap-2 touch-active",children:[l.jsx(tu,{className:"h-4 w-4"}),"Pick on Chart"]})]})})]})})},ns="tv_auth",z0="tv_users",gr="tv_pending_verification",Ks=()=>{const u=localStorage.getItem(z0);return u?JSON.parse(u):{}},Kn=u=>{localStorage.setItem(z0,JSON.stringify(u))},Uc=()=>{const u=localStorage.getItem(gr);if(!u)return null;const n=JSON.parse(u);return Date.now()>n.expiresAt?(localStorage.removeItem(gr),null):n},wm=u=>{localStorage.setItem(gr,JSON.stringify(u))},Rc=()=>{localStorage.removeItem(gr)},jm=()=>Math.floor(1e5+Math.random()*9e5).toString(),Nm=u=>{let n=0;for(let o=0;o<u.length;o++){const r=u.charCodeAt(o);n=(n<<5)-n+r,n=n&n}return Math.abs(n).toString(36)},Sm=async(u,n)=>(await new Promise(o=>setTimeout(o,500)),console.log(` Verification code for ${u}: ${n}`),"Notification"in window&&Notification.permission==="granted"&&new Notification("TradeVision Verification Code",{body:`Your code is: ${n}`,icon:"/favicon.ico"}),!0),Ot={getAuthState:()=>{const u=localStorage.getItem(ns);return u?{...JSON.parse(u),isLoading:!1}:{user:null,isAuthenticated:!1,isLoading:!1}},getPendingVerification:()=>{const u=Uc();return u?{email:u.email,expiresAt:u.expiresAt}:null},startRegistration:async(u,n,o)=>{if(await new Promise(p=>setTimeout(p,800)),Ks()[u.toLowerCase()])return{success:!1,error:"Email already registered"};if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u))return{success:!1,error:"Invalid email address"};if(n.length<6)return{success:!1,error:"Password must be at least 6 characters"};const f=jm(),m={email:u.toLowerCase(),password:Nm(n),name:o||u.split("@")[0],code:f,expiresAt:Date.now()+600*1e3,createdAt:Date.now()};return wm(m),await Sm(u,f),{success:!0}},verifyEmailCode:async u=>{await new Promise(f=>setTimeout(f,500));const n=Uc();if(!n)return{success:!1,error:"Verification expired. Please register again."};if(n.code!==u)return{success:!1,error:"Invalid verification code"};const o=Ks();if(o[n.email])return Rc(),{success:!1,error:"Email already registered"};const r={id:Date.now().toString(),email:n.email,name:n.name,plan:"free",createdAt:new Date().toISOString(),emailVerified:!0,preferences:{theme:"dark",defaultTimeframe:"1D",notifications:!0}};o[n.email]={password:n.password,user:r},Kn(o),Rc();const d={user:r,isAuthenticated:!0,isLoading:!1};return localStorage.setItem(ns,JSON.stringify(d)),{success:!0,user:r}},resendVerificationCode:async()=>{const u=Uc();if(!u)return{success:!1,error:"No pending verification. Please register again."};const n=jm();return u.code=n,u.expiresAt=Date.now()+600*1e3,wm(u),await Sm(u.email,n),{success:!0}},cancelRegistration:()=>{Rc()},register:async(u,n,o)=>{const r=await Ot.startRegistration(u,n,o);return r.success?{success:!0,needsVerification:!0}:r},login:async(u,n)=>{await new Promise(f=>setTimeout(f,600));const o=Ks(),r=o[u.toLowerCase()];if(!r)return{success:!1,error:"Email not found"};if(r.password!==Nm(n))return{success:!1,error:"Incorrect password"};r.user.lastLoginAt=new Date().toISOString(),Kn(o);const d={user:r.user,isAuthenticated:!0,isLoading:!1};return localStorage.setItem(ns,JSON.stringify(d)),{success:!0,user:r.user}},logout:()=>{localStorage.removeItem(ns)},updatePreferences:async(u,n)=>{const o=Ot.getAuthState();if(!o.user||o.user.id!==u)return!1;const r=Ks(),d=r[o.user.email];if(!d)return!1;d.user.preferences={...d.user.preferences,...n},Kn(r);const f={user:d.user,isAuthenticated:!0,isLoading:!1};return localStorage.setItem(ns,JSON.stringify(f)),!0},updateProfile:async(u,n)=>{const o=Ot.getAuthState();if(!o.user||o.user.id!==u)return{success:!1,error:"Not authorized"};const r=Ks(),d=o.user.email,f=r[d];if(!f)return{success:!1,error:"User not found"};if(n.email&&n.email.toLowerCase()!==d){if(r[n.email.toLowerCase()])return{success:!1,error:"Email already in use"};delete r[d],f.user.email=n.email.toLowerCase(),r[n.email.toLowerCase()]=f}n.name&&(f.user.name=n.name),Kn(r);const m={user:f.user,isAuthenticated:!0,isLoading:!1};return localStorage.setItem(ns,JSON.stringify(m)),{success:!0}},upgradePlan:async(u,n)=>{const o=Ot.getAuthState();if(!o.user||o.user.id!==u)return!1;const r=Ks(),d=r[o.user.email];if(!d)return!1;d.user.plan=n,d.user.planExpiresAt=new Date(Date.now()+365*24*60*60*1e3).toISOString(),Kn(r);const f={user:d.user,isAuthenticated:!0,isLoading:!1};return localStorage.setItem(ns,JSON.stringify(f)),!0}},O0=y.createContext(void 0),iy=({children:u})=>{const[n,o]=y.useState({user:null,isAuthenticated:!1,isLoading:!0});y.useEffect(()=>{const C=Ot.getAuthState();o(C)},[]);const r=y.useCallback(async(C,w)=>{o(k=>({...k,isLoading:!0}));const N=await Ot.login(C,w);return N.success&&N.user?(o({user:N.user,isAuthenticated:!0,isLoading:!1}),{success:!0}):(o(k=>({...k,isLoading:!1})),{success:!1,error:N.error})},[]),d=y.useCallback(async(C,w,N)=>{o(B=>({...B,isLoading:!0}));const k=await Ot.register(C,w,N);return k.success&&k.needsVerification?(o(B=>({...B,isLoading:!1})),{success:!0,needsVerification:!0}):k.success&&k.user?(o({user:k.user,isAuthenticated:!0,isLoading:!1}),{success:!0}):(o(B=>({...B,isLoading:!1})),{success:!1,error:k.error})},[]),f=y.useCallback(async C=>{o(N=>({...N,isLoading:!0}));const w=await Ot.verifyEmailCode(C);return w.success&&w.user?(o({user:w.user,isAuthenticated:!0,isLoading:!1}),{success:!0}):(o(N=>({...N,isLoading:!1})),{success:!1,error:w.error})},[]),m=y.useCallback(async()=>await Ot.resendVerificationCode(),[]),p=y.useCallback(()=>{Ot.cancelRegistration()},[]),x=y.useCallback(()=>Ot.getPendingVerification(),[]),b=y.useCallback(()=>{Ot.logout(),o({user:null,isAuthenticated:!1,isLoading:!1})},[]),v=y.useCallback(async C=>{if(!n.user)return!1;const w=await Ot.updatePreferences(n.user.id,C);return w&&o(N=>({...N,user:N.user?{...N.user,preferences:{...N.user.preferences,...C}}:null})),w},[n.user]),j=y.useCallback(async C=>{if(!n.user)return{success:!1,error:"Not logged in"};const w=await Ot.updateProfile(n.user.id,C);if(w.success){const N=Ot.getAuthState();o(N)}return w},[n.user]);return l.jsx(O0.Provider,{value:{...n,login:r,register:d,verifyEmailCode:f,resendVerificationCode:m,cancelRegistration:p,getPendingVerification:x,logout:b,updatePreferences:v,updateProfile:j},children:u})},mu=()=>{const u=y.useContext(O0);if(!u)throw new Error("useAuth must be used within an AuthProvider");return u},ry=({isOpen:u,onClose:n,connectedExchanges:o,onConnect:r,onDisconnect:d})=>{var se;const{user:f,logout:m,updateProfile:p,isAuthenticated:x}=mu(),[b,v]=y.useState("exchanges"),[j,C]=y.useState(""),[w,N]=y.useState(""),[k,B]=y.useState("Binance"),[E,H]=y.useState(!1),[Z,ne]=y.useState((f==null?void 0:f.name)||""),[re,Y]=y.useState(!1);if(!u)return null;const W=["Binance","Coinbase","Kraken","Bybit"],F=()=>{if(!j)return;const I={id:Date.now().toString(),name:k,status:"connected",apiKey:j.substring(0,4)+"****"};r(I),C(""),N("")},G=async()=>{if(!Z.trim()||Z===(f==null?void 0:f.name)){H(!1);return}Y(!0),await p({name:Z.trim()}),Y(!1),H(!1)},z=()=>{m(),n()},D=I=>{switch(I){case"pro":return l.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-neutral-800/30 text-white rounded text-xs",children:[l.jsx(br,{className:"h-3 w-3"})," Pro"]});case"premium":return l.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-neutral-800/30 text-neutral-400 rounded text-xs",children:[l.jsx(lm,{className:"h-3 w-3"})," Premium"]});default:return l.jsx("span",{className:"px-2 py-0.5 bg-gray-800 text-gray-400 rounded text-xs",children:"Free"})}},te=I=>I?new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return l.jsx("div",{className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center backdrop-blur-sm animate-fade-in p-4",children:l.jsxs("div",{className:"bg-[var(--bg-secondary)] border border-[var(--border-color)] w-full max-w-[520px] rounded-xl shadow-2xl flex flex-col max-h-[85vh]",children:[l.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-[var(--border-color)] flex-shrink-0",children:[l.jsxs("h2",{className:"text-white font-bold text-lg flex items-center gap-2",children:[l.jsx($c,{className:"h-6 w-6"}),"Account Settings"]}),l.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:l.jsx(wt,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"flex border-b border-[var(--border-color)] flex-shrink-0",children:[l.jsx("button",{onClick:()=>v("profile"),className:`flex-1 py-3 text-sm font-medium transition-colors ${b==="profile"?"text-white border-b-2 border-[var(--accent-blue)] bg-[var(--bg-panel)]":"text-gray-400 hover:bg-[var(--bg-panel)]"}`,children:"Profile"}),l.jsx("button",{onClick:()=>v("exchanges"),className:`flex-1 py-3 text-sm font-medium transition-colors ${b==="exchanges"?"text-white border-b-2 border-[var(--accent-blue)] bg-[var(--bg-panel)]":"text-gray-400 hover:bg-[var(--bg-panel)]"}`,children:"Exchanges"}),l.jsx("button",{onClick:()=>v("settings"),className:`flex-1 py-3 text-sm font-medium transition-colors ${b==="settings"?"text-white border-b-2 border-[var(--accent-blue)] bg-[var(--bg-panel)]":"text-gray-400 hover:bg-[var(--bg-panel)]"}`,children:"Settings"})]}),l.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[b==="profile"&&!x&&l.jsxs("div",{className:"text-center py-10",children:[l.jsx($c,{className:"h-16 w-16 mx-auto text-gray-600 mb-4"}),l.jsx("h3",{className:"text-white font-semibold mb-2",children:"Not Signed In"}),l.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Sign in to view your profile and settings"}),l.jsx("button",{onClick:n,className:"px-6 py-2 bg-white text-black font-semibold rounded-lg text-sm hover:bg-gray-200 transition-colors",children:"Close"})]}),b==="profile"&&x&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg p-5",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-[var(--accent-blue)] to-purple-600 flex items-center justify-center text-white text-2xl font-bold",children:((se=f==null?void 0:f.name)==null?void 0:se.charAt(0).toUpperCase())||"U"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",value:Z,onChange:I=>ne(I.target.value),className:"bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded px-2 py-1 text-white text-lg font-bold focus:outline-none focus:border-[var(--accent-blue)]",autoFocus:!0,onKeyDown:I=>I.key==="Enter"&&G()}),l.jsx("button",{onClick:G,disabled:re,className:"text-white hover:text-green-300",children:l.jsx(Bl,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>{H(!1),ne((f==null?void 0:f.name)||"")},className:"text-gray-400 hover:text-gray-300",children:l.jsx(wt,{className:"h-4 w-4"})})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-white text-lg font-bold",children:f==null?void 0:f.name}),l.jsx("button",{onClick:()=>H(!0),className:"text-gray-500 hover:text-gray-300",children:l.jsx(su,{className:"h-3 w-3"})})]}),f&&D(f.plan)]}),l.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-1",children:[l.jsx(Qc,{className:"h-3 w-3"}),f==null?void 0:f.email]})]})]}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-color)] grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Member since"}),l.jsx("p",{className:"text-white",children:te(f==null?void 0:f.createdAt)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Last login"}),l.jsx("p",{className:"text-white",children:te(f==null?void 0:f.lastLoginAt)})]})]})]}),(f==null?void 0:f.plan)==="free"&&l.jsx("div",{className:"bg-gradient-to-r from-neutral-900/30 to-neutral-900/30 border border-neutral-700/50 rounded-lg p-5",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center",children:l.jsx(lm,{className:"h-6 w-6 text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-semibold mb-1",children:"Upgrade to Pro"}),l.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Unlock unlimited AI analysis, advanced indicators, and priority support."}),l.jsx("button",{className:"px-4 py-2 bg-white text-black font-semibold rounded-lg text-sm hover:bg-gray-200 transition-colors",children:"View Plans"})]})]})}),l.jsxs("button",{onClick:z,className:"w-full py-3 border border-red-800/50 rounded-lg text-red-400 hover:bg-red-900/20 transition-colors flex items-center justify-center gap-2",children:[l.jsx(pb,{className:"h-4 w-4"}),"Sign Out"]})]}),b==="exchanges"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs uppercase text-gray-500 font-semibold tracking-wider mb-3",children:"Active Connections"}),o.length===0?l.jsx("div",{className:"p-4 bg-[var(--bg-primary)] border border-dashed border-[var(--border-color)] rounded-lg text-center text-gray-500 text-sm",children:"No exchanges connected."}):l.jsx("div",{className:"space-y-2",children:o.map(I=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-white animate-pulse"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white font-medium",children:I.name}),l.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:["API: ",I.apiKey]})]})]}),l.jsx("button",{onClick:()=>d(I.id),className:"text-xs text-red-400 hover:text-red-300 underline",children:"Disconnect"})]},I.id))})]}),l.jsxs("div",{className:"pt-4 border-t border-[var(--border-color)]",children:[l.jsx("h3",{className:"text-white font-medium mb-4",children:"Connect New Exchange"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-400 mb-1.5",children:"Exchange"}),l.jsx("div",{className:"flex gap-2 flex-wrap",children:W.map(I=>l.jsx("button",{onClick:()=>B(I),className:`px-3 py-1.5 rounded text-xs border transition-colors ${k===I?"bg-[var(--accent-blue)] text-white border-transparent":"bg-[var(--bg-primary)] text-gray-400 border-[var(--border-color)] hover:border-gray-500"}`,children:I},I))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-400 mb-1.5",children:"API Key"}),l.jsx("input",{type:"text",value:j,onChange:I=>C(I.target.value),className:"w-full bg-[var(--bg-primary)] border border-[var(--border-color)] rounded px-3 py-2 text-white text-sm focus:outline-none focus:border-[var(--accent-blue)]",placeholder:"Enter your API Key"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-400 mb-1.5",children:"API Secret"}),l.jsx("input",{type:"password",value:w,onChange:I=>N(I.target.value),className:"w-full bg-[var(--bg-primary)] border border-[var(--border-color)] rounded px-3 py-2 text-white text-sm focus:outline-none focus:border-[var(--accent-blue)]",placeholder:"Enter your API Secret"})]}),l.jsxs("div",{className:"bg-neutral-800/20 border border-yellow-700/50 p-3 rounded flex gap-2 items-start",children:[l.jsx(nl,{className:"h-4 w-4 text-neutral-400 flex-shrink-0 mt-0.5"}),l.jsxs("p",{className:"text-xs text-neutral-400/80 leading-relaxed",children:["Your keys are encrypted locally. We only request ",l.jsx("strong",{children:"Read-Only"})," permissions. Never share your private keys."]})]}),l.jsx("button",{onClick:F,disabled:!j,className:"w-full py-2.5 bg-white text-black font-semibold rounded hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Connect Exchange"})]})]})]}),b==="settings"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs uppercase text-gray-500 font-semibold tracking-wider mb-3",children:"Preferences"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center p-3 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm font-medium",children:"Email Notifications"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Receive alerts via email"})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[var(--accent-blue)]"})]})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm font-medium",children:"Sound Alerts"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Play sound on price alerts"})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[var(--accent-blue)]"})]})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm font-medium",children:"Default Timeframe"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Chart loads with this timeframe"})]}),l.jsxs("select",{className:"bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded px-2 py-1 text-sm text-white",children:[l.jsx("option",{children:"1D"}),l.jsx("option",{children:"4H"}),l.jsx("option",{children:"1H"}),l.jsx("option",{children:"15m"})]})]})]})]}),l.jsxs("div",{className:"pt-4 border-t border-[var(--border-color)]",children:[l.jsx("h3",{className:"text-xs uppercase text-gray-500 font-semibold tracking-wider mb-3",children:"Data & Privacy"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("button",{className:"w-full text-left p-3 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg text-sm text-gray-300 hover:bg-[var(--bg-panel)] transition-colors",children:"Export My Data"}),l.jsx("button",{className:"w-full text-left p-3 bg-[var(--bg-primary)] border border-red-900/30 rounded-lg text-sm text-red-400 hover:bg-red-900/10 transition-colors",children:"Delete Account"})]})]})]})]})]})})},oy=({isOpen:u,onClose:n,initialMode:o="login"})=>{const[r,d]=y.useState(o),[f,m]=y.useState(""),[p,x]=y.useState(""),[b,v]=y.useState(""),[j,C]=y.useState(""),[w,N]=y.useState(!1),[k,B]=y.useState(""),[E,H]=y.useState(!1),[Z,ne]=y.useState(!1),[re,Y]=y.useState(["","","","","",""]),[W,F]=y.useState(0),G=y.useRef([]),{login:z,register:D,verifyEmailCode:te,resendVerificationCode:se,cancelRegistration:I,getPendingVerification:pe}=mu();if(y.useEffect(()=>{if(u){const ee=pe();ee&&(m(ee.email),d("verify"))}},[u,pe]),y.useEffect(()=>{if(W>0){const ee=setTimeout(()=>F(W-1),1e3);return()=>clearTimeout(ee)}},[W]),!u)return null;const U=()=>{m(""),x(""),v(""),C(""),B(""),ne(!1),Y(["","","","","",""])},ae=()=>{U(),d(r==="login"?"register":"login")},ce=(ee,xe)=>{var Qe;if(!/^\d*$/.test(xe))return;const Se=[...re];Se[ee]=xe.slice(-1),Y(Se),xe&&ee<5&&((Qe=G.current[ee+1])==null||Qe.focus()),Se.every(ye=>ye)&&Se.join("").length===6&&De(Se.join(""))},de=(ee,xe)=>{var Se;xe.key==="Backspace"&&!re[ee]&&ee>0&&((Se=G.current[ee-1])==null||Se.focus())},we=ee=>{ee.preventDefault();const xe=ee.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if(xe.length===6){const Se=xe.split("");Y(Se),De(xe)}},De=async ee=>{var xe;B(""),H(!0);try{const Se=await te(ee);Se.success?(ne(!0),setTimeout(()=>{n(),U()},1500)):(B(Se.error||"Invalid verification code"),Y(["","","","","",""]),(xe=G.current[0])==null||xe.focus())}catch{B("An unexpected error occurred")}finally{H(!1)}},je=async()=>{var ee;if(!(W>0)){B(""),H(!0);try{const xe=await se();xe.success?(F(60),Y(["","","","","",""]),(ee=G.current[0])==null||ee.focus()):B(xe.error||"Failed to resend code")}catch{B("An unexpected error occurred")}finally{H(!1)}}},Ne=()=>{I(),U(),d("register")},be=async ee=>{ee.preventDefault(),B(""),H(!0);try{if(r==="register"){if(p!==j){B("Passwords do not match"),H(!1);return}if(p.length<6){B("Password must be at least 6 characters"),H(!1);return}const xe=await D(f,p,b);xe.success?xe.needsVerification?(d("verify"),F(60),setTimeout(()=>{var Se;return(Se=G.current[0])==null?void 0:Se.focus()},100)):(ne(!0),setTimeout(()=>{n(),U()},1500)):B(xe.error||"Registration failed")}else{const xe=await z(f,p);xe.success?(ne(!0),setTimeout(()=>{n(),U()},1e3)):B(xe.error||"Login failed")}}catch{B("An unexpected error occurred")}finally{H(!1)}},at=()=>{U(),n()};return l.jsx("div",{className:"fixed inset-0 bg-black/70 z-[100] flex items-center justify-center backdrop-blur-sm animate-fade-in",children:l.jsxs("div",{className:"bg-[var(--bg-secondary)] border border-[var(--border-color)] w-[420px] rounded-xl shadow-2xl overflow-hidden",children:[l.jsxs("div",{className:"relative p-6 pb-4 bg-gradient-to-b from-[#1a1a2e] to-transparent",children:[r==="verify"&&l.jsx("button",{onClick:Ne,className:"absolute top-4 left-4 text-gray-400 hover:text-white transition-colors",children:l.jsx(Pm,{className:"h-5 w-5"})}),l.jsx("button",{onClick:at,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:l.jsx(wt,{className:"h-5 w-5"})}),l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl bg-white flex items-center justify-center",children:l.jsx("span",{className:"text-xl font-bold text-black",children:"TV"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:r==="login"?"Welcome Back":r==="verify"?"Verify Email":"Create Account"}),l.jsx("p",{className:"text-sm text-gray-400",children:r==="login"?"Sign in to continue":r==="verify"?`Code sent to ${f}`:"Join TradeVision today"})]})]})]}),l.jsxs("div",{className:"p-6 pt-2",children:[Z?l.jsxs("div",{className:"py-8 text-center animate-fade-in",children:[l.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-neutral-800 flex items-center justify-center",children:l.jsx(Bl,{className:"h-8 w-8 text-white"})}),l.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:r==="login"?"Welcome back!":r==="verify"?"Email verified!":"Account created!"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Redirecting..."})]}):r==="verify"?l.jsxs("div",{className:"space-y-6 animate-fade-in",children:[k&&l.jsxs("div",{className:"p-3 rounded-lg bg-red-900/30 border border-red-800/50 flex items-center gap-2 animate-fade-in",children:[l.jsx(Gc,{className:"h-4 w-4 text-red-400 flex-shrink-0"}),l.jsx("span",{className:"text-sm text-red-300",children:k})]}),l.jsxs("div",{className:"text-center",children:[l.jsx(Qc,{className:"h-12 w-12 mx-auto mb-3 text-[var(--accent-blue)]"}),l.jsx("p",{className:"text-gray-300 text-sm mb-1",children:"We sent a 6-digit verification code to"}),l.jsx("p",{className:"text-white font-medium",children:f}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Check your inbox and spam folder"})]}),l.jsx("div",{className:"flex justify-center gap-2",onPaste:we,children:re.map((ee,xe)=>l.jsx("input",{ref:Se=>{G.current[xe]=Se},type:"text",inputMode:"numeric",maxLength:1,value:ee,onChange:Se=>ce(xe,Se.target.value),onKeyDown:Se=>de(xe,Se),className:"w-12 h-14 text-center text-2xl font-bold bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg text-white focus:outline-none focus:border-[var(--accent-blue)] transition-colors",disabled:E},xe))}),l.jsx("button",{type:"button",onClick:()=>De(re.join("")),disabled:E||re.some(ee=>!ee),className:"w-full py-3 bg-white text-black font-semibold rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:E?l.jsxs(l.Fragment,{children:[l.jsx(nm,{className:"h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify Email"}),l.jsx("div",{className:"text-center",children:l.jsxs("button",{type:"button",onClick:je,disabled:W>0||E,className:"text-sm text-gray-400 hover:text-white transition-colors disabled:cursor-not-allowed inline-flex items-center gap-1",children:[l.jsx(_l,{className:`h-3 w-3 ${W>0?"":"group-hover:rotate-180 transition-transform"}`}),W>0?`Resend code in ${W}s`:"Resend verification code"]})}),l.jsx("div",{className:"text-center p-3 rounded-lg bg-yellow-900/20 border border-yellow-800/30",children:l.jsx("p",{className:"text-xs text-neutral-400/80",children:" Demo mode: Check browser console for the verification code"})})]}):l.jsxs("form",{onSubmit:be,className:"space-y-4",children:[k&&l.jsxs("div",{className:"p-3 rounded-lg bg-red-900/30 border border-red-800/50 flex items-center gap-2 animate-fade-in",children:[l.jsx(Gc,{className:"h-4 w-4 text-red-400 flex-shrink-0"}),l.jsx("span",{className:"text-sm text-red-300",children:k})]}),r==="register"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-400 mb-1.5 uppercase tracking-wider",children:"Full Name"}),l.jsxs("div",{className:"relative",children:[l.jsx(ev,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),l.jsx("input",{type:"text",value:b,onChange:ee=>v(ee.target.value),placeholder:"John Doe",className:"w-full pl-10 pr-4 py-3 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[var(--accent-blue)] transition-colors",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-400 mb-1.5 uppercase tracking-wider",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(Qc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),l.jsx("input",{type:"email",value:f,onChange:ee=>m(ee.target.value),placeholder:"you@example.com",className:"w-full pl-10 pr-4 py-3 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[var(--accent-blue)] transition-colors",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-400 mb-1.5 uppercase tracking-wider",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(Xc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),l.jsx("input",{type:w?"text":"password",value:p,onChange:ee=>x(ee.target.value),placeholder:"",className:"w-full pl-10 pr-10 py-3 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[var(--accent-blue)] transition-colors",required:!0,minLength:6}),l.jsx("button",{type:"button",onClick:()=>N(!w),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300",children:w?l.jsx(Pg,{className:"h-4 w-4"}):l.jsx(s0,{className:"h-4 w-4"})})]})]}),r==="register"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-400 mb-1.5 uppercase tracking-wider",children:"Confirm Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(Xc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),l.jsx("input",{type:w?"text":"password",value:j,onChange:ee=>C(ee.target.value),placeholder:"",className:"w-full pl-10 pr-4 py-3 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[var(--accent-blue)] transition-colors",required:!0,minLength:6})]})]}),r==="login"&&l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"button",className:"text-xs text-[var(--accent-blue)] hover:underline",children:"Forgot password?"})}),l.jsx("button",{type:"submit",disabled:E,className:"w-full py-3 bg-white text-black font-semibold rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:E?l.jsxs(l.Fragment,{children:[l.jsx(nm,{className:"h-4 w-4 animate-spin"}),r==="login"?"Signing in...":"Sending code..."]}):r==="login"?"Sign In":"Create Account"})]}),!Z&&r!=="verify"&&l.jsx("div",{className:"mt-6 pt-4 border-t border-[var(--border-color)] text-center",children:l.jsxs("p",{className:"text-sm text-gray-400",children:[r==="login"?"Don't have an account?":"Already have an account?",l.jsx("button",{onClick:ae,className:"ml-1 text-white hover:text-[var(--accent-blue)] font-medium transition-colors",children:r==="login"?"Sign up":"Sign in"})]})}),!Z&&r==="login"&&l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-[var(--border-color)]"})}),l.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:l.jsx("span",{className:"px-2 bg-[var(--bg-secondary)] text-gray-500",children:"or continue with"})})]}),l.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[l.jsxs("button",{type:"button",className:"flex items-center justify-center gap-2 py-2.5 border border-[var(--border-color)] rounded-lg text-sm text-gray-300 hover:bg-[var(--bg-panel)] transition-colors",children:[l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),l.jsxs("button",{type:"button",className:"flex items-center justify-center gap-2 py-2.5 border border-[var(--border-color)] rounded-lg text-sm text-gray-300 hover:bg-[var(--bg-panel)] transition-colors",children:[l.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"GitHub"]})]})]})]})]})})},Vc=[{symbol:"BTCUSD",name:"Bitcoin",exchange:"Binance",type:"crypto"},{symbol:"ETHUSD",name:"Ethereum",exchange:"Binance",type:"crypto"},{symbol:"SOLUSD",name:"Solana",exchange:"Binance",type:"crypto"},{symbol:"XRPUSD",name:"XRP",exchange:"Binance",type:"crypto"},{symbol:"BNBUSD",name:"BNB",exchange:"Binance",type:"crypto"},{symbol:"ADAUSD",name:"Cardano",exchange:"Binance",type:"crypto"},{symbol:"DOGEUSD",name:"Dogecoin",exchange:"Binance",type:"crypto"},{symbol:"AVAXUSD",name:"Avalanche",exchange:"Binance",type:"crypto"},{symbol:"DOTUSD",name:"Polkadot",exchange:"Binance",type:"crypto"},{symbol:"MATICUSD",name:"Polygon",exchange:"Binance",type:"crypto"},{symbol:"LINKUSD",name:"Chainlink",exchange:"Binance",type:"crypto"},{symbol:"UNIUSD",name:"Uniswap",exchange:"Binance",type:"crypto"},{symbol:"ATOMUSD",name:"Cosmos",exchange:"Binance",type:"crypto"},{symbol:"LTCUSD",name:"Litecoin",exchange:"Binance",type:"crypto"},{symbol:"NEARUSD",name:"NEAR Protocol",exchange:"Binance",type:"crypto"},{symbol:"ARBUSD",name:"Arbitrum",exchange:"Binance",type:"crypto"},{symbol:"OPUSD",name:"Optimism",exchange:"Binance",type:"crypto"},{symbol:"APTUSD",name:"Aptos",exchange:"Binance",type:"crypto"},{symbol:"SUIUSD",name:"Sui",exchange:"Binance",type:"crypto"},{symbol:"PEPEUSD",name:"Pepe",exchange:"Binance",type:"crypto"}],cy=({isOpen:u,onClose:n,onSelect:o,currentSymbol:r})=>{const[d,f]=y.useState(""),[m,p]=y.useState(0),[x,b]=y.useState(()=>{const D=localStorage.getItem("tv_favorites");return D?JSON.parse(D):["BTCUSD","ETHUSD"]}),[v,j]=y.useState(!1),[C,w]=y.useState(0),N=y.useRef(0),k=y.useRef(0),B=y.useRef(null),E=y.useRef(null),H=y.useCallback(D=>{D.target.closest(".sheet-handle")&&(j(!0),N.current=D.touches[0].clientY,k.current=0)},[]),Z=y.useCallback(D=>{if(!v)return;const te=D.touches[0].clientY-N.current;te>0&&(k.current=te,w(te))},[v]),ne=y.useCallback(()=>{v&&(j(!1),k.current>100&&n(),w(0),k.current=0)},[v,n]);y.useEffect(()=>{var D;u&&((D=B.current)==null||D.focus(),f(""),p(0))},[u]),y.useEffect(()=>{localStorage.setItem("tv_favorites",JSON.stringify(x))},[x]);const re=d?Vc.filter(D=>D.symbol.toLowerCase().includes(d.toLowerCase())||D.name.toLowerCase().includes(d.toLowerCase())):Vc,Y=Vc.filter(D=>x.includes(D.symbol)),W=D=>{const te=d?re:[...Y,...re.filter(se=>!x.includes(se.symbol))];switch(D.key){case"ArrowDown":D.preventDefault(),p(se=>Math.min(se+1,te.length-1));break;case"ArrowUp":D.preventDefault(),p(se=>Math.max(se-1,0));break;case"Enter":D.preventDefault(),te[m]&&F(te[m].symbol);break;case"Escape":n();break}},F=D=>{o(D),n()},G=(D,te)=>{te.stopPropagation(),b(se=>se.includes(D)?se.filter(I=>I!==D):[...se,D])};if(!u)return null;const z=d?re:[...Y,...re.filter(D=>!x.includes(D.symbol))];return l.jsx("div",{className:"fixed inset-0 bg-black/60 z-[100] flex items-end sm:items-start sm:justify-center sm:pt-20 backdrop-blur-sm animate-fade-in",onClick:n,children:l.jsxs("div",{className:"bg-[var(--bg-secondary)] border border-[var(--border-color)] w-full sm:w-[500px] rounded-t-2xl sm:rounded-xl shadow-2xl overflow-hidden max-h-[90vh] flex flex-col",onClick:D=>D.stopPropagation(),style:{transform:`translateY(${C}px)`,transition:v?"none":"transform 0.2s ease-out"},onTouchStart:H,onTouchMove:Z,onTouchEnd:ne,children:[l.jsx("div",{className:"sheet-handle sm:hidden flex justify-center pt-3 pb-1 cursor-grab active:cursor-grabbing",children:l.jsx("div",{className:"w-10 h-1 bg-[var(--border-color)] rounded-full"})}),l.jsxs("div",{className:"p-3 sm:p-4 border-b border-[var(--border-color)]",children:[l.jsxs("div",{className:"relative",children:[l.jsx(xr,{className:"absolute left-3 sm:left-4 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),l.jsx("input",{ref:B,type:"text",value:d,onChange:D=>{f(D.target.value),p(0)},onKeyDown:W,placeholder:"Search symbols...",className:"w-full pl-10 sm:pl-12 pr-10 py-3 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[var(--accent-blue)] transition-colors text-base sm:text-lg"}),d&&l.jsx("button",{onClick:()=>f(""),className:"absolute right-3 sm:right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white p-1 touch-active",children:l.jsx(wt,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"hidden sm:flex gap-2 mt-3 text-xs text-gray-500",children:[l.jsx("span",{className:"px-2 py-1 bg-[var(--bg-primary)] rounded",children:" Navigate"}),l.jsx("span",{className:"px-2 py-1 bg-[var(--bg-primary)] rounded",children:"Enter Select"}),l.jsx("span",{className:"px-2 py-1 bg-[var(--bg-primary)] rounded",children:"Esc Close"})]})]}),l.jsxs("div",{ref:E,className:"flex-1 overflow-y-auto overscroll-contain max-h-[60vh] sm:max-h-[400px]",children:[!d&&Y.length>0&&l.jsx("div",{className:"px-4 py-2 text-xs uppercase text-gray-500 font-semibold tracking-wider bg-[var(--bg-panel)] sticky top-0",children:"Favorites"}),z.length===0?l.jsxs("div",{className:"p-8 text-center text-gray-500",children:[l.jsx(xr,{className:"h-10 w-10 mx-auto mb-2 opacity-30"}),l.jsx("p",{children:"No symbols found"})]}):z.map((D,te)=>{const se=x.includes(D.symbol),I=!d&&te===Y.length&&Y.length>0,pe=te===m,U=D.symbol===r;return l.jsxs(ll.Fragment,{children:[I&&l.jsx("div",{className:"px-4 py-2 text-xs uppercase text-gray-500 font-semibold tracking-wider bg-[var(--bg-panel)] sticky top-0",children:"All Symbols"}),l.jsxs("div",{onClick:()=>F(D.symbol),className:`flex items-center justify-between px-3 sm:px-4 py-3 cursor-pointer transition-colors touch-active ${pe?"bg-[var(--accent-blue)]/20 border-l-2 border-[var(--accent-blue)]":"border-l-2 border-transparent hover:bg-[var(--bg-panel)]"} ${U?"bg-[var(--bg-panel)]":""}`,children:[l.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[l.jsx("button",{onClick:ae=>G(D.symbol,ae),className:`p-1 ${se?"text-neutral-400":"text-gray-600 hover:text-gray-400"}`,children:l.jsx(br,{className:`h-4 w-4 ${se?"fill-current":""}`})}),l.jsx("div",{className:"w-8 h-8 rounded-full bg-[var(--bg-primary)] flex items-center justify-center flex-shrink-0",children:l.jsx(wa,{className:"h-4 w-4 text-gray-400"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-white font-semibold text-sm sm:text-base",children:D.symbol}),U&&l.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-[var(--accent-blue)] rounded text-white flex-shrink-0",children:"Active"})]}),l.jsx("span",{className:"text-xs sm:text-sm text-gray-500 truncate block",children:D.name})]})]}),l.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[l.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 uppercase",children:D.exchange}),l.jsx("div",{className:"text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 bg-[var(--bg-primary)] rounded text-gray-400 mt-1",children:D.type})]})]})]},D.symbol)})]}),l.jsx("div",{className:"sm:hidden p-3 border-t border-[var(--border-color)] bg-[var(--bg-panel)] safe-area-bottom",children:l.jsx("button",{onClick:n,className:"w-full py-3 bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded-xl text-[var(--text-secondary)] font-medium touch-active",children:"Cancel"})})]})})},uy=[{category:"Navigation",items:[{keys:["/","Ctrl","K"],description:"Search symbols"},{keys:["1-6"],description:"Switch timeframe (1m-1D)"},{keys:["Esc"],description:"Close panel / Deselect"}]},{category:"Drawing Tools",items:[{keys:["V"],description:"Select tool (cursor)"},{keys:["C"],description:"Crosshair"},{keys:["T"],description:"Trendline"},{keys:["H"],description:"Horizontal line"},{keys:["R"],description:"Rectangle"},{keys:["F"],description:"Fibonacci retracement"},{keys:["Delete"],description:"Delete selected drawing"}]},{category:"Chart Actions",items:[{keys:["Ctrl","Z"],description:"Undo"},{keys:["Ctrl","Shift","Z"],description:"Redo"},{keys:["Ctrl","S"],description:"Save workspace"},{keys:["Space"],description:"Toggle replay play/pause"},{keys:["+","-"],description:"Zoom in/out"}]},{category:"Panels",items:[{keys:["A"],description:"Open alerts manager"},{keys:["I"],description:"Toggle AI assistant"},{keys:["W"],description:"Toggle watchlist"},{keys:["?"],description:"Show shortcuts"}]}],dy=({isOpen:u,onClose:n})=>u?l.jsx("div",{className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center backdrop-blur-sm animate-fade-in",onClick:n,children:l.jsxs("div",{className:"bg-[var(--bg-secondary)] border border-[var(--border-color)] w-[600px] max-h-[80vh] rounded-xl shadow-2xl overflow-hidden",onClick:o=>o.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-[var(--border-color)] bg-[var(--bg-panel)]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-[var(--bg-primary)] flex items-center justify-center",children:l.jsx(au,{className:"h-5 w-5 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-white font-bold",children:"Keyboard Shortcuts"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Master the keyboard for faster trading"})]})]}),l.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:l.jsx(wt,{className:"h-5 w-5"})})]}),l.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-80px)]",children:l.jsx("div",{className:"grid grid-cols-2 gap-6",children:uy.map(o=>l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs uppercase text-gray-500 font-semibold tracking-wider mb-3",children:o.category}),l.jsx("div",{className:"space-y-2",children:o.items.map((r,d)=>l.jsxs("div",{className:"flex items-center justify-between py-2 px-3 rounded bg-[var(--bg-primary)] border border-[var(--border-color)]",children:[l.jsx("span",{className:"text-sm text-gray-300",children:r.description}),l.jsx("div",{className:"flex gap-1",children:r.keys.map((f,m)=>l.jsxs(ll.Fragment,{children:[l.jsx("kbd",{className:"px-2 py-1 bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded text-xs text-white font-mono min-w-[24px] text-center",children:f}),m<r.keys.length-1&&r.keys.length>1&&l.jsx("span",{className:"text-gray-600",children:"+"})]},m))})]},d))})]},o.category))})}),l.jsx("div",{className:"p-4 border-t border-[var(--border-color)] bg-[var(--bg-panel)]",children:l.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Press ",l.jsx("kbd",{className:"px-1.5 py-0.5 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded text-white",children:"?"})," anywhere to toggle this panel"]})})]})}):null,fy=({status:u,showReconnect:n=!0,onReconnect:o,position:r="bottom-right",showOnlyWhenOffline:d=!0})=>{const[f,m]=y.useState(navigator.onLine),[p,x]=y.useState(!1),[b,v]=y.useState(!1),j=u??(f?"connected":"disconnected");y.useEffect(()=>{const B=()=>{m(!0),v(!0),setTimeout(()=>v(!1),3e3)},E=()=>{m(!1),v(!0)};return window.addEventListener("online",B),window.addEventListener("offline",E),()=>{window.removeEventListener("online",B),window.removeEventListener("offline",E)}},[]);const C=async()=>{x(!0);try{await fetch("https://api.binance.com/api/v3/ping",{mode:"no-cors",cache:"no-store"}),m(!0),o==null||o()}catch{m(!1)}finally{x(!1)}},w={"top-left":"top-4 left-4","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-right":"bottom-4 right-4"};if(d&&j==="connected"&&!b)return null;const k=(()=>{switch(j){case"connected":return{icon:l.jsx(sv,{className:"w-4 h-4"}),text:"Connected",bgColor:"bg-white/10",borderColor:"border-green-500/30",textColor:"text-white",iconColor:"text-green-500"};case"connecting":return{icon:l.jsx(_l,{className:"w-4 h-4 animate-spin"}),text:"Connecting...",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/30",textColor:"text-neutral-400",iconColor:"text-yellow-500"};case"disconnected":return{icon:l.jsx(om,{className:"w-4 h-4"}),text:"Disconnected",bgColor:"bg-red-500/10",borderColor:"border-red-500/30",textColor:"text-red-400",iconColor:"text-red-500"};case"error":return{icon:l.jsx(om,{className:"w-4 h-4"}),text:"Connection Error",bgColor:"bg-red-500/10",borderColor:"border-red-500/30",textColor:"text-red-400",iconColor:"text-red-500"}}})();return l.jsx("div",{className:`fixed ${w[r]} z-50 animate-fade-in`,role:"status","aria-live":"polite",children:l.jsxs("div",{className:`flex items-center gap-3 px-4 py-2.5 rounded-xl ${k.bgColor} border ${k.borderColor} backdrop-blur-sm shadow-lg`,children:[l.jsx("div",{className:k.iconColor,children:k.icon}),l.jsx("span",{className:`text-sm font-medium ${k.textColor}`,children:k.text}),n&&(j==="disconnected"||j==="error")&&l.jsx("button",{onClick:C,disabled:p,className:`ml-2 px-3 py-1 rounded-lg text-xs font-medium transition-all
                            ${p?"bg-gray-500/20 text-gray-400 cursor-not-allowed":"bg-[var(--accent-blue)] hover:bg-[var(--accent-blue)]/80 text-white"}`,children:p?l.jsx(_l,{className:"w-3 h-3 animate-spin"}):"Retry"}),j==="connected"&&b&&l.jsx("button",{onClick:()=>v(!1),className:"ml-2 text-white/60 hover:text-white transition-colors",children:""})]})})},hy=[{id:"cursor",icon:l.jsx(r0,{className:"w-5 h-5"}),label:"Select",shortLabel:"Select"},{id:"crosshair",icon:l.jsx(tu,{className:"w-5 h-5"}),label:"Crosshair",shortLabel:"Cross"},{id:"trendline",icon:l.jsx(wa,{className:"w-5 h-5"}),label:"Trend Line",shortLabel:"Trend"},{id:"horizontal",icon:l.jsx(lu,{className:"w-5 h-5"}),label:"Horizontal",shortLabel:"H-Line"},{id:"vertical",icon:l.jsx(f0,{className:"w-5 h-5"}),label:"Vertical",shortLabel:"V-Line"},{id:"rectangle",icon:l.jsx(h0,{className:"w-5 h-5"}),label:"Rectangle",shortLabel:"Rect"},{id:"fibonacci",icon:l.jsx(Ig,{className:"w-5 h-5"}),label:"Fibonacci",shortLabel:"Fib"},{id:"text",icon:l.jsx(m0,{className:"w-5 h-5"}),label:"Text",shortLabel:"Text"}],my=({selectedTool:u,onSelectTool:n,onDone:o,onClearAll:r,onUndo:d,onRedo:f,canUndo:m=!1,canRedo:p=!1})=>l.jsx("div",{className:"bg-[var(--bg-panel)] border-t border-[var(--border-color)] safe-area-bottom",children:l.jsxs("div",{className:"flex items-center gap-1 px-2 py-2 overflow-x-auto scrollbar-hide",children:[hy.map(x=>l.jsxs("button",{onClick:()=>n(x.id),className:`flex flex-col items-center gap-1 px-3 py-2 rounded-xl min-w-[56px] transition-all touch-active ${u===x.id?"bg-[var(--accent-primary)] text-white shadow-lg":"bg-[var(--bg-secondary)] text-[var(--text-secondary)] hover:text-white border border-[var(--border-color)]"}`,children:[x.icon,l.jsx("span",{className:"text-[10px] font-medium whitespace-nowrap",children:x.shortLabel||x.label})]},x.id)),l.jsx("div",{className:"flex-1 min-w-[8px]"}),l.jsxs("div",{className:"flex items-center gap-1 pl-2 border-l border-[var(--border-color)]",children:[d&&l.jsx("button",{onClick:d,disabled:!m,className:`p-2.5 rounded-xl transition-all touch-active ${m?"bg-[var(--bg-secondary)] text-[var(--text-secondary)] hover:text-white border border-[var(--border-color)]":"bg-[var(--bg-secondary)]/50 text-[var(--text-secondary)]/30 border border-transparent cursor-not-allowed"}`,children:l.jsx(p0,{className:"w-5 h-5"})}),f&&l.jsx("button",{onClick:f,disabled:!p,className:`p-2.5 rounded-xl transition-all touch-active ${p?"bg-[var(--bg-secondary)] text-[var(--text-secondary)] hover:text-white border border-[var(--border-color)]":"bg-[var(--bg-secondary)]/50 text-[var(--text-secondary)]/30 border border-transparent cursor-not-allowed"}`,children:l.jsx(d0,{className:"w-5 h-5"})}),r&&l.jsx("button",{onClick:r,className:"p-2.5 rounded-xl bg-[var(--accent-red)]/10 text-[var(--accent-red)] hover:bg-[var(--accent-red)]/20 border border-[var(--accent-red)]/30 transition-all touch-active",children:l.jsx(os,{className:"w-5 h-5"})}),l.jsxs("button",{onClick:o,className:"px-4 py-2.5 rounded-xl bg-[var(--accent-primary)] text-white font-semibold shadow-lg shadow-[var(--accent-primary)]/25 transition-all touch-active flex items-center gap-1.5",children:[l.jsx(Bl,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm",children:"Done"})]})]})]})}),it=({className:u="",width:n,height:o,rounded:r="md",animate:d=!0})=>{const f={none:"",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",full:"rounded-full"},m={width:typeof n=="number"?`${n}px`:n,height:typeof o=="number"?`${o}px`:o};return l.jsx("div",{className:`
                bg-gradient-to-r from-[var(--bg-secondary)] via-[var(--bg-panel)] to-[var(--bg-secondary)]
                ${f[r]}
                ${d?"animate-shimmer":""}
                ${u}
            `,style:{...m,backgroundSize:"200% 100%",animation:d?"shimmer 1.5s infinite":"none"}})},B0=({className:u=""})=>l.jsxs("div",{className:`flex flex-col h-full w-full p-4 ${u}`,children:[l.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[l.jsx(it,{width:120,height:32}),l.jsx(it,{width:80,height:24}),l.jsx(it,{width:60,height:24}),l.jsx(it,{width:60,height:24}),l.jsx(it,{width:60,height:24})]}),l.jsxs("div",{className:"flex-1 relative",children:[l.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-16 flex flex-col justify-between py-4",children:[...Array(6)].map((n,o)=>l.jsx(it,{width:50,height:12},o))}),l.jsx("div",{className:"ml-20 h-full flex items-end gap-1 pb-8",children:[...Array(40)].map((n,o)=>l.jsx("div",{className:"flex-1 flex flex-col items-center justify-end",children:l.jsx(it,{width:"60%",height:`${20+Math.random()*60}%`,rounded:"sm"})},o))}),l.jsx("div",{className:"absolute bottom-0 left-20 right-0 flex justify-between",children:[...Array(6)].map((n,o)=>l.jsx(it,{width:40,height:12},o))})]}),l.jsx("div",{className:"h-16 flex items-end gap-1 mt-2 ml-20",children:[...Array(40)].map((n,o)=>l.jsx(it,{width:"100%",height:`${10+Math.random()*90}%`,rounded:"sm",className:"flex-1"},o))})]}),py=({itemCount:u=8})=>l.jsxs("div",{className:"flex flex-col gap-2 p-3",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx(it,{width:80,height:20}),l.jsx(it,{width:24,height:24,rounded:"full"})]}),[...Array(u)].map((n,o)=>l.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-[var(--bg-secondary)]",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(it,{width:32,height:32,rounded:"full"}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx(it,{width:60,height:14}),l.jsx(it,{width:40,height:10})]})]}),l.jsxs("div",{className:"flex flex-col items-end gap-1",children:[l.jsx(it,{width:70,height:14}),l.jsx(it,{width:50,height:12})]})]},o))]}),xy=()=>l.jsxs("div",{className:"flex flex-col items-center gap-4 p-3 w-14",children:[[...Array(6)].map((u,n)=>l.jsx(it,{width:36,height:36,rounded:"lg"},n)),l.jsx("div",{className:"flex-1"}),l.jsx(it,{width:36,height:36,rounded:"full"})]}),gy=()=>l.jsxs("div",{className:"flex items-center justify-between h-12 px-4 border-b border-[var(--border-color)]",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(it,{width:100,height:28}),l.jsx(it,{width:60,height:24}),l.jsx("div",{className:"flex gap-1",children:[...Array(6)].map((u,n)=>l.jsx(it,{width:32,height:24,rounded:"sm"},n))})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(it,{width:32,height:32,rounded:"md"}),l.jsx(it,{width:32,height:32,rounded:"md"}),l.jsx(it,{width:60,height:28,rounded:"md"}),l.jsx(it,{width:80,height:32,rounded:"md"})]})]}),by=()=>l.jsxs("div",{className:"h-screen w-screen flex flex-col bg-[var(--bg-primary)]",children:[l.jsx(gy,{}),l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[l.jsx(xy,{}),l.jsx("div",{className:"flex-1",children:l.jsx(B0,{})}),l.jsx("div",{className:"w-64 border-l border-[var(--border-color)]",children:l.jsx(py,{})})]})]}),vy=`
@keyframes shimmer {
    0% {
        background-position: 200% 0;
    }
    100% {
        background-position: -200% 0;
    }
}
`;if(typeof document<"u"){const u="skeleton-shimmer-styles";if(!document.getElementById(u)){const n=document.createElement("style");n.id=u,n.textContent=vy,document.head.appendChild(n)}}const yy=u=>u.type==="HORIZONTAL",wy=u=>u.type==="ZONE",_0=u=>({"1m":60,"5m":300,"15m":900,"1H":3600,"4H":14400,"1D":86400})[u],L0={"1m":"1m","5m":"5m","15m":"15m","1H":"1h","4H":"4h","1D":"1d"},pu=u=>{const n=u.toUpperCase();return n.endsWith("USDT")?n:n.endsWith("USD")?n.replace("USD","USDT"):n+"USDT"},km=(u,n,o=1e3)=>{let d={BTCUSD:95e3,ETHUSD:3500,SOLUSD:220,XRPUSD:2.3,BNBUSD:700,ADAUSD:1.1,DOGEUSD:.42,DOTUSD:9,MATICUSD:.5,AVAXUSD:50,LINKUSD:25,LTCUSD:120,UNIUSD:15,ATOMUSD:12,NEARUSD:7}[u.toUpperCase()]||Math.random()*100+10;const f=[],m=_0(n),p=Math.floor(Date.now()/1e3);let x=p-p%m-o*m;for(let b=0;b<o;b++){const v=u==="BTCUSD"?.005:.01,j=(Math.random()-.5)*v,C=d,w=d*(1+j),N=Math.max(C,w),k=Math.min(C,w),B=N*(1+Math.random()*v*.5),E=k*(1-Math.random()*v*.5);f.push({time:x,open:C,high:B,low:E,close:w}),d=w,x+=m}return f},jy=async(u,n)=>{const o=pu(u),r=L0[n];console.log(`Fetching data for ${u} -> ${o}`);const d=new AbortController,f=setTimeout(()=>d.abort(),1e4),m=3;let p="";for(let x=1;x<=m;x++)try{const b=await fetch(`https://api.binance.com/api/v3/klines?symbol=${o}&interval=${r}&limit=500`,{signal:d.signal});if(clearTimeout(f),!b.ok)throw new Error(`Binance API Error: ${b.status} ${b.statusText}`);const v=await b.json();if(!v||v.length===0)return console.warn(`No data returned for ${o}, using mock data`),{data:km(u,n),source:"mock",error:"No data available from exchange"};const j=v.map(C=>({time:C[0]/1e3,open:parseFloat(C[1]),high:parseFloat(C[2]),low:parseFloat(C[3]),close:parseFloat(C[4]),volume:parseFloat(C[5])}));return console.log(` Fetched ${j.length} candles for ${u} (attempt ${x})`),{data:j,source:"live"}}catch(b){p=b.message||"Unknown error",b.name==="AbortError"?(p="Request timed out",console.warn(`Attempt ${x}/${m}: Request timed out`)):console.warn(`Attempt ${x}/${m}: ${p}`),x<m&&await new Promise(v=>setTimeout(v,1e3*x))}return clearTimeout(f),console.warn(`All ${m} attempts failed, using mock data. Last error: ${p}`),{data:km(u,n),source:"mock",error:p}},Ny=(u,n,o)=>{const r=pu(u).toLowerCase(),d=L0[n],f=`wss://stream.binance.com:9443/ws/${r}@kline_${d}`;let m=null,p=!1;try{m=new WebSocket(f),m.onopen=()=>{p||console.log(`Connected to Binance WS for ${u}`)},m.onmessage=x=>{if(p)return;const b=JSON.parse(x.data);if(b.e==="kline"){const v=b.k,j={time:v.t/1e3,open:parseFloat(v.o),high:parseFloat(v.h),low:parseFloat(v.l),close:parseFloat(v.c),volume:parseFloat(v.v)};o(j)}},m.onerror=()=>{}}catch(x){console.error("WebSocket setup failed:",x)}return()=>{p=!0,m&&(m.close(),m=null)}},Sy=(u,n)=>{const o="wss://stream.binance.com:9443/ws/!miniTicker@arr";let r=null,d=null;const f=new Set(u.map(m=>pu(m)));try{r=new WebSocket(o),r.onmessage=m=>{const p=JSON.parse(m.data);if(Array.isArray(p)){const x={};p.forEach(b=>{if(f.has(b.s)){const v=b.s.replace("USDT","USD"),j=parseFloat(b.c),C=parseFloat(b.o);let w=0;C!==0&&(w=(j-C)/C*100),x[v]={price:j,change:w}}}),n(x)}},r.onerror=()=>{d||(d=setInterval(()=>{const m={};u.forEach(p=>{const x=(Math.random()-.5)*.5;m[p]={price:0,change:x}})},2e3))}}catch(m){console.error("MultiTicker WS failed",m)}return()=>{r&&r.close(),d&&clearInterval(d)}},ky=async(u,n={})=>{const{format:o="png",quality:r=.95}=n,d=document.createElement("canvas"),f=u.getBoundingClientRect(),m=window.devicePixelRatio||1;d.width=f.width*m,d.height=f.height*m;const p=d.getContext("2d");if(!p)throw new Error("Could not get canvas context");p.scale(m,m),p.fillStyle=getComputedStyle(u).backgroundColor||"#131722",p.fillRect(0,0,f.width,f.height);const x=u.querySelectorAll("canvas");for(const v of x){const j=v.getBoundingClientRect(),C=j.left-f.left,w=j.top-f.top;try{p.drawImage(v,C,w,j.width,j.height)}catch(N){console.warn("Could not draw canvas:",N)}}if(n.includeWatermark){const v=n.watermarkText||"TradeVision AI",j=16,C=28;p.font="bold 14px Inter, system-ui, sans-serif";const N=p.measureText(v).width+j*2,k=f.width-N-12,B=f.height-C-12;p.fillStyle="rgba(0, 0, 0, 0.6)",p.beginPath(),p.roundRect(k,B,N,C,6),p.fill(),p.fillStyle="rgba(255, 255, 255, 0.9)",p.textAlign="center",p.textBaseline="middle",p.fillText(v,k+N/2,B+C/2);const E=new Date().toLocaleString();p.font="10px Inter, system-ui, sans-serif",p.fillStyle="rgba(255, 255, 255, 0.5)",p.textAlign="right",p.textBaseline="bottom",p.fillText(E,f.width-12,B-4)}const b=o==="jpeg"?"image/jpeg":o==="webp"?"image/webp":"image/png";return d.toDataURL(b,r)},Cy=async(u,n={})=>{const{filename:o=`tradevision-chart-${Date.now()}`,format:r="png"}=n;try{const d=await ky(u,n),f=document.createElement("a");f.download=`${o}.${r}`,f.href=d,f.click()}catch(d){throw console.error("Failed to download chart:",d),d}},My=async(u,n,o,r={})=>{const d=new Date().toISOString().split("T")[0],f=`${n}-${o}-${d}`;await Cy(u,{...r,filename:f,includeWatermark:!0,watermarkText:`${n}  ${o}  TradeVision AI`})},Fn=()=>"Notification"in window,Ay=()=>Fn()?Notification.permission:"unsupported",Ty=async()=>{if(!Fn())return console.warn("Push notifications are not supported in this browser"),"unsupported";try{return await Notification.requestPermission()}catch(u){return console.error("Error requesting notification permission:",u),"denied"}},Dy=u=>{if(!Fn()||Notification.permission!=="granted")return null;try{const n=new Notification(u.title,{body:u.body,icon:u.icon||"/icons/icon-192x192.png",tag:u.tag,requireInteraction:u.requireInteraction??!1,data:u.data});return u.onClick&&(n.onclick=()=>{var o;window.focus(),(o=u.onClick)==null||o.call(u),n.close()}),u.requireInteraction,n}catch(n){return console.error("Error sending notification:",n),null}},Ey=(u,n,o,r)=>{const d=r==="above"?" crossed above":" crossed below";return Dy({title:` Price Alert: ${u}`,body:`${u} ${d} $${n.toLocaleString(void 0,{minimumFractionDigits:2})}!
Current: $${o.toLocaleString(void 0,{minimumFractionDigits:2})}`,tag:`price-alert-${u}`,requireInteraction:!0,vibrate:[200,100,200,100,200],data:{symbol:u,targetPrice:n,currentPrice:o,condition:r},onClick:()=>{window.focus()}})},zy=()=>{const[u,n]=y.useState("default"),[o,r]=y.useState(!1);y.useEffect(()=>{r(Fn()),n(Ay())},[]);const d=y.useCallback(async()=>{const m=await Ty();n(m)},[]),f=y.useCallback((m,p,x,b)=>{Ey(m,p,x,b)},[]);return{isSupported:o,permission:u,requestPermission:d,sendAlert:f}},Oy=()=>{if(!Fn()||Notification.permission!=="default")return!1;const u=localStorage.getItem("tv_notification_prompt_dismissed");if(u){const n=parseInt(u,10),o=10080*60*1e3;if(Date.now()-n<o)return!1}return!0},By=()=>{localStorage.setItem("tv_notification_prompt_dismissed",Date.now().toString())},_y=({isVisible:u,onEnable:n,onDismiss:o})=>u?l.jsx("div",{className:"fixed top-16 left-1/2 transform -translate-x-1/2 z-50 animate-fade-in",children:l.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl shadow-2xl p-4 flex items-center gap-4 max-w-md mx-4",children:[l.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:l.jsx(Ps,{className:"w-5 h-5 text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"text-white font-semibold text-sm",children:"Enable Push Notifications"}),l.jsx("p",{className:"text-white/80 text-xs mt-0.5",children:"Get instant alerts when your price targets are hit"})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:n,className:"px-3 py-1.5 bg-white text-blue-600 rounded-lg text-sm font-medium hover:bg-gray-100 transition-colors",children:"Enable"}),l.jsx("button",{onClick:o,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors","aria-label":"Dismiss",children:l.jsx(wt,{className:"w-4 h-4 text-white/80"})})]})]})}):null,U0="tv_drawing_templates",Cm=()=>`template_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Ly=()=>`drawing_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Uy=()=>{try{const u=localStorage.getItem(U0);return u?JSON.parse(u):[]}catch{return[]}},Hc=u=>{localStorage.setItem(U0,JSON.stringify(u))},Mm=[{id:"preset_support_resistance",name:"Support & Resistance",description:"Two horizontal lines for S/R levels",drawings:[{tool:"horizontal",start:{time:0,price:0},end:{time:0,price:0},style:{lineColor:"#22c55e",lineWidth:2,lineStyle:0,fillColor:"#22c55e",showLabel:!0,fontSize:12},value:0},{tool:"horizontal",start:{time:0,price:0},end:{time:0,price:0},style:{lineColor:"#ef4444",lineWidth:2,lineStyle:0,fillColor:"#ef4444",showLabel:!0,fontSize:12},value:0}],createdAt:0,updatedAt:0},{id:"preset_fib_setup",name:"Fibonacci Setup",description:"Fibonacci retracement with horizontal levels",drawings:[{tool:"fibonacci",start:{time:0,price:0},end:{time:0,price:0},style:{lineColor:"#f59e0b",lineWidth:1,lineStyle:1,fillColor:"#f59e0b",showLabel:!0,fontSize:12}}],createdAt:0,updatedAt:0},{id:"preset_channel",name:"Price Channel",description:"Two parallel trend lines",drawings:[{tool:"trendline",start:{time:0,price:0},end:{time:0,price:0},style:{lineColor:"#3b82f6",lineWidth:2,lineStyle:0,fillColor:"#3b82f6",showLabel:!0,fontSize:12}},{tool:"trendline",start:{time:0,price:0},end:{time:0,price:0},style:{lineColor:"#3b82f6",lineWidth:2,lineStyle:1,fillColor:"#3b82f6",showLabel:!0,fontSize:12}}],createdAt:0,updatedAt:0}],Ry=({isOpen:u,onClose:n,currentDrawings:o,onApplyTemplate:r,onToast:d})=>{const[f,m]=y.useState([]),[p,x]=y.useState(""),[b,v]=y.useState(!1);if(y.useEffect(()=>{m(Uy())},[]),!u)return null;const j=()=>{if(!p.trim()){d("Please enter a template name","alert");return}if(o.length===0){d("No drawings to save","alert");return}const k={id:Cm(),name:p.trim(),drawings:o.map(({id:E,...H})=>H),createdAt:Date.now(),updatedAt:Date.now()},B=[...f,k];m(B),Hc(B),x(""),v(!1),d(`Template "${k.name}" saved!`,"success")},C=k=>{const B=k.drawings.map(E=>({...E,id:Ly()}));r(B),d(`Applied template: ${k.name}`,"success"),n()},w=k=>{const B=f.filter(E=>E.id!==k);m(B),Hc(B),d("Template deleted","info")},N=k=>{const B={...k,id:Cm(),name:`${k.name} (copy)`,createdAt:Date.now(),updatedAt:Date.now()},E=[...f,B];m(E),Hc(E),d("Template duplicated","success")};return[...Mm,...f],l.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded-xl shadow-2xl w-full max-w-lg max-h-[80vh] flex flex-col animate-fade-in",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[var(--border-color)]",children:[l.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5 text-[var(--accent-blue)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})}),"Drawing Templates"]}),l.jsx("button",{onClick:n,className:"p-2 hover:bg-[var(--bg-primary)] rounded-lg transition-colors","aria-label":"Close",children:l.jsx(wt,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider mb-3",children:"Save Current Drawings"}),b?l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:p,onChange:k=>x(k.target.value),placeholder:"Template name...",className:"flex-1 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-[var(--accent-blue)]",autoFocus:!0,onKeyDown:k=>k.key==="Enter"&&j()}),l.jsx("button",{onClick:j,className:"px-4 py-2 bg-[var(--accent-blue)] text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors",children:l.jsx(Eb,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>v(!1),className:"px-3 py-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"})]}):l.jsxs("button",{onClick:()=>v(!0),disabled:o.length===0,className:"w-full flex items-center justify-center gap-2 py-3 bg-[var(--bg-primary)] border border-dashed border-[var(--border-color)] rounded-lg text-sm text-gray-400 hover:text-white hover:border-[var(--accent-blue)] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(u0,{className:"w-4 h-4"}),"Save ",o.length," drawing",o.length!==1?"s":""," as template"]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider mb-3",children:"Preset Templates"}),l.jsx("div",{className:"space-y-2",children:Mm.map(k=>l.jsx(Am,{template:k,isPreset:!0,onApply:()=>C(k)},k.id))})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider mb-3",children:["My Templates (",f.length,")"]}),f.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx("p",{className:"text-sm",children:"No saved templates yet"}),l.jsx("p",{className:"text-xs mt-1",children:"Save your current drawings as a template to reuse them"})]}):l.jsx("div",{className:"space-y-2",children:f.map(k=>l.jsx(Am,{template:k,onApply:()=>C(k),onDelete:()=>w(k.id),onDuplicate:()=>N(k)},k.id))})]})]})]})})},Am=({template:u,isPreset:n,onApply:o,onDelete:r,onDuplicate:d})=>l.jsx("div",{className:"bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg p-3 group hover:border-[var(--accent-blue)] transition-colors",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("h4",{className:"text-sm font-medium text-white truncate",children:[u.name,n&&l.jsx("span",{className:"ml-2 text-xs px-1.5 py-0.5 bg-blue-500/20 text-blue-300 rounded",children:"Preset"})]}),u.description&&l.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:u.description}),l.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[u.drawings.length," drawing",u.drawings.length!==1?"s":""]})]}),l.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[l.jsx("button",{onClick:o,className:"px-3 py-1.5 bg-[var(--accent-blue)] text-white rounded text-xs font-medium hover:bg-blue-600 transition-colors",children:"Apply"}),!n&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:d,className:"p-1.5 text-gray-500 hover:text-white hover:bg-[var(--bg-secondary)] rounded transition-colors",title:"Duplicate",children:l.jsx(l0,{className:"w-3.5 h-3.5"})}),l.jsx("button",{onClick:r,className:"p-1.5 text-gray-500 hover:text-red-400 hover:bg-[var(--bg-secondary)] rounded transition-colors",title:"Delete",children:l.jsx(os,{className:"w-3.5 h-3.5"})})]})]})]})}),R0="tv_trading_journal",Vy=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Hy=["January","February","March","April","May","June","July","August","September","October","November","December"],qy=()=>`trade_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Yy=()=>{try{const u=localStorage.getItem(R0);return u?JSON.parse(u):[]}catch{return[]}},Tm=u=>{localStorage.setItem(R0,JSON.stringify(u))},Gy=(u,n)=>new Date(u,n+1,0).getDate(),$y=(u,n)=>{const o=new Date(u,n,1).getDay();return o===0?6:o-1},Xy=u=>{const n=new Date(u);return`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")}`},Qy=({isOpen:u,onClose:n,currentSymbol:o,currentPrice:r,onToast:d,tradeHistory:f=[]})=>{const[m,p]=y.useState([]),[x,b]=y.useState(new Date),[v,j]=y.useState(null),[C,w]=y.useState(!1),[N,k]=y.useState(null),[B,E]=y.useState({symbol:o,side:"long",entryPrice:r,exitPrice:r,quantity:1,notes:"",pnl:0});y.useEffect(()=>{const se=[...Yy(),...f].filter((I,pe,U)=>pe===U.findIndex(ae=>ae.id===I.id));p(se)},[f]),y.useEffect(()=>{E(D=>({...D,symbol:o,entryPrice:r,exitPrice:r}))},[o,r]);const H=y.useMemo(()=>{const D={};return m.forEach(te=>{const se=Xy(te.exitTime||te.entryTime);D[se]||(D[se]={trades:[],pnl:0}),D[se].trades.push(te),D[se].pnl+=te.pnl||0}),D},[m]),Z=y.useMemo(()=>{const D=x.getFullYear(),te=x.getMonth();let se=0,I=0,pe=0,U=0;return Object.entries(H).forEach(([ae,ce])=>{const[de,we]=ae.split("-").map(Number);de===D&&we-1===te&&(se+=ce.pnl,U++,ce.pnl>0&&I++,ce.pnl<0&&pe++)}),{totalPnl:se,winDays:I,lossDays:pe,tradingDays:U}},[H,x]),ne=y.useMemo(()=>{const D=x.getFullYear(),te=x.getMonth(),se=Gy(D,te),I=$y(D,te),pe=[];for(let ae=0;ae<I;ae++)pe.push({day:null,dateKey:"",isToday:!1});const U=new Date;for(let ae=1;ae<=se;ae++){const ce=`${D}-${(te+1).toString().padStart(2,"0")}-${ae.toString().padStart(2,"0")}`,de=U.getFullYear()===D&&U.getMonth()===te&&U.getDate()===ae;pe.push({day:ae,dateKey:ce,isToday:de})}return pe},[x]);if(!u)return null;const re=()=>{b(new Date(x.getFullYear(),x.getMonth()-1,1)),j(null)},Y=()=>{b(new Date(x.getFullYear(),x.getMonth()+1,1)),j(null)},W=()=>{b(new Date),j(null)},F=()=>{if(!v)return;const[D,te,se]=v.split("-").map(Number),I=new Date(D,te-1,se,12,0,0).getTime(),pe={id:qy(),symbol:B.symbol,side:B.side,entryPrice:B.entryPrice,exitPrice:B.exitPrice,quantity:B.quantity,entryTime:I,exitTime:I,status:"closed",notes:B.notes,tags:[],pnl:B.pnl,pnlPercent:(B.exitPrice-B.entryPrice)/B.entryPrice*100*(B.side==="long"?1:-1)},U=[...m,pe];p(U),Tm(U.filter(ae=>!f.find(ce=>ce.id===ae.id))),w(!1),E({symbol:o,side:"long",entryPrice:r,exitPrice:r,quantity:1,notes:"",pnl:0}),d("Trade added to journal","success")},G=D=>{const te=m.filter(se=>se.id!==D);p(te),Tm(te.filter(se=>!f.find(I=>I.id===se.id))),d("Trade removed","info")},z=v?H[v]:null;return l.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-[#0d0d0d] border border-[var(--border-color)] rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[var(--border-color)] bg-[#111]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-[var(--accent-blue)]/10 rounded-lg",children:l.jsx(mr,{className:"w-5 h-5 text-[var(--accent-blue)]"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white",children:"Trading Journal"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Track your trading history"})]})]}),l.jsx("button",{onClick:n,className:"p-2 hover:bg-white/5 rounded-lg transition-colors",children:l.jsx(wt,{className:"w-5 h-5 text-gray-400"})})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[var(--border-color)]",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:re,className:"p-2 hover:bg-white/5 rounded-lg transition-colors",children:l.jsx(e0,{className:"w-5 h-5 text-gray-400"})}),l.jsxs("h3",{className:"text-lg font-medium text-white min-w-[180px] text-center",children:[Hy[x.getMonth()]," ",x.getFullYear()]}),l.jsx("button",{onClick:Y,className:"p-2 hover:bg-white/5 rounded-lg transition-colors",children:l.jsx(t0,{className:"w-5 h-5 text-gray-400"})}),l.jsx("button",{onClick:W,className:"ml-2 px-3 py-1.5 text-xs bg-white/5 hover:bg-white/10 rounded-lg transition-colors text-gray-300",children:"Today"})]}),l.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-gray-500",children:"Month P&L:"}),l.jsxs("span",{className:`font-semibold ${Z.totalPnl>=0?"text-green-400":"text-red-400"}`,children:[Z.totalPnl>=0?"+":"",Z.totalPnl.toFixed(2)," $"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-gray-500",children:"Win/Loss Days:"}),l.jsx("span",{className:"text-green-400 font-medium",children:Z.winDays}),l.jsx("span",{className:"text-gray-600",children:"/"}),l.jsx("span",{className:"text-red-400 font-medium",children:Z.lossDays})]})]})]}),l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[l.jsxs("div",{className:"flex-1 p-4 overflow-auto",children:[l.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Vy.map(D=>l.jsx("div",{className:"text-center text-xs font-medium text-gray-500 py-2",children:D},D))}),l.jsx("div",{className:"grid grid-cols-7 gap-1",children:ne.map((D,te)=>{if(D.day===null)return l.jsx("div",{className:"aspect-square"},te);const se=H[D.dateKey],I=!!se,pe=(se==null?void 0:se.pnl)||0;return l.jsx("button",{onClick:()=>j(D.dateKey),className:`aspect-square p-1 rounded-lg border transition-all ${v===D.dateKey?"border-[var(--accent-blue)] bg-[var(--accent-blue)]/10":D.isToday?"border-[var(--accent-blue)]/50 bg-[var(--accent-blue)]/5":"border-transparent hover:bg-white/5"}`,children:l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("span",{className:`text-xs ${D.isToday?"text-[var(--accent-blue)] font-bold":"text-gray-400"}`,children:D.day}),I&&l.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center",children:[l.jsxs("div",{className:`text-xs font-bold ${pe>=0?"text-green-400":"text-red-400"}`,children:[pe>=0?"+":"",pe.toFixed(0),"$"]}),l.jsxs("div",{className:"text-[9px] text-gray-500",children:[se.trades.length," trade",se.trades.length>1?"s":""]})]})]})},te)})})]}),l.jsx("div",{className:"w-80 border-l border-[var(--border-color)] flex flex-col bg-[#0a0a0a]",children:v?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"p-4 border-b border-[var(--border-color)] flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-medium",children:new Date(v).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),z&&l.jsxs("p",{className:`text-sm font-semibold ${z.pnl>=0?"text-green-400":"text-red-400"}`,children:[z.pnl>=0?"+":"",z.pnl.toFixed(2)," $"]})]}),l.jsx("button",{onClick:()=>w(!0),className:"p-2 bg-[var(--accent-blue)] hover:bg-[var(--accent-blue)]/80 rounded-lg transition-colors",children:l.jsx(u0,{className:"w-4 h-4 text-white"})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:z!=null&&z.trades.length?z.trades.map(D=>l.jsxs("div",{className:"p-3 bg-[#111] border border-[var(--border-color)] rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${D.side==="long"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:D.side.toUpperCase()}),l.jsx("span",{className:"text-sm font-medium text-white",children:D.symbol})]}),l.jsx("button",{onClick:()=>G(D.id),className:"p-1 hover:bg-red-500/20 rounded transition-colors",children:l.jsx(os,{className:"w-3 h-3 text-gray-500 hover:text-red-400"})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Entry:"}),l.jsxs("span",{className:"ml-1 text-white",children:["$",D.entryPrice.toFixed(2)]})]}),D.exitPrice&&l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Exit:"}),l.jsxs("span",{className:"ml-1 text-white",children:["$",D.exitPrice.toFixed(2)]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Qty:"}),l.jsx("span",{className:"ml-1 text-white",children:D.quantity})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"P&L:"}),l.jsxs("span",{className:`ml-1 font-medium ${(D.pnl||0)>=0?"text-green-400":"text-red-400"}`,children:[(D.pnl||0)>=0?"+":"",(D.pnl||0).toFixed(2),"$"]})]})]}),D.notes&&l.jsx("p",{className:"text-xs text-gray-400 bg-black/30 p-2 rounded",children:D.notes})]},D.id)):l.jsxs("div",{className:"text-center text-gray-500 text-sm py-8",children:[l.jsx(mr,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No trades on this day"}),l.jsx("button",{onClick:()=>w(!0),className:"mt-2 text-[var(--accent-blue)] hover:underline",children:"Add a trade"})]})})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500 text-sm",children:l.jsxs("div",{className:"text-center",children:[l.jsx(mr,{className:"w-10 h-10 mx-auto mb-3 opacity-30"}),l.jsx("p",{children:"Select a day to view trades"})]})})})]}),C&&v&&l.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-[#111] border border-[var(--border-color)] rounded-xl p-6 w-full max-w-md",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Add Trade"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Symbol"}),l.jsx("input",{type:"text",value:B.symbol,onChange:D=>E({...B,symbol:D.target.value}),className:"w-full px-3 py-2 bg-black border border-[var(--border-color)] rounded-lg text-white text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Side"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>E({...B,side:"long"}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${B.side==="long"?"bg-green-500 text-white":"bg-green-500/10 text-green-400 hover:bg-green-500/20"}`,children:"Long"}),l.jsx("button",{onClick:()=>E({...B,side:"short"}),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-colors ${B.side==="short"?"bg-red-500 text-white":"bg-red-500/10 text-red-400 hover:bg-red-500/20"}`,children:"Short"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Entry Price"}),l.jsx("input",{type:"number",value:B.entryPrice,onChange:D=>E({...B,entryPrice:parseFloat(D.target.value)||0}),className:"w-full px-3 py-2 bg-black border border-[var(--border-color)] rounded-lg text-white text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Exit Price"}),l.jsx("input",{type:"number",value:B.exitPrice,onChange:D=>E({...B,exitPrice:parseFloat(D.target.value)||0}),className:"w-full px-3 py-2 bg-black border border-[var(--border-color)] rounded-lg text-white text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Quantity"}),l.jsx("input",{type:"number",value:B.quantity,onChange:D=>E({...B,quantity:parseFloat(D.target.value)||1}),className:"w-full px-3 py-2 bg-black border border-[var(--border-color)] rounded-lg text-white text-sm"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"P&L ($)"}),l.jsx("input",{type:"number",value:B.pnl,onChange:D=>E({...B,pnl:parseFloat(D.target.value)||0}),className:"w-full px-3 py-2 bg-black border border-[var(--border-color)] rounded-lg text-white text-sm",placeholder:"Enter P&L directly or leave for auto-calc"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Notes"}),l.jsx("textarea",{value:B.notes,onChange:D=>E({...B,notes:D.target.value}),rows:3,className:"w-full px-3 py-2 bg-black border border-[var(--border-color)] rounded-lg text-white text-sm resize-none",placeholder:"Trade notes, strategy, emotions..."})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:()=>w(!1),className:"flex-1 py-2 border border-[var(--border-color)] rounded-lg text-gray-400 hover:bg-white/5 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:F,className:"flex-1 py-2 bg-[var(--accent-blue)] rounded-lg text-white font-medium hover:bg-[var(--accent-blue)]/80 transition-colors",children:"Add Trade"})]})]})})]})})},Zy=u=>u.replace("USD","USDT"),Ky=async(u,n=20)=>{try{const o=Zy(u),r=await fetch(`https://api.binance.com/api/v3/depth?symbol=${o}&limit=${n}`);if(!r.ok)throw new Error("Failed to fetch order book");const d=await r.json();let f=0;const m=d.bids.map(b=>{const v=parseFloat(b[0]),j=parseFloat(b[1]);return f+=j,{price:v,quantity:j,total:f}});let p=0;const x=d.asks.map(b=>{const v=parseFloat(b[0]),j=parseFloat(b[1]);return p+=j,{price:v,quantity:j,total:p}});return{bids:m,asks:x,lastUpdateId:d.lastUpdateId}}catch(o){return console.error("Error fetching order book:",o),null}},Jy=({isOpen:u,onClose:n,symbol:o,currentPrice:r})=>{const[d,f]=y.useState(null),[m,p]=y.useState(!1),[x,b]=y.useState(null),[v,j]=y.useState(20),C=y.useCallback(async()=>{p(!0),b(null);const k=await Ky(o,v);k?f(k):b("Failed to load order book"),p(!1)},[o,v]);y.useEffect(()=>{if(!u)return;C();const k=setInterval(C,2e3);return()=>clearInterval(k)},[u,C]);const w=y.useMemo(()=>{if(!d)return 1;const k=Math.max(...d.bids.map(E=>E.quantity),0),B=Math.max(...d.asks.map(E=>E.quantity),0);return Math.max(k,B)},[d]),N=y.useMemo(()=>{if(!d||d.bids.length===0||d.asks.length===0)return null;const k=d.bids[0].price,B=d.asks[0].price,E=B-k,H=E/B*100;return{value:E,percent:H}},[d]);return u?l.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded-xl shadow-2xl w-full max-w-md max-h-[80vh] flex flex-col animate-fade-in",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[var(--border-color)]",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5 text-[var(--accent-blue)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"Order Book"]}),l.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:o})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:C,disabled:m,className:"p-2 text-gray-400 hover:text-white hover:bg-[var(--bg-primary)] rounded-lg transition-colors disabled:opacity-50",title:"Refresh",children:l.jsx(_l,{className:`w-4 h-4 ${m?"animate-spin":""}`})}),l.jsx("button",{onClick:n,className:"p-2 hover:bg-[var(--bg-primary)] rounded-lg transition-colors","aria-label":"Close",children:l.jsx(wt,{className:"w-5 h-5"})})]})]}),l.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-[var(--border-color)]",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Depth:"}),l.jsx("div",{className:"flex gap-1",children:[20,50,100].map(k=>l.jsx("button",{onClick:()=>j(k),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${v===k?"bg-[var(--accent-blue)] text-white":"bg-[var(--bg-primary)] text-gray-400 hover:text-white"}`,children:k},k))})]}),N&&l.jsxs("div",{className:"flex items-center justify-center px-4 py-2 bg-[var(--bg-primary)] border-b border-[var(--border-color)]",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Spread:"}),l.jsxs("span",{className:"text-xs text-white font-mono ml-2",children:["$",N.value.toFixed(2)," (",N.percent.toFixed(3),"%)"]})]}),l.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:x?l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx("p",{className:"text-sm text-red-400",children:x})}):d?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-3 text-xs text-gray-500 px-4 py-2 bg-[var(--bg-primary)]",children:[l.jsx("span",{children:"Price"}),l.jsx("span",{className:"text-right",children:"Size"}),l.jsx("span",{className:"text-right",children:"Total"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto flex flex-col-reverse",children:d.asks.slice().reverse().map((k,B)=>l.jsx(Dm,{entry:k,type:"ask",maxQuantity:w,isHighlighted:B===d.asks.length-1},`ask-${B}`))}),l.jsx("div",{className:"px-4 py-2 bg-[var(--bg-primary)] border-y border-[var(--border-color)] text-center",children:l.jsxs("span",{className:"text-lg font-bold text-white font-mono",children:["$",r.toLocaleString(void 0,{minimumFractionDigits:2})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:d.bids.map((k,B)=>l.jsx(Dm,{entry:k,type:"bid",maxQuantity:w,isHighlighted:B===0},`bid-${B}`))})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(_l,{className:"w-6 h-6 text-gray-500 animate-spin mx-auto mb-2"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Loading order book..."})]})})})]})}):null},Dm=({entry:u,type:n,maxQuantity:o,isHighlighted:r})=>{const d=u.quantity/o*100;return l.jsxs("div",{className:`relative grid grid-cols-3 text-xs px-4 py-1 hover:bg-[var(--bg-primary)] transition-colors ${r?"font-semibold":""}`,children:[l.jsx("div",{className:`absolute inset-0 ${n==="bid"?"bg-green-500/10":"bg-red-500/10"}`,style:{width:`${d}%`,right:0,left:"auto"}}),l.jsx("span",{className:`relative z-10 font-mono ${n==="bid"?"text-green-400":"text-red-400"}`,children:u.price.toLocaleString(void 0,{minimumFractionDigits:2})}),l.jsx("span",{className:"relative z-10 text-right text-white font-mono",children:u.quantity.toFixed(4)}),l.jsx("span",{className:"relative z-10 text-right text-gray-400 font-mono",children:u.total.toFixed(4)})]})},Py=u=>u.replace("USD","USDT"),Fy=async(u,n=10)=>{try{const o=Py(u),r=await fetch(`https://api.binance.com/api/v3/depth?symbol=${o}&limit=${n}`);if(!r.ok)throw new Error("Failed to fetch order book");const d=await r.json();let f=0;const m=d.bids.map(b=>{const v=parseFloat(b[0]),j=parseFloat(b[1]);return f+=j,{price:v,quantity:j,total:f}});let p=0;const x=d.asks.map(b=>{const v=parseFloat(b[0]),j=parseFloat(b[1]);return p+=j,{price:v,quantity:j,total:p}});return{bids:m,asks:x,lastUpdateId:d.lastUpdateId}}catch(o){return console.error("Error fetching order book:",o),null}},Wy=({symbol:u,currentPrice:n,isVisible:o})=>{const[r,d]=y.useState(null),[f,m]=y.useState(!1),[p,x]=y.useState(!1),b=y.useCallback(async()=>{m(!0);const C=await Fy(u,8);C&&d(C),m(!1)},[u]);y.useEffect(()=>{if(!o)return;b();const C=setInterval(b,3e3);return()=>clearInterval(C)},[o,b]);const v=y.useMemo(()=>{if(!r)return 1;const C=Math.max(...r.bids.map(N=>N.quantity),0),w=Math.max(...r.asks.map(N=>N.quantity),0);return Math.max(C,w)},[r]),j=y.useMemo(()=>{if(!r||r.bids.length===0||r.asks.length===0)return null;const C=r.bids[0].price,w=r.asks[0].price;return((w-C)/w*100).toFixed(3)},[r]);return o?l.jsxs("div",{className:"bg-[var(--bg-secondary)] border-t border-[var(--border-color)]",children:[l.jsxs("button",{onClick:()=>x(!p),className:"w-full flex items-center justify-between px-3 py-2 hover:bg-[var(--bg-primary)] transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4 text-[var(--accent-blue)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),l.jsx("span",{className:"text-xs font-medium text-white",children:"Order Book"}),j&&l.jsxs("span",{className:"text-xs text-gray-500",children:["Spread: ",j,"%"]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[f&&l.jsx(_l,{className:"w-3 h-3 text-gray-500 animate-spin"}),p?l.jsx(Im,{className:"w-4 h-4 text-gray-500"}):l.jsx(Dg,{className:"w-4 h-4 text-gray-500"})]})]}),!p&&r&&l.jsxs("div",{className:"px-2 pb-2",children:[l.jsxs("div",{className:"grid grid-cols-2 text-[10px] text-gray-500 px-1 mb-1",children:[l.jsx("span",{children:"Price"}),l.jsx("span",{className:"text-right",children:"Size"})]}),l.jsx("div",{className:"space-y-0.5",children:r.asks.slice(0,5).reverse().map((C,w)=>l.jsx(Em,{entry:C,type:"ask",maxQuantity:v},`ask-${w}`))}),l.jsx("div",{className:"my-1.5 py-1 px-2 bg-[var(--bg-primary)] rounded text-center",children:l.jsxs("span",{className:"text-sm font-bold text-white font-mono",children:["$",n.toLocaleString(void 0,{minimumFractionDigits:2})]})}),l.jsx("div",{className:"space-y-0.5",children:r.bids.slice(0,5).map((C,w)=>l.jsx(Em,{entry:C,type:"bid",maxQuantity:v},`bid-${w}`))})]})]}):null},Em=({entry:u,type:n,maxQuantity:o})=>{const r=u.quantity/o*100;return l.jsxs("div",{className:"relative grid grid-cols-2 text-[11px] px-1 py-0.5 rounded",children:[l.jsx("div",{className:`absolute inset-0 rounded ${n==="bid"?"bg-green-500/15":"bg-red-500/15"}`,style:{width:`${r}%`,right:0,left:"auto"}}),l.jsx("span",{className:`relative z-10 font-mono ${n==="bid"?"text-green-400":"text-red-400"}`,children:u.price.toLocaleString(void 0,{minimumFractionDigits:2})}),l.jsx("span",{className:"relative z-10 text-right text-gray-400 font-mono",children:u.quantity.toFixed(4)})]})},qc=(u,n,o,r)=>{const d=o-n;return d===0?r/2:r-(u-n)/d*r},Iy=(u,n,o,r)=>{const d=o-n;return n+(r-u)/r*d},e1=({positions:u,currentPrice:n,priceRange:o,chartHeight:r,onUpdatePosition:d,onClosePosition:f,onAddStopLoss:m,onAddTakeProfit:p})=>{const[x,b]=y.useState(null),v=y.useRef(null),j=y.useCallback(w=>{if(!x||!v.current)return;const N=v.current.getBoundingClientRect(),k=w.clientY-N.top,B=Iy(k,o.min,o.max,r);x.type==="sl"?d(x.positionId,{stopLoss:B}):d(x.positionId,{takeProfit:B})},[x,o,r,d]),C=y.useCallback(()=>{b(null)},[]);return y.useEffect(()=>{if(x)return window.addEventListener("mousemove",j),window.addEventListener("mouseup",C),()=>{window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",C)}},[x,j,C]),u.length===0?null:l.jsx("div",{ref:v,className:"absolute inset-0 pointer-events-none z-30",style:{height:r},children:u.map(w=>{var ne,re;const N=qc(w.entryPrice,o.min,o.max,r),k=w.stopLoss?qc(w.stopLoss,o.min,o.max,r):null,B=w.takeProfit?qc(w.takeProfit,o.min,o.max,r):null,E=w.side==="long"?(n-w.entryPrice)*w.quantity:(w.entryPrice-n)*w.quantity,H=E>=0,Z=w.side==="long";return l.jsxs(ll.Fragment,{children:[l.jsxs("div",{className:"absolute left-0 right-12 pointer-events-auto",style:{top:N-1},children:[l.jsx("div",{className:`h-0.5 ${Z?"bg-green-500":"bg-red-500"} opacity-80`,style:{backgroundImage:"repeating-linear-gradient(90deg, transparent, transparent 4px, currentColor 4px, currentColor 8px)"}}),l.jsxs("div",{className:`absolute left-2 -top-3 px-2 py-0.5 rounded text-[10px] font-bold flex items-center gap-1 ${Z?"bg-green-500/90 text-white":"bg-red-500/90 text-white"}`,children:[l.jsx("span",{children:Z?" LONG":" SHORT"}),l.jsxs("span",{className:"opacity-70",children:["@ $",w.entryPrice.toFixed(2)]}),l.jsxs("span",{className:"ml-1",children:["x",w.quantity]}),l.jsx("button",{onClick:()=>f(w.id),className:"ml-1 p-0.5 hover:bg-white/20 rounded",children:l.jsx(wt,{className:"w-3 h-3"})})]}),l.jsxs("div",{className:`absolute right-0 -top-3 px-2 py-0.5 rounded text-[10px] font-bold font-mono ${H?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[H?"+":"",E.toFixed(2)," USD"]})]}),k!==null?l.jsxs("div",{className:"absolute left-0 right-12 pointer-events-auto cursor-ns-resize group",style:{top:k-1},onMouseDown:()=>b({positionId:w.id,type:"sl"}),children:[l.jsx("div",{className:"h-0.5 bg-red-500/70 group-hover:bg-red-400"}),l.jsxs("div",{className:"absolute left-2 -top-3 px-2 py-0.5 rounded text-[10px] font-medium bg-red-500/20 text-red-400 flex items-center gap-1",children:[l.jsx(nl,{className:"w-3 h-3"}),l.jsxs("span",{children:["SL $",(ne=w.stopLoss)==null?void 0:ne.toFixed(2)]}),l.jsx(sm,{className:"w-3 h-3 opacity-50 group-hover:opacity-100"})]})]}):l.jsxs("button",{onClick:()=>m(w.id),className:"absolute left-2 pointer-events-auto px-2 py-0.5 bg-red-500/10 hover:bg-red-500/20 text-red-400 text-[10px] rounded border border-red-500/30 flex items-center gap-1",style:{top:N+20},children:[l.jsx(nl,{className:"w-3 h-3"}),"+ Add SL"]}),B!==null?l.jsxs("div",{className:"absolute left-0 right-12 pointer-events-auto cursor-ns-resize group",style:{top:B-1},onMouseDown:()=>b({positionId:w.id,type:"tp"}),children:[l.jsx("div",{className:"h-0.5 bg-green-500/70 group-hover:bg-green-400"}),l.jsxs("div",{className:"absolute left-2 -top-3 px-2 py-0.5 rounded text-[10px] font-medium bg-green-500/20 text-green-400 flex items-center gap-1",children:[l.jsx(Kc,{className:"w-3 h-3"}),l.jsxs("span",{children:["TP $",(re=w.takeProfit)==null?void 0:re.toFixed(2)]}),l.jsx(sm,{className:"w-3 h-3 opacity-50 group-hover:opacity-100"})]})]}):l.jsxs("button",{onClick:()=>p(w.id),className:"absolute left-2 pointer-events-auto px-2 py-0.5 bg-green-500/10 hover:bg-green-500/20 text-green-400 text-[10px] rounded border border-green-500/30 flex items-center gap-1",style:{top:N+(k===null?40:20)},children:[l.jsx(Kc,{className:"w-3 h-3"}),"+ Add TP"]})]},w.id)})})},t1=[{id:"1D",label:"1D",tooltip:"1 day in 1-minute intervals"},{id:"5D",label:"5D",tooltip:"5 days in 5-minute intervals"},{id:"1M",label:"1M",tooltip:"1 month in 30-minute intervals"},{id:"3M",label:"3M",tooltip:"3 months in 1-hour intervals"},{id:"6M",label:"6M",tooltip:"6 months in 2-hour intervals"},{id:"YTD",label:"YTD",tooltip:"Year to date in 1-day intervals"},{id:"1Y",label:"1Y",tooltip:"1 year in 1-day intervals"},{id:"5Y",label:"5Y",tooltip:"5 years in 1-week intervals"},{id:"ALL",label:"All",tooltip:"All data in 1-month intervals"}],a1=[{id:"paper",name:"Paper Trading",icon:"",rating:0,description:"TradeVision Simulator",connected:!0},{id:"okx",name:"OKX",icon:"",rating:4.9,description:"Global crypto exchange",connected:!1},{id:"bybit",name:"Bybit",icon:"",rating:4.8,description:"Crypto derivatives",connected:!1},{id:"capitalcom",name:"Capital.com",icon:"",rating:4.8,description:"CFD trading",connected:!1},{id:"whitebit",name:"WhiteBIT",icon:"",rating:4.7,description:"EU crypto exchange",connected:!1},{id:"icmarkets",name:"IC Markets",icon:"",rating:4.7,description:"Forex & CFD",connected:!1},{id:"easymarkets",name:"easyMarkets",icon:"",rating:4.6,description:"Easy trading",connected:!1},{id:"activtrades",name:"ActivTrades",icon:"",rating:4.6,description:"Multi-asset broker",connected:!1},{id:"tickmill",name:"Tickmill",icon:"",rating:4.6,description:"Low spreads",connected:!1},{id:"forexcom",name:"FOREX.com",icon:"",rating:4.5,description:"Forex trading",connected:!1},{id:"binance",name:"Binance",icon:"",rating:4.5,description:"World's largest exchange",connected:!1},{id:"eightcap",name:"Eightcap",icon:"",rating:4.4,description:"MT4/MT5 broker",connected:!1},{id:"fxpro",name:"FxPro",icon:"",rating:4.4,description:"Pro trading",connected:!1},{id:"cmcmarkets",name:"CMC Markets",icon:"",rating:4.4,description:"Spread betting",connected:!1},{id:"gate",name:"Gate.io",icon:"",rating:4.4,description:"Altcoin paradise",connected:!1},{id:"bingx",name:"BingX",icon:"",rating:4.3,description:"Social trading",connected:!1},{id:"bitget",name:"Bitget",icon:"",rating:4.4,description:"Copy trading",connected:!1},{id:"kucoin",name:"KuCoin",icon:"",rating:4.2,description:"People's exchange",connected:!1},{id:"mexc",name:"MEXC",icon:"",rating:4.1,description:"Global exchange",connected:!1},{id:"htx",name:"HTX",icon:"",rating:3.8,description:"Former Huobi",connected:!1}],l1=({currentTimeframe:u,onTimeframeChange:n,isPaperMode:o,paperBalance:r,activeExchange:d,connectedExchanges:f,onSelectExchange:m,onOpenExchangeModal:p,isAuthenticated:x,onLoginRequired:b})=>{const[v,j]=y.useState(!1),[C,w]=y.useState(!1),[N,k]=y.useState(300),[B,E]=y.useState(!1),[H,Z]=y.useState(""),[ne,re]=y.useState([]),[Y,W]=y.useState("5Y"),[F,G]=y.useState(new Date),[z,D]=y.useState(8),te=y.useRef(null),se=y.useRef(0),I=y.useRef(0);y.useEffect(()=>{const ee=setInterval(()=>G(new Date),1e3);return()=>clearInterval(ee)},[]);const pe=a1.map(ee=>({...ee,connected:ee.id==="paper"||f.includes(ee.id)})),U=pe.find(ee=>o?ee.id==="paper":ee.id===d)||pe[0],ae=pe.filter(ee=>ee.name.toLowerCase().includes(H.toLowerCase())),ce=H?ae:ae.slice(0,z),de=!H&&ae.length>z,we=()=>{D(ee=>ee+8)},De=(ee,xe)=>{xe.stopPropagation(),re(Se=>Se.includes(ee)?Se.filter(Qe=>Qe!==ee):[...Se,ee])},je=ee=>{ee==="paper"?m("paper"):x?f.includes(ee)?m(ee):p():b()},Ne=ee=>{E(!0),se.current=ee.clientY,I.current=N};y.useEffect(()=>{const ee=Se=>{if(!B)return;const Qe=se.current-Se.clientY,ye=Math.min(Math.max(I.current+Qe,200),window.innerHeight*.8);k(ye)},xe=()=>{E(!1)};return B&&(window.addEventListener("mousemove",ee),window.addEventListener("mouseup",xe)),()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",xe)}},[B]);const be=ee=>{const xe=ee.getHours().toString().padStart(2,"0"),Se=ee.getMinutes().toString().padStart(2,"0"),Qe=ee.getSeconds().toString().padStart(2,"0"),ye=-ee.getTimezoneOffset()/60,ta=ye>=0?`+${ye}`:`${ye}`;return`${xe}:${Se}:${Qe} UTC${ta}`},at=({rating:ee})=>l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("svg",{className:"w-3.5 h-3.5 text-yellow-400 fill-current",viewBox:"0 0 18 18",children:l.jsx("path",{d:"m9 1.5 2.08 4.55 4.92.6-3.63 3.42.89 4.93L9 12.56 4.74 15l.88-4.93L2 6.66l4.91-.6L9 1.5Z"})}),l.jsx("span",{className:"text-xs text-gray-400",children:ee.toFixed(1)})]});return l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-50 flex flex-col",children:[v&&l.jsxs("div",{ref:te,className:"bg-[#0a0a0a] border-t border-[var(--border-color)] overflow-hidden",style:{height:C?"calc(100vh - 100px)":N},children:[l.jsx("div",{className:"h-1.5 cursor-ns-resize hover:bg-[var(--accent-blue)]/50 transition-colors flex justify-center items-center",onMouseDown:Ne,children:l.jsx("div",{className:"w-10 h-1 bg-gray-600 rounded-full"})}),l.jsxs("div",{className:"h-full overflow-y-auto p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-lg font-semibold text-white",children:"Connect to Trade via Trusted Brokers"}),l.jsxs("div",{className:"relative w-64",children:[l.jsx(xr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),l.jsx("input",{type:"text",placeholder:"Find broker...",value:H,onChange:ee=>Z(ee.target.value),className:"w-full pl-9 pr-4 py-1.5 bg-[#1a1a1a] border border-[var(--border-color)] rounded-lg text-sm text-white placeholder:text-gray-500 focus:outline-none focus:border-[var(--accent-blue)]"})]})]}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-3",children:ce.map(ee=>l.jsxs("button",{onClick:()=>je(ee.id),className:`relative flex flex-col items-center p-3 rounded-xl border transition-all hover:scale-[1.02] ${U.id===ee.id?"bg-[var(--accent-blue)]/10 border-[var(--accent-blue)]":"bg-[#111] border-[var(--border-color)] hover:border-gray-500"}`,children:[ee.id!=="paper"&&l.jsx("button",{onClick:xe=>De(ee.id,xe),className:"absolute top-2 right-2 p-0.5 hover:bg-white/10 rounded transition-colors",children:l.jsx(br,{className:`w-3 h-3 ${ne.includes(ee.id)?"text-yellow-400 fill-yellow-400":"text-gray-600"}`})}),l.jsx("div",{className:"text-2xl mb-1.5",children:ee.icon}),l.jsx("span",{className:"text-xs font-medium text-white mb-0.5",children:ee.name}),ee.id==="paper"?l.jsx("span",{className:"text-[10px] text-gray-500",children:"TradeVision Simulator"}):ee.rating>0?l.jsx(at,{rating:ee.rating}):null]},ee.id))}),de&&l.jsx("div",{className:"flex justify-center mt-4",children:l.jsxs("button",{onClick:we,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 border border-[var(--border-color)] rounded-lg transition-colors",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"16",height:"16",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.5 4.5h15a1 1 0 0 1 1 1v15a1 1 0 0 1-1 1h-15a1 1 0 0 1-1-1v-15a1 1 0 0 1 1-1ZM2 5.5A2.5 2.5 0 0 1 4.5 3h15A2.5 2.5 0 0 1 22 5.5v.58l1.92.33a2.5 2.5 0 0 1 2.04 2.88L23.48 23.9a2.5 2.5 0 0 1-2.9 2.05L4.27 23.07V23A2.5 2.5 0 0 1 2 20.5v-15Zm9.25 7V8h1.5v4.5H17V14h-4.25v4h-1.5v-4H7v-1.5h4.25Z"})}),"Load more brokers (",ae.length-z," remaining)"]})}),l.jsxs("div",{className:"flex justify-center mt-4 text-xs text-gray-500",children:[ce.length," of ",ae.length," brokers shown"]})]})]}),l.jsxs("div",{className:"flex items-center h-8 bg-[#131313] border-t border-[var(--border-color)] px-2 gap-1",children:[l.jsx("div",{className:"flex items-center gap-0.5",children:t1.map(ee=>l.jsx("button",{onClick:()=>W(ee.id),className:`px-2 py-1 text-[11px] rounded transition-colors ${Y===ee.id?"bg-[var(--accent-blue)] text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,title:ee.tooltip,children:ee.label},ee.id))}),l.jsx("div",{className:"w-px h-4 bg-[var(--border-color)] mx-1"}),l.jsx("button",{className:"p-1 text-gray-400 hover:text-white hover:bg-white/5 rounded transition-colors",title:"Go to date",children:l.jsx(mr,{className:"w-4 h-4"})}),l.jsx("div",{className:"flex-1"}),l.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 text-[11px] text-gray-400 hover:text-white hover:bg-white/5 rounded transition-colors",children:[l.jsx(a0,{className:"w-3 h-3"}),be(F)]})]}),l.jsxs("div",{className:"flex items-center h-9 bg-[#0d0d0d] border-t border-[var(--border-color)]",children:[l.jsx("div",{className:"flex items-center h-full",children:l.jsxs("button",{onClick:()=>j(!v),className:`flex items-center gap-2 h-full px-4 text-sm border-r border-[var(--border-color)] transition-colors ${v?"bg-[#1a1a1a] text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[l.jsx("span",{children:"Trading Panel"}),o&&l.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 bg-yellow-500/20 text-yellow-400 rounded",children:["$",r.toLocaleString()]})]})}),l.jsx("div",{className:"flex-1"}),l.jsx("button",{onClick:()=>j(!v),className:`p-2 transition-colors border-l border-[var(--border-color)] ${v?"text-[var(--accent-blue)]":"text-gray-400 hover:text-white hover:bg-white/5"}`,title:v?"Close panel":"Open panel",children:l.jsx("svg",{width:"19",height:"12",fill:"none",className:`transform transition-transform ${v?"rotate-180":""}`,children:l.jsx("path",{stroke:"currentColor",strokeWidth:"1.5",d:"M1 8l8.5-6.5L18 8"})})})]})]})},s1=({isOpen:u,onClose:n,symbol:o,currentPrice:r,side:d,balance:f,onSubmitOrder:m,isPaperMode:p})=>{const[x,b]=y.useState("market"),[v,j]=y.useState("0.01"),[C,w]=y.useState(r.toString()),[N,k]=y.useState(""),[B,E]=y.useState(""),[H,Z]=y.useState(1),[ne,re]=y.useState(!1),[Y,W]=y.useState(!1);if(y.useEffect(()=>{u&&(b("market"),w(r.toString()),d==="buy"?(k((r*.98).toFixed(2)),E((r*1.04).toFixed(2))):(k((r*1.02).toFixed(2)),E((r*.96).toFixed(2))))},[u,r,d]),!u)return null;const F=parseFloat(v)||0,G=x==="market"?r:parseFloat(C)||r,z=F*G,D=z/H,te=ne?parseFloat(N):void 0,se=Y?parseFloat(B):void 0,I=te?d==="buy"?(G-te)*F:(te-G)*F:null,pe=se?d==="buy"?(se-G)*F:(G-se)*F:null,U=I&&pe&&I>0?(pe/I).toFixed(2):null,ae=()=>{const de={symbol:o,side:d,type:x,quantity:F,price:x!=="market"?parseFloat(C):void 0,stopLoss:ne?parseFloat(N):void 0,takeProfit:Y?parseFloat(B):void 0,leverage:H};m(de),n()},ce=d==="buy";return l.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:n}),l.jsxs("div",{className:"relative bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-scale-in",children:[l.jsxs("div",{className:`px-4 py-3 flex items-center justify-between ${ce?"bg-green-500/10":"bg-red-500/10"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${ce?"bg-green-500/20":"bg-red-500/20"}`,children:ce?l.jsx(wa,{className:"w-5 h-5 text-green-400"}):l.jsx(Kb,{className:"w-5 h-5 text-red-400"})}),l.jsxs("div",{children:[l.jsxs("h2",{className:`font-bold ${ce?"text-green-400":"text-red-400"}`,children:[ce?"Buy":"Sell"," ",o]}),l.jsxs("p",{className:"text-xs text-gray-500",children:[p?"Paper Trading":"Live Trading","  $",r.toLocaleString()]})]})]}),l.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-white hover:bg-[var(--bg-primary)] rounded-lg transition-colors",children:l.jsx(wt,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 uppercase mb-2 block",children:"Order Type"}),l.jsx("div",{className:"flex gap-2",children:["market","limit","stop"].map(de=>l.jsx("button",{onClick:()=>b(de),className:`flex-1 py-2 text-sm rounded-lg font-medium transition-colors ${x===de?"bg-[var(--accent-blue)] text-white":"bg-[var(--bg-primary)] text-gray-400 hover:text-white"}`,children:de.charAt(0).toUpperCase()+de.slice(1)},de))})]}),x!=="market"&&l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 uppercase mb-2 block",children:x==="limit"?"Limit Price":"Stop Price"}),l.jsx("input",{type:"number",value:C,onChange:de=>w(de.target.value),className:"w-full px-3 py-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg text-white font-mono focus:border-[var(--accent-blue)] focus:outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 uppercase mb-2 block",children:"Quantity"}),l.jsx("input",{type:"number",value:v,onChange:de=>j(de.target.value),step:"0.001",min:"0.001",className:"w-full px-3 py-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg text-white font-mono focus:border-[var(--accent-blue)] focus:outline-none"}),l.jsx("div",{className:"flex gap-2 mt-2",children:["25%","50%","75%","100%"].map((de,we)=>{const De=[.25,.5,.75,1][we],je=f*H/G;return l.jsx("button",{onClick:()=>j((je*De).toFixed(4)),className:"flex-1 py-1 text-xs bg-[var(--bg-primary)] text-gray-400 hover:text-white rounded transition-colors",children:de},de)})})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"text-xs text-gray-500 uppercase mb-2 block",children:["Leverage: ",H,"x"]}),l.jsx("input",{type:"range",min:"1",max:"20",value:H,onChange:de=>Z(parseInt(de.target.value)),className:"w-full accent-[var(--accent-blue)]"}),l.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 mt-1",children:[l.jsx("span",{children:"1x"}),l.jsx("span",{children:"10x"}),l.jsx("span",{children:"20x"})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mt-2",children:[l.jsx("input",{type:"checkbox",checked:ne,onChange:de=>re(de.target.checked),className:"w-4 h-4 rounded accent-red-500"}),l.jsx("span",{className:"text-xs text-gray-400",children:"SL"})]}),l.jsx("input",{type:"number",value:N,onChange:de=>k(de.target.value),disabled:!ne,placeholder:"Stop Loss Price",className:"flex-1 px-3 py-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg text-red-400 font-mono focus:border-red-500 focus:outline-none disabled:opacity-50"})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mt-2",children:[l.jsx("input",{type:"checkbox",checked:Y,onChange:de=>W(de.target.checked),className:"w-4 h-4 rounded accent-green-500"}),l.jsx("span",{className:"text-xs text-gray-400",children:"TP"})]}),l.jsx("input",{type:"number",value:B,onChange:de=>E(de.target.value),disabled:!Y,placeholder:"Take Profit Price",className:"flex-1 px-3 py-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-lg text-green-400 font-mono focus:border-green-500 focus:outline-none disabled:opacity-50"})]}),l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-3 space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-xs",children:[l.jsx("span",{className:"text-gray-500",children:"Order Value"}),l.jsxs("span",{className:"text-white font-mono",children:["$",z.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),l.jsxs("div",{className:"flex justify-between text-xs",children:[l.jsx("span",{className:"text-gray-500",children:"Required Margin"}),l.jsxs("span",{className:"text-white font-mono",children:["$",D.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),I!==null&&l.jsxs("div",{className:"flex justify-between text-xs",children:[l.jsx("span",{className:"text-gray-500",children:"Max Loss (SL)"}),l.jsxs("span",{className:"text-red-400 font-mono",children:["-$",Math.abs(I).toFixed(2)]})]}),pe!==null&&l.jsxs("div",{className:"flex justify-between text-xs",children:[l.jsx("span",{className:"text-gray-500",children:"Target Profit (TP)"}),l.jsxs("span",{className:"text-green-400 font-mono",children:["+$",pe.toFixed(2)]})]}),U&&l.jsxs("div",{className:"flex justify-between text-xs",children:[l.jsx("span",{className:"text-gray-500",children:"Risk/Reward"}),l.jsxs("span",{className:"text-[var(--accent-blue)] font-mono",children:["1:",U]})]})]}),D>f&&l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-500/10 border border-red-500/30 rounded-lg",children:[l.jsx(nl,{className:"w-4 h-4 text-red-400"}),l.jsx("span",{className:"text-xs text-red-400",children:"Insufficient balance"})]}),l.jsxs("button",{onClick:ae,disabled:F<=0||D>f,className:`w-full py-3 rounded-xl font-bold text-white transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed ${ce?"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-400 hover:to-green-500":"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-400 hover:to-red-500"}`,children:[ce?"Buy":"Sell"," ",o]})]})]})]})},zm=[{id:"binance",name:"Binance",logo:"",color:"#F0B90B",description:"World's largest crypto exchange",supported:!0},{id:"bingx",name:"BingX",logo:"",color:"#2D7CF6",description:"Copy trading & derivatives",supported:!0},{id:"bybit",name:"Bybit",logo:"",color:"#F7A600",description:"Derivatives & spot trading",supported:!0},{id:"okx",name:"OKX",logo:"",color:"#FFFFFF",description:"Comprehensive trading platform",supported:!0},{id:"bitget",name:"Bitget",logo:"",color:"#00D4AA",description:"Copy trading specialists",supported:!1},{id:"mexc",name:"MEXC",logo:"",color:"#00B897",description:"Wide altcoin selection",supported:!1}],n1=({isOpen:u,onClose:n,isAuthenticated:o,onLoginRequired:r,onConnect:d,connectedExchanges:f,onDisconnect:m,onSwitchToPaper:p,isPaperMode:x})=>{const[b,v]=y.useState(null),[j,C]=y.useState(""),[w,N]=y.useState(""),[k,B]=y.useState(!1);if(!u)return null;const E=()=>{if(!o){r();return}b&&j&&w&&(d(b,j,w),C(""),N(""),v(null))},H=zm.find(Z=>Z.id===b);return l.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:n}),l.jsxs("div",{className:"relative bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-scale-in max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border-color)] flex items-center justify-between sticky top-0 bg-[var(--bg-secondary)] z-10",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-[var(--accent-blue)]/20 rounded-lg",children:l.jsx(cb,{className:"w-5 h-5 text-[var(--accent-blue)]"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-bold text-white",children:"Connect Exchange"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Trade with real funds"})]})]}),l.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-white hover:bg-[var(--bg-primary)] rounded-lg transition-colors",children:l.jsx(wt,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsx("div",{onClick:p,className:`p-3 rounded-xl border cursor-pointer transition-all ${x?"bg-yellow-500/10 border-yellow-500/50":"bg-[var(--bg-primary)] border-[var(--border-color)] hover:border-yellow-500/30"}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-white",children:"Paper Trading"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Practice with $10,000 virtual funds"})]})]}),x&&l.jsx(Bl,{className:"w-5 h-5 text-yellow-400"})]})}),l.jsx("div",{className:"text-center text-xs text-gray-500",children:" or connect a real exchange "}),!o&&l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-orange-500/10 border border-orange-500/30 rounded-lg",children:[l.jsx(nl,{className:"w-4 h-4 text-orange-400"}),l.jsxs("span",{className:"text-xs text-orange-400",children:["Please ",l.jsx("button",{onClick:r,className:"underline hover:text-orange-300",children:"sign in"})," to connect exchanges"]})]}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:zm.map(Z=>{const ne=f.includes(Z.id),re=b===Z.id;return l.jsx("button",{onClick:()=>{if(!o){r();return}ne?m(Z.id):v(re?null:Z.id)},disabled:!Z.supported&&!ne,className:`p-3 rounded-xl border text-left transition-all ${ne?"bg-green-500/10 border-green-500/50":re?"bg-[var(--accent-blue)]/10 border-[var(--accent-blue)]":Z.supported?"bg-[var(--bg-primary)] border-[var(--border-color)] hover:border-[var(--accent-blue)]/50":"bg-[var(--bg-primary)] border-[var(--border-color)] opacity-50 cursor-not-allowed"}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xl",children:Z.logo}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-medium text-white text-sm truncate",children:Z.name}),l.jsx("div",{className:"text-[10px] text-gray-500 truncate",children:Z.description})]}),ne&&l.jsx(Bl,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),!Z.supported&&l.jsx("span",{className:"text-[8px] text-gray-500",children:"Soon"})]})},Z.id)})}),b&&H&&l.jsxs("div",{className:"space-y-3 p-4 bg-[var(--bg-primary)] rounded-xl border border-[var(--border-color)]",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("span",{className:"text-xl",children:H.logo}),l.jsxs("h3",{className:"font-medium text-white",children:["Connect ",H.name]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 uppercase mb-1 block",children:"API Key"}),l.jsx("input",{type:"text",value:j,onChange:Z=>C(Z.target.value),placeholder:"Enter your API key",className:"w-full px-3 py-2 bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded-lg text-white font-mono text-sm focus:border-[var(--accent-blue)] focus:outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 uppercase mb-1 block",children:"API Secret"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:k?"text":"password",value:w,onChange:Z=>N(Z.target.value),placeholder:"Enter your API secret",className:"w-full px-3 py-2 bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded-lg text-white font-mono text-sm focus:border-[var(--accent-blue)] focus:outline-none pr-16"}),l.jsx("button",{type:"button",onClick:()=>B(!k),className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 hover:text-white",children:k?"Hide":"Show"})]})]}),l.jsxs("div",{className:"flex items-start gap-2 p-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:[l.jsx(nl,{className:"w-4 h-4 text-yellow-400 flex-shrink-0 mt-0.5"}),l.jsx("p",{className:"text-[10px] text-yellow-400/80 leading-relaxed",children:"Only use API keys with trading permissions. Never share your secret key. We encrypt all credentials."})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>v(null),className:"flex-1 py-2 bg-[var(--bg-secondary)] text-gray-400 hover:text-white rounded-lg transition-colors",children:"Cancel"}),l.jsx("button",{onClick:E,disabled:!j||!w,className:"flex-1 py-2 bg-[var(--accent-blue)] text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:bg-[var(--accent-blue)]/80 transition-colors",children:"Connect"})]}),l.jsxs("a",{href:`https://${b}.com/api-management`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-1 text-xs text-[var(--accent-blue)] hover:underline",children:["Get API keys from ",H.name,l.jsx(Kg,{className:"w-3 h-3"})]})]})]})]})]})},Jn=[{id:"welcome",title:"Welcome to TradeVision AI",description:"Your intelligent trading companion. Let us show you around the key features.",icon:l.jsx(Zc,{className:"w-8 h-8 text-[var(--accent-blue)]"})},{id:"chart",title:"Interactive Charts",description:"Real-time price data from Binance. Zoom, pan, and analyze with professional-grade charts.",icon:l.jsx(wa,{className:"w-8 h-8 text-green-400"})},{id:"drawing",title:"Drawing Tools",description:"Use the left toolbar to draw trendlines, support/resistance levels, and more. Save as templates for quick reuse.",icon:l.jsx("svg",{className:"w-8 h-8 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})},{id:"alerts",title:"Price Alerts",description:"Set alerts for any price level. Get notified via push notifications when prices cross your targets.",icon:l.jsx(Ps,{className:"w-8 h-8 text-yellow-400"})},{id:"ai",title:"AI Assistant",description:"Get AI-powered market analysis, support/resistance detection, and trading insights.",icon:l.jsx(Zc,{className:"w-8 h-8 text-blue-400"})},{id:"journal",title:"Trading Journal",description:"Log your trades, track P&L, and review your trading history to improve your strategy.",icon:l.jsx(Wm,{className:"w-8 h-8 text-cyan-400"})},{id:"orderbook",title:"Order Book",description:"View live market depth with bids and asks to understand market liquidity.",icon:l.jsx(Yc,{className:"w-8 h-8 text-orange-400"})},{id:"shortcuts",title:"Keyboard Shortcuts",description:'Press "?" or "Shift+/" anytime to see all available keyboard shortcuts for faster navigation.',icon:l.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}],V0="tv_onboarding_completed",i1=()=>localStorage.getItem(V0)==="true",Om=()=>{localStorage.setItem(V0,"true")},r1=({isOpen:u,onClose:n,onComplete:o})=>{const[r,d]=y.useState(0),[f,m]=y.useState(!1);if(y.useEffect(()=>{u&&d(0)},[u]),!u)return null;const p=Jn[r],x=r===0,b=r===Jn.length-1,v=()=>{b?(Om(),o(),n()):(m(!0),setTimeout(()=>{d(w=>w+1),m(!1)},150))},j=()=>{x||(m(!0),setTimeout(()=>{d(w=>w-1),m(!1)},150))},C=()=>{Om(),n()};return l.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-gradient-to-br from-[#1a1a2e] to-[#16213e] border border-[var(--accent-blue)]/30 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-fade-in",children:[l.jsx("div",{className:"h-1 bg-[var(--bg-primary)]",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-[var(--accent-blue)] to-purple-500 transition-all duration-300",style:{width:`${(r+1)/Jn.length*100}%`}})}),l.jsxs("div",{className:"flex items-center justify-between px-6 pt-4",children:[l.jsxs("span",{className:"text-xs text-gray-500",children:["Step ",r+1," of ",Jn.length]}),l.jsx("button",{onClick:C,className:"text-xs text-gray-500 hover:text-white transition-colors",children:"Skip Tutorial"})]}),l.jsxs("div",{className:`p-8 text-center transition-opacity duration-150 ${f?"opacity-0":"opacity-100"}`,children:[l.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-[var(--bg-primary)] rounded-2xl flex items-center justify-center shadow-lg",children:p.icon}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:p.title}),l.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:p.description})]}),l.jsx("div",{className:"flex justify-center gap-2 pb-4",children:Jn.map((w,N)=>l.jsx("button",{onClick:()=>d(N),className:`w-2 h-2 rounded-full transition-all duration-300 ${N===r?"w-6 bg-[var(--accent-blue)]":N<r?"bg-green-500":"bg-gray-600"}`,"aria-label":`Go to step ${N+1}`},N))}),l.jsxs("div",{className:"flex items-center justify-between px-6 pb-6",children:[l.jsxs("button",{onClick:j,disabled:x,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${x?"opacity-0 cursor-default":"text-gray-400 hover:text-white hover:bg-[var(--bg-primary)]"}`,children:[l.jsx(Pm,{className:"w-4 h-4"}),"Back"]}),l.jsx("button",{onClick:v,className:`flex items-center gap-2 px-6 py-2.5 rounded-lg text-sm font-medium transition-all ${b?"bg-green-600 hover:bg-green-700 text-white":"bg-[var(--accent-blue)] hover:bg-blue-600 text-white"}`,children:b?l.jsxs(l.Fragment,{children:[l.jsx(Bl,{className:"w-4 h-4"}),"Get Started"]}):l.jsxs(l.Fragment,{children:["Next",l.jsx(pg,{className:"w-4 h-4"})]})})]})]})})},Bm="tv_portfolio",_m="tv_trade_history",Lm="tv_portfolio_snapshots",Um="tv_portfolio_config";class o1{constructor(){this.assets=new Map,this.positions=new Map,this.trades=[],this.snapshots=[],this.cashBalance=0,this.config=this.loadConfig(),this.loadData()}addAsset(n){const o=this.assets.get(n.symbol);if(o){const r=o.quantity+n.quantity,d=o.quantity*o.avgCost+n.quantity*n.avgCost;o.quantity=r,o.avgCost=d/r,o.currentPrice=n.currentPrice,o.lastUpdated=Date.now()}else{const r={...n,value:n.quantity*n.currentPrice,pnl:(n.currentPrice-n.avgCost)*n.quantity,pnlPercent:(n.currentPrice-n.avgCost)/n.avgCost*100,allocation:0,lastUpdated:Date.now()};this.assets.set(n.symbol,r)}this.recalculateAllocations(),this.saveData()}removeAsset(n){const o=this.assets.delete(n);return o&&(this.recalculateAllocations(),this.saveData()),o}updatePrices(n){for(const[o,r]of Object.entries(n)){const d=this.assets.get(o);d&&(d.currentPrice=r,d.value=d.quantity*r,d.pnl=(r-d.avgCost)*d.quantity,d.pnlPercent=(r-d.avgCost)/d.avgCost*100,d.lastUpdated=Date.now());const f=this.positions.get(o);f&&(f.currentPrice=r,this.updatePositionPnl(f))}this.recalculateAllocations(),this.saveData()}getAssets(){return Array.from(this.assets.values())}openPosition(n){const o={...n,id:crypto.randomUUID(),unrealizedPnl:0,unrealizedPnlPercent:0};return this.updatePositionPnl(o),this.positions.set(o.id,o),this.saveData(),o}closePosition(n,o){const r=this.positions.get(n);if(!r)return null;const d=r.side==="long"?(o-r.entryPrice)*r.quantity*r.leverage:(r.entryPrice-o)*r.quantity*r.leverage,f={id:crypto.randomUUID(),symbol:r.symbol,side:r.side==="long"?"sell":"buy",price:o,quantity:r.quantity,total:o*r.quantity,fee:0,timestamp:Date.now(),exchange:r.exchange,notes:`Closed ${r.side} position. PnL: ${d.toFixed(2)}`};return this.trades.push(f),this.positions.delete(n),this.cashBalance+=d+r.margin,this.saveData(),f}updatePositionLevels(n,o,r){const d=this.positions.get(n);return d?(o!==void 0&&(d.stopLoss=o),r!==void 0&&(d.takeProfit=r),this.saveData(),d):null}getPositions(){return Array.from(this.positions.values())}recordTrade(n){const o={...n,id:crypto.randomUUID()};if(this.trades.push(o),n.side==="buy")this.addAsset({symbol:n.symbol,name:n.symbol,quantity:n.quantity,avgCost:n.price,currentPrice:n.price,exchange:n.exchange,lastUpdated:n.timestamp});else{const r=this.assets.get(n.symbol);r&&(r.quantity-=n.quantity,r.quantity<=0&&this.assets.delete(n.symbol))}return this.saveData(),o}getTradeHistory(n){let o=[...this.trades];return n!=null&&n.symbol&&(o=o.filter(r=>r.symbol===n.symbol)),n!=null&&n.startDate&&(o=o.filter(r=>r.timestamp>=n.startDate)),n!=null&&n.endDate&&(o=o.filter(r=>r.timestamp<=n.endDate)),o.sort((r,d)=>d.timestamp-r.timestamp),n!=null&&n.limit&&(o=o.slice(0,n.limit)),o}calculateMetrics(){const n=this.getAssets(),o=this.getPositions(),r=n.reduce((W,F)=>W+F.value,0),d=o.reduce((W,F)=>W+F.margin+F.unrealizedPnl,0),f=r+d+this.cashBalance,m=n.reduce((W,F)=>W+F.avgCost*F.quantity,0),p=f-m-this.cashBalance,x=m>0?p/m*100:0,b=this.calculatePeriodPnl(1440*60*1e3),v=this.calculatePeriodPnl(10080*60*1e3),j=this.calculatePeriodPnl(720*60*60*1e3),C=this.calculatePeriodPnl(365*24*60*60*1e3),w=this.calculateDailyReturns(),N=this.calculateVolatility(w),k=this.calculateSharpeRatio(w,N),B=this.calculateSortinoRatio(w),{maxDrawdown:E,currentDrawdown:H}=this.calculateDrawdown(),Z=this.calculateVaR(w,.95),ne=this.calculateVaR(w,.99),re=n.sort((W,F)=>F.allocation-W.allocation).slice(0,5).map(W=>({symbol:W.symbol,allocation:W.allocation})),Y=this.calculateExchangeBreakdown(n);return{totalValue:f,totalCost:m,totalPnl:p,totalPnlPercent:x,dayPnl:b.pnl,dayPnlPercent:b.percent,weekPnl:v.pnl,monthPnl:j.pnl,yearPnl:C.pnl,allTimePnl:p,sharpeRatio:k,sortinoRatio:B,maxDrawdown:E,currentDrawdown:H,beta:1,alpha:0,volatility:N,valueAtRisk95:Z,valueAtRisk99:ne,topHoldings:re,assetTypeBreakdown:[{type:"Crypto",allocation:100}],exchangeBreakdown:Y}}takeSnapshot(){const n=this.getAssets(),o={timestamp:Date.now(),totalValue:n.reduce((d,f)=>d+f.value,0)+this.cashBalance,cash:this.cashBalance,assets:n.map(d=>({symbol:d.symbol,value:d.value}))};this.snapshots.push(o);const r=Date.now()-365*24*60*60*1e3;return this.snapshots=this.snapshots.filter(d=>d.timestamp>r),this.saveSnapshots(),o}getValueHistory(n=30){const o=Date.now()-n*24*60*60*1e3;return this.snapshots.filter(r=>r.timestamp>o).map(r=>({timestamp:r.timestamp,value:r.totalValue}))}deposit(n){this.cashBalance+=n,this.recordTrade({symbol:"CASH",side:"buy",price:1,quantity:n,total:n,fee:0,timestamp:Date.now(),notes:"Deposit"})}withdraw(n){return n>this.cashBalance?!1:(this.cashBalance-=n,this.recordTrade({symbol:"CASH",side:"sell",price:1,quantity:n,total:n,fee:0,timestamp:Date.now(),notes:"Withdrawal"}),!0)}getCashBalance(){return this.cashBalance}updateConfig(n){this.config={...this.config,...n},localStorage.setItem(Um,JSON.stringify(this.config))}getConfig(){return{...this.config}}updatePositionPnl(n){n.side==="long"?n.unrealizedPnl=(n.currentPrice-n.entryPrice)*n.quantity*n.leverage:n.unrealizedPnl=(n.entryPrice-n.currentPrice)*n.quantity*n.leverage,n.unrealizedPnlPercent=n.unrealizedPnl/n.margin*100}recalculateAllocations(){const n=Array.from(this.assets.values()).reduce((o,r)=>o+r.value,0);for(const o of this.assets.values())o.allocation=n>0?o.value/n*100:0}calculatePeriodPnl(n){const o=Date.now()-n,r=this.snapshots.find(p=>p.timestamp<=o);if(!r)return{pnl:0,percent:0};const f=Array.from(this.assets.values()).reduce((p,x)=>p+x.value,0)+this.cashBalance-r.totalValue,m=r.totalValue>0?f/r.totalValue*100:0;return{pnl:f,percent:m}}calculateDailyReturns(){const n=[];for(let o=1;o<this.snapshots.length;o++){const r=this.snapshots[o-1].totalValue,d=this.snapshots[o].totalValue;r>0&&n.push((d-r)/r)}return n}calculateVolatility(n){if(n.length<2)return 0;const o=n.reduce((f,m)=>f+m,0)/n.length,d=n.map(f=>Math.pow(f-o,2)).reduce((f,m)=>f+m,0)/n.length;return Math.sqrt(d*365)*100}calculateSharpeRatio(n,o){return n.length===0||o===0?0:(n.reduce((f,m)=>f+m,0)/n.length*365-this.config.riskFreeRate)/(o/100)}calculateSortinoRatio(n){if(n.length===0)return 0;const o=n.reduce((p,x)=>p+x,0)/n.length,r=n.filter(p=>p<0);if(r.length===0)return 0;const d=r.reduce((p,x)=>p+x*x,0)/r.length,f=Math.sqrt(d*365);return f===0?0:(o*365-this.config.riskFreeRate)/f}calculateDrawdown(){if(this.snapshots.length===0)return{maxDrawdown:0,currentDrawdown:0};let n=this.snapshots[0].totalValue,o=0;for(const f of this.snapshots){f.totalValue>n&&(n=f.totalValue);const m=(n-f.totalValue)/n;o=Math.max(o,m)}const r=Array.from(this.assets.values()).reduce((f,m)=>f+m.value,0)+this.cashBalance,d=n>0?(n-r)/n:0;return{maxDrawdown:o*100,currentDrawdown:Math.max(0,d*100)}}calculateVaR(n,o){if(n.length===0)return 0;const r=[...n].sort((m,p)=>m-p),d=Math.floor((1-o)*r.length),f=Array.from(this.assets.values()).reduce((m,p)=>m+p.value,0)+this.cashBalance;return Math.abs(r[d]||0)*f}calculateExchangeBreakdown(n){const o=new Map;for(const r of n){const d=r.exchange||"Unknown";o.set(d,(o.get(d)||0)+r.value)}return Array.from(o.entries()).map(([r,d])=>({exchange:r,value:d}))}loadData(){var n,o;try{const r=localStorage.getItem(Bm);if(r){const m=JSON.parse(r);(n=m.assets)==null||n.forEach(p=>this.assets.set(p.symbol,p)),(o=m.positions)==null||o.forEach(p=>this.positions.set(p.id,p)),this.cashBalance=m.cashBalance||0}const d=localStorage.getItem(_m);d&&(this.trades=JSON.parse(d));const f=localStorage.getItem(Lm);f&&(this.snapshots=JSON.parse(f))}catch(r){console.error("Failed to load portfolio data:",r)}}saveData(){const n={assets:Array.from(this.assets.values()),positions:Array.from(this.positions.values()),cashBalance:this.cashBalance};localStorage.setItem(Bm,JSON.stringify(n)),localStorage.setItem(_m,JSON.stringify(this.trades))}saveSnapshots(){localStorage.setItem(Lm,JSON.stringify(this.snapshots))}loadConfig(){try{const n=localStorage.getItem(Um);if(n)return JSON.parse(n)}catch{}return{baseCurrency:"USD",trackingMode:"manual",riskFreeRate:.05,benchmarkSymbol:"BTCUSD",rebalanceThreshold:5}}exportData(){return JSON.stringify({assets:Array.from(this.assets.values()),positions:Array.from(this.positions.values()),trades:this.trades,snapshots:this.snapshots,cashBalance:this.cashBalance,config:this.config,exportedAt:Date.now()},null,2)}importData(n){var o,r;try{const d=JSON.parse(n);return this.assets.clear(),this.positions.clear(),(o=d.assets)==null||o.forEach(f=>this.assets.set(f.symbol,f)),(r=d.positions)==null||r.forEach(f=>this.positions.set(f.id,f)),this.trades=d.trades||[],this.snapshots=d.snapshots||[],this.cashBalance=d.cashBalance||0,d.config&&(this.config=d.config),this.saveData(),this.saveSnapshots(),!0}catch(d){return console.error("Failed to import portfolio data:",d),!1}}}const Rm=new o1,H0="tv_audit_log",Vm=1e3;function is(u,n,o){const r=c1(),d={id:crypto.randomUUID(),timestamp:Date.now(),action:u,exchangeId:o,details:n};r.unshift(d),r.length>Vm&&r.splice(Vm),localStorage.setItem(H0,JSON.stringify(r))}function c1(u=100){try{const n=localStorage.getItem(H0);return(n?JSON.parse(n):[]).slice(0,u)}catch{return[]}}const Hm="tv_trading_bots";class u1{constructor(){this.bots=new Map,this.intervals=new Map,this.loadBots()}setOnOrder(n){this.onOrderCallback=n}createDCABot(n,o,r){const d={id:crypto.randomUUID(),name:n,type:"dca",symbol:o,status:"stopped",createdAt:Date.now(),config:r,totalInvested:0,avgBuyPrice:0,totalQuantity:0,stats:this.createEmptyStats(),orders:[]};return this.bots.set(d.id,d),this.saveBots(),is("trade",{action:"create_bot",botType:"dca",botId:d.id}),d}async executeDCABuy(n,o){var x;if(n.config.maxTotalInvestment&&n.totalInvested>=n.config.maxTotalInvestment){this.stopBot(n.id);return}if(n.config.priceThreshold){const{type:b,price:v}=n.config.priceThreshold;if(b==="below"&&o>v||b==="above"&&o<v)return}let r=n.config.investmentAmount;(x=n.config.boostOnDip)!=null&&x.enabled&&n.avgBuyPrice>0&&(n.avgBuyPrice-o)/n.avgBuyPrice*100>=n.config.boostOnDip.dipPercent&&(r*=n.config.boostOnDip.boostMultiplier);const d=r/o,f=this.createOrder(n.id,n.symbol,"buy","market",d);f.status="filled",f.filledPrice=o,f.filledQuantity=d,f.executedAt=Date.now(),n.orders.push(f);const m=n.totalInvested+r,p=n.totalQuantity+d;n.avgBuyPrice=m/p,n.totalInvested=m,n.totalQuantity=p,n.stats.totalTrades++,n.stats.successfulTrades++,n.stats.totalVolume+=r,n.nextBuyTime=this.calculateNextDCATime(n.config),n.lastRunAt=Date.now(),this.saveBots(),this.onOrderCallback&&this.onOrderCallback(f),is("trade",{action:"dca_buy",botId:n.id,amount:r,price:o,quantity:d})}calculateNextDCATime(n){const o=Date.now(),r=3600*1e3;switch(n.frequency){case"hourly":return o+r;case"daily":return o+24*r;case"weekly":return o+168*r;case"biweekly":return o+336*r;case"monthly":return o+720*r;default:return o+(n.customIntervalHours||24)*r}}createGridBot(n,o,r){const d=this.calculateGridLevels(r),f={id:crypto.randomUUID(),name:n,type:"grid",symbol:o,status:"stopped",createdAt:Date.now(),config:r,gridLevels:d,baseAssetHeld:0,quoteAssetHeld:r.totalInvestment,gridProfit:0,stats:this.createEmptyStats(),orders:[]};return this.bots.set(f.id,f),this.saveBots(),is("trade",{action:"create_bot",botType:"grid",botId:f.id}),f}calculateGridLevels(n){const o=[],{upperPrice:r,lowerPrice:d,gridCount:f,totalInvestment:m,mode:p}=n,x=m/f;for(let b=0;b<=f;b++){let v;if(p==="arithmetic")v=d+(r-d)/f*b;else{const j=Math.pow(r/d,1/f);v=d*Math.pow(j,b)}o.push({price:v,side:"buy",quantity:x/v,filled:!1})}return o}processGridBot(n,o){let r=!1;for(const d of n.gridLevels){if(d.side==="buy"&&!d.filled&&o<=d.price){const f=this.createOrder(n.id,n.symbol,"buy","limit",d.quantity,d.price);f.status="filled",f.filledPrice=d.price,f.filledQuantity=d.quantity,f.executedAt=Date.now(),n.orders.push(f),d.filled=!0,d.orderId=f.id,d.side="sell",n.baseAssetHeld+=d.quantity,n.quoteAssetHeld-=d.price*d.quantity,n.stats.totalTrades++,n.stats.successfulTrades++,r=!0,this.onOrderCallback&&this.onOrderCallback(f)}if(d.side==="sell"&&d.filled&&o>=d.price*1.01){const f=d.price*1.01,m=this.createOrder(n.id,n.symbol,"sell","limit",d.quantity,f);m.status="filled",m.filledPrice=f,m.filledQuantity=d.quantity,m.executedAt=Date.now(),n.orders.push(m),d.filled=!1,d.side="buy";const p=(f-d.price)*d.quantity;n.gridProfit+=p,n.baseAssetHeld-=d.quantity,n.quoteAssetHeld+=f*d.quantity,n.stats.totalTrades++,n.stats.successfulTrades++,n.stats.realizedPnl+=p,r=!0,this.onOrderCallback&&this.onOrderCallback(m)}}n.config.takeProfit&&n.gridProfit>=n.config.takeProfit&&this.stopBot(n.id),r&&(n.lastRunAt=Date.now(),this.saveBots())}createSignalBot(n,o,r){const d={id:crypto.randomUUID(),name:n,type:"signal",symbol:o,status:"stopped",createdAt:Date.now(),config:r,activePositions:[],stats:this.createEmptyStats(),orders:[]};return this.bots.set(d.id,d),this.saveBots(),is("trade",{action:"create_bot",botType:"signal",botId:d.id}),d}evaluateSignalBot(n,o,r){if(n.lastSignalTime){const f=n.config.cooldownMinutes*60*1e3;if(Date.now()-n.lastSignalTime<f)return}if(n.activePositions.length>=n.config.maxPositions){this.checkSignalExits(n,o,r);return}if(this.evaluateConditions(n.config.entryConditions,o,r,n.config.conditionLogic)){const f=n.config.positionSize,m=this.createOrder(n.id,n.symbol,"buy","market",f);m.status="filled",m.filledPrice=r,m.filledQuantity=f,m.executedAt=Date.now(),n.orders.push(m),n.activePositions.push({entryPrice:r,quantity:f,entryTime:Date.now(),stopLoss:n.config.stopLoss?r*(1-n.config.stopLoss/100):void 0,takeProfit:n.config.takeProfit?r*(1+n.config.takeProfit/100):void 0}),n.lastSignalTime=Date.now(),n.stats.totalTrades++,n.stats.successfulTrades++,this.saveBots(),this.onOrderCallback&&this.onOrderCallback(m)}this.checkSignalExits(n,o,r)}checkSignalExits(n,o,r){const d=[];for(let f=0;f<n.activePositions.length;f++){const m=n.activePositions[f];if(m.stopLoss&&r<=m.stopLoss){d.push(f);continue}if(m.takeProfit&&r>=m.takeProfit){d.push(f);continue}if(n.config.trailingStop){const x=r*(1-n.config.trailingStop/100);(!m.stopLoss||x>m.stopLoss)&&(m.stopLoss=x)}this.evaluateConditions(n.config.exitConditions,o,r,n.config.conditionLogic)&&d.push(f)}for(const f of d.reverse()){const m=n.activePositions[f],p=(r-m.entryPrice)*m.quantity,x=this.createOrder(n.id,n.symbol,"sell","market",m.quantity);x.status="filled",x.filledPrice=r,x.filledQuantity=m.quantity,x.executedAt=Date.now(),n.orders.push(x),n.activePositions.splice(f,1),n.stats.totalTrades++,n.stats.realizedPnl+=p,p>0&&n.stats.successfulTrades++,this.onOrderCallback&&this.onOrderCallback(x)}d.length>0&&this.saveBots()}evaluateConditions(n,o,r,d){const f=n.map(m=>this.evaluateSingleCondition(m,o,r));return d==="all"?f.every(m=>m):f.some(m=>m)}evaluateSingleCondition(n,o,r){let d,f;switch(n.indicator){case"price":d=r,f=o.length>1?o[o.length-2].close:void 0;break;case"volume":d=o[o.length-1].volume||0;break;case"rsi":const m=n.period||14;if(o.length<m+1)return!1;d=this.calculateRSI(o,m);break;case"sma":case"ema":const p=n.period||20;if(o.length<p)return!1;d=n.indicator==="sma"?this.calculateSMA(o,p):this.calculateEMA(o,p),f=n.indicator==="sma"?this.calculateSMA(o.slice(0,-1),p):this.calculateEMA(o.slice(0,-1),p);break;default:return!1}switch(n.operator){case">":return d>n.value;case"<":return d<n.value;case">=":return d>=n.value;case"<=":return d<=n.value;case"crosses_above":return f!==void 0&&f<=n.value&&d>n.value;case"crosses_below":return f!==void 0&&f>=n.value&&d<n.value;default:return!1}}createTrailingBot(n,o,r){const d={id:crypto.randomUUID(),name:n,type:"trailing",symbol:o,status:"stopped",createdAt:Date.now(),config:r,highestPrice:r.entryPrice,lowestPrice:r.entryPrice,currentStopPrice:r.side==="long"?r.entryPrice*(1-r.trailingPercent/100):r.entryPrice*(1+r.trailingPercent/100),isActivated:!r.activationPercent,stats:this.createEmptyStats(),orders:[]};return this.bots.set(d.id,d),this.saveBots(),d}updateTrailingBot(n,o){!n.isActivated&&n.config.activationPercent&&(n.config.side==="long"?(o-n.config.entryPrice)/n.config.entryPrice*100:(n.config.entryPrice-o)/n.config.entryPrice*100)>=n.config.activationPercent&&(n.isActivated=!0),n.isActivated&&(n.config.side==="long"?(o>n.highestPrice&&(n.highestPrice=o,n.currentStopPrice=o*(1-n.config.trailingPercent/100)),o<=n.currentStopPrice&&this.executeTrailingStop(n,o)):(o<n.lowestPrice&&(n.lowestPrice=o,n.currentStopPrice=o*(1+n.config.trailingPercent/100)),o>=n.currentStopPrice&&this.executeTrailingStop(n,o)),this.saveBots())}executeTrailingStop(n,o){const r=n.config.side==="long"?"sell":"buy",d=this.createOrder(n.id,n.symbol,r,"market",n.config.quantity);d.status="filled",d.filledPrice=o,d.filledQuantity=n.config.quantity,d.executedAt=Date.now();const f=n.config.side==="long"?(o-n.config.entryPrice)*n.config.quantity:(n.config.entryPrice-o)*n.config.quantity;n.orders.push(d),n.stats.totalTrades++,n.stats.realizedPnl=f,f>0&&n.stats.successfulTrades++,this.stopBot(n.id),this.onOrderCallback&&this.onOrderCallback(d),is("trade",{action:"trailing_stop_executed",botId:n.id,price:o,pnl:f})}startBot(n){const o=this.bots.get(n);return o?(o.status="running",o.startedAt=Date.now(),o.stoppedAt=void 0,this.saveBots(),is("trade",{action:"start_bot",botId:n,botType:o.type}),!0):!1}pauseBot(n){const o=this.bots.get(n);return o?(o.status="paused",this.saveBots(),!0):!1}stopBot(n){const o=this.bots.get(n);if(!o)return!1;o.status="stopped",o.stoppedAt=Date.now();const r=this.intervals.get(n);return r&&(clearInterval(r),this.intervals.delete(n)),this.saveBots(),is("trade",{action:"stop_bot",botId:n,botType:o.type}),!0}deleteBot(n){this.stopBot(n);const o=this.bots.delete(n);return o&&this.saveBots(),o}getAllBots(){return Array.from(this.bots.values())}getBot(n){return this.bots.get(n)}onPriceUpdate(n,o,r){for(const d of this.bots.values())if(!(d.symbol!==n||d.status!=="running"))switch(d.type){case"dca":const f=d;(!f.nextBuyTime||Date.now()>=f.nextBuyTime)&&this.executeDCABuy(f,o);break;case"grid":this.processGridBot(d,o);break;case"signal":r&&this.evaluateSignalBot(d,r,o);break;case"trailing":this.updateTrailingBot(d,o);break}}createOrder(n,o,r,d,f,m){return{id:crypto.randomUUID(),botId:n,symbol:o,side:r,type:d,price:m,quantity:f,status:"pending",createdAt:Date.now()}}createEmptyStats(){return{totalTrades:0,successfulTrades:0,failedTrades:0,totalVolume:0,realizedPnl:0,unrealizedPnl:0,winRate:0,avgTradeSize:0,runningTime:0}}calculateSMA(n,o){return n.slice(-o).map(d=>d.close).reduce((d,f)=>d+f,0)/o}calculateEMA(n,o){const r=n.map(m=>m.close),d=2/(o+1);let f=r.slice(0,o).reduce((m,p)=>m+p,0)/o;for(let m=o;m<r.length;m++)f=(r[m]-f)*d+f;return f}calculateRSI(n,o){const r=[];for(let b=1;b<n.length;b++)r.push(n[b].close-n[b-1].close);const d=r.slice(-o).filter(b=>b>0),f=r.slice(-o).filter(b=>b<0).map(b=>Math.abs(b)),m=d.length>0?d.reduce((b,v)=>b+v,0)/o:0,p=f.length>0?f.reduce((b,v)=>b+v,0)/o:0;return p===0?100:100-100/(1+m/p)}loadBots(){try{const n=localStorage.getItem(Hm);n&&JSON.parse(n).forEach(r=>{r.status==="running"&&(r.status="stopped"),this.bots.set(r.id,r)})}catch(n){console.error("Failed to load bots:",n)}}saveBots(){const n=Array.from(this.bots.values());localStorage.setItem(Hm,JSON.stringify(n))}}const Js=new u1,fr="tv_trader_profile",qm="tv_shared_trades",Ym="tv_copy_settings",Gm="tv_following";class d1{constructor(){this.profile=null,this.sharedTrades=[],this.copySettings=[],this.following=[],this.loadData()}saveProfile(n){return this.profile?this.profile={...this.profile,...n}:this.profile={id:crypto.randomUUID(),username:n.username||"trader",displayName:n.displayName||"Trader",joinedAt:Date.now(),isVerified:!1,exchangeVerified:!1,verificationLevel:"none",stats:this.createEmptyStats(),followers:0,following:0,isPublic:!0,allowCopy:!1,badges:[],...n},localStorage.setItem(fr,JSON.stringify(this.profile)),this.profile}getProfile(){return this.profile}updateStats(n){const o=this.calculateStats(n);return this.profile&&(this.profile.stats=o,localStorage.setItem(fr,JSON.stringify(this.profile))),o}calculateStats(n){n.filter(w=>w.side==="sell"||w.side==="buy");let o=0,r=0,d=0;const f=[];for(let w=1;w<n.length;w+=2){const N=n[w-1],k=n[w];if(N&&k&&N.side==="buy"&&k.side==="sell"){const B=(k.price-N.price)*N.quantity;f.push(B),o+=B,B>0?r++:d++}}const m=f.length>0?r/f.length*100:0,p=f.filter(w=>w>0).reduce((w,N)=>w+N,0)/r||0,x=Math.abs(f.filter(w=>w<0).reduce((w,N)=>w+N,0)/d)||0;let b="swing";const v=this.calculateAvgHoldTime(n);v<1?b="scalper":v<24?b="day-trader":v<168?b="swing":v<720?b="position":b="investor";const j=new Map;n.forEach(w=>{j.set(w.symbol,(j.get(w.symbol)||0)+1)});const C=Array.from(j.entries()).sort((w,N)=>N[1]-w[1]).slice(0,3).map(([w])=>w);return{totalTrades:n.length,winningTrades:r,losingTrades:d,winRate:m,totalPnl:o,totalPnlPercent:0,return7d:0,return30d:0,return90d:0,returnAll:0,maxDrawdown:this.calculateMaxDrawdown(f),sharpeRatio:0,sortinoRatio:0,volatility:this.calculateVolatility(f),avgHoldTime:v,avgTradeSize:n.reduce((w,N)=>w+N.total,0)/n.length||0,favoriteAssets:C,tradingFrequency:b,profitFactor:x>0?p/x:0,avgWin:p,avgLoss:x,largestWin:Math.max(...f.filter(w=>w>0),0),largestLoss:Math.abs(Math.min(...f.filter(w=>w<0),0)),lastUpdated:Date.now()}}calculateAvgHoldTime(n){let o=0,r=0;for(let d=1;d<n.length;d+=2){const f=n[d-1],m=n[d];f&&m&&(o+=(m.timestamp-f.timestamp)/(1e3*60*60),r++)}return r>0?o/r:0}calculateMaxDrawdown(n){let o=0,r=0,d=0;for(const f of n){d+=f,d>o&&(o=d);const m=o-d;m>r&&(r=m)}return o>0?r/o*100:0}calculateVolatility(n){if(n.length<2)return 0;const o=n.reduce((d,f)=>d+f,0)/n.length,r=n.reduce((d,f)=>d+Math.pow(f-o,2),0)/n.length;return Math.sqrt(r)}createEmptyStats(){return{totalTrades:0,winningTrades:0,losingTrades:0,winRate:0,totalPnl:0,totalPnlPercent:0,return7d:0,return30d:0,return90d:0,returnAll:0,maxDrawdown:0,sharpeRatio:0,sortinoRatio:0,volatility:0,avgHoldTime:0,avgTradeSize:0,favoriteAssets:[],tradingFrequency:"swing",profitFactor:0,avgWin:0,avgLoss:0,largestWin:0,largestLoss:0,lastUpdated:Date.now()}}shareTrade(n){if(!this.profile)return null;const o={...n,id:crypto.randomUUID(),traderId:this.profile.id,traderName:this.profile.displayName,traderAvatar:this.profile.avatar,likes:0,comments:0,copies:0,createdAt:Date.now()};return this.sharedTrades.unshift(o),this.saveSharedTrades(),o}getSharedTrades(n){let o=[...this.sharedTrades];return n!=null&&n.traderId&&(o=o.filter(r=>r.traderId===n.traderId)),n!=null&&n.symbol&&(o=o.filter(r=>r.symbol===n.symbol)),n!=null&&n.status&&(o=o.filter(r=>r.status===n.status)),o.sort((r,d)=>d.createdAt-r.createdAt),n!=null&&n.limit&&(o=o.slice(0,n.limit)),o}updateSharedTrade(n,o){const r=this.sharedTrades.find(d=>d.id===n);return r?(Object.assign(r,o),this.saveSharedTrades(),r):null}likeTrade(n){const o=this.sharedTrades.find(r=>r.id===n);return o?(o.likes++,this.saveSharedTrades(),!0):!1}deleteSharedTrade(n){const o=this.sharedTrades.findIndex(r=>r.id===n);return o===-1?!1:(this.sharedTrades.splice(o,1),this.saveSharedTrades(),!0)}startCopying(n,o){if(!this.profile)return null;if(this.copySettings.find(f=>f.traderId===n))return this.updateCopySettings(n,o);const d={id:crypto.randomUUID(),traderId:n,followerId:this.profile.id,enabled:!0,copyMode:"proportional",proportionalPercent:10,maxOpenPositions:5,totalCopied:0,totalPnl:0,copiedTrades:[],createdAt:Date.now(),...o};return this.copySettings.push(d),this.saveCopySettings(),d}updateCopySettings(n,o){const r=this.copySettings.find(d=>d.traderId===n);return r?(Object.assign(r,o),this.saveCopySettings(),r):null}stopCopying(n){const o=this.copySettings.findIndex(r=>r.traderId===n);return o===-1?!1:(this.copySettings.splice(o,1),this.saveCopySettings(),!0)}getCopySettings(n){return this.copySettings.find(o=>o.traderId===n)}getAllCopySettings(){return[...this.copySettings]}processCopyTrade(n){const o=this.copySettings.find(f=>f.traderId===n.traderId&&f.enabled);if(!o)return{shouldCopy:!1,reason:"Not following this trader"};if(o.allowedSymbols&&!o.allowedSymbols.includes(n.symbol))return{shouldCopy:!1,reason:"Symbol not in allowed list"};if(o.excludedSymbols&&o.excludedSymbols.includes(n.symbol))return{shouldCopy:!1,reason:"Symbol is excluded"};const r=o.copiedTrades.length;if(o.maxOpenPositions&&r>=o.maxOpenPositions)return{shouldCopy:!1,reason:"Max positions reached"};let d;switch(o.copyMode){case"fixed":d=o.fixedAmount||100;break;case"proportional":d=(o.proportionalPercent||10)*10;break;case"mirror":d=n.entryPrice*1;break;default:d=100}return o.minTradeSize&&d<o.minTradeSize?{shouldCopy:!1,reason:"Trade size below minimum"}:(o.maxTradeSize&&d>o.maxTradeSize&&(d=o.maxTradeSize),o.maxPositionSize&&d>o.maxPositionSize&&(d=o.maxPositionSize),{shouldCopy:!0,amount:d})}recordCopiedTrade(n,o,r){const d=this.copySettings.find(f=>f.traderId===n);d&&(d.copiedTrades.push(o),d.totalCopied++,d.totalPnl+=r,d.lastCopyAt=Date.now(),this.saveCopySettings())}followTrader(n){return this.following.includes(n)?!1:(this.following.push(n),this.saveFollowing(),!0)}unfollowTrader(n){const o=this.following.indexOf(n);return o===-1?!1:(this.following.splice(o,1),this.stopCopying(n),this.saveFollowing(),!0)}isFollowing(n){return this.following.includes(n)}getFollowing(){return[...this.following]}getLeaderboard(n="30d",o="pnlPercent",r=50){const d=this.generateMockLeaderboard(r);return d.sort((f,m)=>{switch(o){case"pnl":return m.trader.stats.totalPnl-f.trader.stats.totalPnl;case"pnlPercent":return m.trader.stats.totalPnlPercent-f.trader.stats.totalPnlPercent;case"winRate":return m.trader.stats.winRate-f.trader.stats.winRate;case"sharpe":return m.trader.stats.sharpeRatio-f.trader.stats.sharpeRatio;case"followers":return m.trader.followers-f.trader.followers;default:return 0}}),d.map((f,m)=>({...f,rank:m+1}))}generateMockLeaderboard(n){const o=["CryptoWhale","TrendMaster","SwingKing","BTCHodler","AlphaTrader","ProfitHunter"];return Array.from({length:n},(r,d)=>({rank:d+1,previousRank:d+Math.floor(Math.random()*5)-2,trader:{id:`trader_${d}`,username:`${o[d%o.length]}${d+1}`,displayName:`${o[d%o.length]} ${d+1}`,joinedAt:Date.now()-Math.random()*365*24*60*60*1e3,isVerified:Math.random()>.7,exchangeVerified:Math.random()>.5,verificationLevel:Math.random()>.8?"pro":Math.random()>.5?"advanced":"basic",stats:{...this.createEmptyStats(),totalTrades:Math.floor(100+Math.random()*900),winRate:50+Math.random()*40,totalPnl:(Math.random()-.3)*5e4,totalPnlPercent:(Math.random()-.3)*200,sharpeRatio:.5+Math.random()*2,maxDrawdown:5+Math.random()*30},followers:Math.floor(Math.random()*1e4),following:Math.floor(Math.random()*100),isPublic:!0,allowCopy:Math.random()>.3,badges:[]},score:100-d*1.5+Math.random()*5,highlighted:d<3}))}awardBadge(n){if(!this.profile||this.profile.badges.some(r=>r.id===n.id))return null;const o={...n,earnedAt:Date.now()};return this.profile.badges.push(o),localStorage.setItem(fr,JSON.stringify(this.profile)),o}checkBadges(n){const o=[];if(n.length>=1){const f=this.awardBadge({id:"first_trade",name:"First Steps",description:"Completed your first trade",icon:"",rarity:"common"});f&&o.push(f)}if(n.length>=100){const f=this.awardBadge({id:"trades_100",name:"Century Club",description:"Completed 100 trades",icon:"",rarity:"rare"});f&&o.push(f)}let r=0,d=0;for(const f of n)f.side==="sell"?(r++,d=Math.max(d,r)):r=0;if(d>=10){const f=this.awardBadge({id:"win_streak_10",name:"Hot Streak",description:"10 winning trades in a row",icon:"",rarity:"epic"});f&&o.push(f)}return o}loadData(){try{const n=localStorage.getItem(fr);n&&(this.profile=JSON.parse(n));const o=localStorage.getItem(qm);o&&(this.sharedTrades=JSON.parse(o));const r=localStorage.getItem(Ym);r&&(this.copySettings=JSON.parse(r));const d=localStorage.getItem(Gm);d&&(this.following=JSON.parse(d))}catch(n){console.error("Failed to load social trading data:",n)}}saveSharedTrades(){localStorage.setItem(qm,JSON.stringify(this.sharedTrades))}saveCopySettings(){localStorage.setItem(Ym,JSON.stringify(this.copySettings))}saveFollowing(){localStorage.setItem(Gm,JSON.stringify(this.following))}}const $m=new d1,f1=[{type:"sma",category:"indicator",name:"SMA",description:"Simple Moving Average",icon:"",parameters:[{name:"period",label:"Period",type:"number",value:20,defaultValue:20,min:1,max:500},{name:"source",label:"Source",type:"select",value:"close",defaultValue:"close",options:[{value:"close",label:"Close"},{value:"open",label:"Open"},{value:"high",label:"High"},{value:"low",label:"Low"},{value:"hl2",label:"HL/2"},{value:"hlc3",label:"HLC/3"},{value:"ohlc4",label:"OHLC/4"}]}],outputs:[{id:"value",label:"Value",type:"number"}]},{type:"ema",category:"indicator",name:"EMA",description:"Exponential Moving Average",icon:"",parameters:[{name:"period",label:"Period",type:"number",value:12,defaultValue:12,min:1,max:500},{name:"source",label:"Source",type:"select",value:"close",defaultValue:"close",options:[{value:"close",label:"Close"},{value:"open",label:"Open"},{value:"high",label:"High"},{value:"low",label:"Low"}]}],outputs:[{id:"value",label:"Value",type:"number"}]},{type:"rsi",category:"indicator",name:"RSI",description:"Relative Strength Index",icon:"",parameters:[{name:"period",label:"Period",type:"number",value:14,defaultValue:14,min:1,max:100}],outputs:[{id:"value",label:"Value",type:"number"},{id:"overbought",label:"Overbought",type:"boolean"},{id:"oversold",label:"Oversold",type:"boolean"}]},{type:"macd",category:"indicator",name:"MACD",description:"Moving Average Convergence Divergence",icon:"",parameters:[{name:"fastPeriod",label:"Fast Period",type:"number",value:12,defaultValue:12,min:1,max:100},{name:"slowPeriod",label:"Slow Period",type:"number",value:26,defaultValue:26,min:1,max:200},{name:"signalPeriod",label:"Signal Period",type:"number",value:9,defaultValue:9,min:1,max:50}],outputs:[{id:"macd",label:"MACD Line",type:"number"},{id:"signal",label:"Signal Line",type:"number"},{id:"histogram",label:"Histogram",type:"number"}]},{type:"bollinger",category:"indicator",name:"Bollinger Bands",description:"Bollinger Bands indicator",icon:"",parameters:[{name:"period",label:"Period",type:"number",value:20,defaultValue:20,min:1,max:200},{name:"stdDev",label:"Std Deviation",type:"number",value:2,defaultValue:2,min:.5,max:5,step:.5}],outputs:[{id:"upper",label:"Upper Band",type:"number"},{id:"middle",label:"Middle Band",type:"number"},{id:"lower",label:"Lower Band",type:"number"}]},{type:"atr",category:"indicator",name:"ATR",description:"Average True Range",icon:"",parameters:[{name:"period",label:"Period",type:"number",value:14,defaultValue:14,min:1,max:100}],outputs:[{id:"value",label:"Value",type:"number"}]},{type:"volume",category:"indicator",name:"Volume",description:"Trading Volume",icon:"",parameters:[{name:"maPeriod",label:"MA Period",type:"number",value:20,defaultValue:20,min:1,max:200}],outputs:[{id:"value",label:"Volume",type:"number"},{id:"ma",label:"Volume MA",type:"number"},{id:"aboveAvg",label:"Above Average",type:"boolean"}]},{type:"stochastic",category:"indicator",name:"Stochastic",description:"Stochastic Oscillator",icon:"",parameters:[{name:"kPeriod",label:"K Period",type:"number",value:14,defaultValue:14,min:1,max:100},{name:"dPeriod",label:"D Period",type:"number",value:3,defaultValue:3,min:1,max:20},{name:"smooth",label:"Smooth",type:"number",value:3,defaultValue:3,min:1,max:20}],outputs:[{id:"k",label:"%K",type:"number"},{id:"d",label:"%D",type:"number"}]},{type:"price",category:"indicator",name:"Price",description:"Current Price Data",icon:"",parameters:[],outputs:[{id:"open",label:"Open",type:"number"},{id:"high",label:"High",type:"number"},{id:"low",label:"Low",type:"number"},{id:"close",label:"Close",type:"number"}]}],h1=[{type:"compare",category:"condition",name:"Compare",description:"Compare two values",icon:"",parameters:[{name:"operator",label:"Operator",type:"select",value:"gt",defaultValue:"gt",options:[{value:"gt",label:">"},{value:"gte",label:">="},{value:"lt",label:"<"},{value:"lte",label:"<="},{value:"eq",label:"=="},{value:"neq",label:"!="}]}],inputs:[{id:"a",label:"Value A",type:"number"},{id:"b",label:"Value B",type:"number"}],outputs:[{id:"result",label:"Result",type:"boolean"}]},{type:"crossover",category:"condition",name:"Crossover",description:"Detect when A crosses above B",icon:"",parameters:[],inputs:[{id:"a",label:"Value A",type:"number"},{id:"b",label:"Value B",type:"number"}],outputs:[{id:"crossUp",label:"Cross Up",type:"boolean"},{id:"crossDown",label:"Cross Down",type:"boolean"}]},{type:"threshold",category:"condition",name:"Threshold",description:"Check if value is above/below threshold",icon:"",parameters:[{name:"threshold",label:"Threshold",type:"number",value:0,defaultValue:0},{name:"direction",label:"Direction",type:"select",value:"above",defaultValue:"above",options:[{value:"above",label:"Above"},{value:"below",label:"Below"},{value:"equals",label:"Equals"}]}],inputs:[{id:"value",label:"Value",type:"number"}],outputs:[{id:"result",label:"Result",type:"boolean"}]},{type:"range",category:"condition",name:"In Range",description:"Check if value is within range",icon:"",parameters:[{name:"min",label:"Min",type:"number",value:0,defaultValue:0},{name:"max",label:"Max",type:"number",value:100,defaultValue:100}],inputs:[{id:"value",label:"Value",type:"number"}],outputs:[{id:"inRange",label:"In Range",type:"boolean"}]}],m1=[{type:"and",category:"logic",name:"AND",description:"All inputs must be true",icon:"",parameters:[],inputs:[{id:"a",label:"Input A",type:"boolean"},{id:"b",label:"Input B",type:"boolean"}],outputs:[{id:"result",label:"Result",type:"boolean"}]},{type:"or",category:"logic",name:"OR",description:"Any input must be true",icon:"",parameters:[],inputs:[{id:"a",label:"Input A",type:"boolean"},{id:"b",label:"Input B",type:"boolean"}],outputs:[{id:"result",label:"Result",type:"boolean"}]},{type:"not",category:"logic",name:"NOT",description:"Invert the input",icon:"",parameters:[],inputs:[{id:"input",label:"Input",type:"boolean"}],outputs:[{id:"result",label:"Result",type:"boolean"}]},{type:"delay",category:"logic",name:"Delay",description:"Delay signal by N bars",icon:"",parameters:[{name:"bars",label:"Bars",type:"number",value:1,defaultValue:1,min:1,max:100}],inputs:[{id:"input",label:"Input",type:"boolean"}],outputs:[{id:"result",label:"Result",type:"boolean"}]},{type:"counter",category:"logic",name:"Counter",description:"Count consecutive true signals",icon:"",parameters:[{name:"minCount",label:"Min Count",type:"number",value:3,defaultValue:3,min:1,max:50}],inputs:[{id:"input",label:"Input",type:"boolean"}],outputs:[{id:"count",label:"Count",type:"number"},{id:"triggered",label:"Triggered",type:"boolean"}]}],p1=[{type:"buy",category:"action",name:"Buy",description:"Open a long position",icon:"",parameters:[{name:"sizeType",label:"Size Type",type:"select",value:"percent",defaultValue:"percent",options:[{value:"percent",label:"Percent of Balance"},{value:"fixed",label:"Fixed Amount"},{value:"units",label:"Units"}]},{name:"size",label:"Size",type:"number",value:10,defaultValue:10,min:.1},{name:"orderType",label:"Order Type",type:"select",value:"market",defaultValue:"market",options:[{value:"market",label:"Market"},{value:"limit",label:"Limit"}]}],inputs:[{id:"trigger",label:"Trigger",type:"boolean"}],outputs:[{id:"executed",label:"Executed",type:"signal"}]},{type:"sell",category:"action",name:"Sell",description:"Open a short position or close long",icon:"",parameters:[{name:"sizeType",label:"Size Type",type:"select",value:"percent",defaultValue:"percent",options:[{value:"percent",label:"Percent of Balance"},{value:"fixed",label:"Fixed Amount"},{value:"units",label:"Units"},{value:"all",label:"Close All"}]},{name:"size",label:"Size",type:"number",value:100,defaultValue:100,min:.1},{name:"orderType",label:"Order Type",type:"select",value:"market",defaultValue:"market",options:[{value:"market",label:"Market"},{value:"limit",label:"Limit"}]}],inputs:[{id:"trigger",label:"Trigger",type:"boolean"}],outputs:[{id:"executed",label:"Executed",type:"signal"}]},{type:"stoploss",category:"action",name:"Stop Loss",description:"Set a stop loss",icon:"",parameters:[{name:"type",label:"Type",type:"select",value:"percent",defaultValue:"percent",options:[{value:"percent",label:"Percent"},{value:"fixed",label:"Fixed Price"},{value:"atr",label:"ATR Multiple"}]},{name:"value",label:"Value",type:"number",value:2,defaultValue:2,min:.1},{name:"trailing",label:"Trailing",type:"boolean",value:!1,defaultValue:!1}],inputs:[{id:"trigger",label:"Trigger",type:"boolean"}],outputs:[{id:"hit",label:"SL Hit",type:"signal"}]},{type:"takeprofit",category:"action",name:"Take Profit",description:"Set a take profit",icon:"",parameters:[{name:"type",label:"Type",type:"select",value:"percent",defaultValue:"percent",options:[{value:"percent",label:"Percent"},{value:"fixed",label:"Fixed Price"},{value:"rr",label:"Risk:Reward Ratio"}]},{name:"value",label:"Value",type:"number",value:5,defaultValue:5,min:.1}],inputs:[{id:"trigger",label:"Trigger",type:"boolean"}],outputs:[{id:"hit",label:"TP Hit",type:"signal"}]},{type:"alert",category:"action",name:"Alert",description:"Send an alert notification",icon:"",parameters:[{name:"message",label:"Message",type:"string",value:"Alert triggered!",defaultValue:"Alert triggered!"},{name:"sound",label:"Play Sound",type:"boolean",value:!0,defaultValue:!0}],inputs:[{id:"trigger",label:"Trigger",type:"boolean"}],outputs:[]}],x1=[{type:"constant",category:"variable",name:"Constant",description:"A fixed numeric value",icon:"",parameters:[{name:"value",label:"Value",type:"number",value:0,defaultValue:0}],inputs:[],outputs:[{id:"value",label:"Value",type:"number"}]},{type:"math",category:"variable",name:"Math",description:"Perform math operations",icon:"",parameters:[{name:"operation",label:"Operation",type:"select",value:"add",defaultValue:"add",options:[{value:"add",label:"Add (+)"},{value:"subtract",label:"Subtract (-)"},{value:"multiply",label:"Multiply ()"},{value:"divide",label:"Divide ()"},{value:"power",label:"Power (^)"},{value:"abs",label:"Absolute"},{value:"sqrt",label:"Square Root"}]}],inputs:[{id:"a",label:"Value A",type:"number"},{id:"b",label:"Value B",type:"number"}],outputs:[{id:"result",label:"Result",type:"number"}]},{type:"minmax",category:"variable",name:"Min/Max",description:"Find min or max of lookback period",icon:"",parameters:[{name:"type",label:"Type",type:"select",value:"max",defaultValue:"max",options:[{value:"max",label:"Maximum"},{value:"min",label:"Minimum"}]},{name:"period",label:"Period",type:"number",value:20,defaultValue:20,min:1,max:500}],inputs:[{id:"value",label:"Value",type:"number"}],outputs:[{id:"result",label:"Result",type:"number"}]}],g1=[...f1,...h1,...m1,...p1,...x1],Xm="tv_strategies";class b1{constructor(){this.strategies=[],this.loadStrategies()}createStrategy(n,o="BTCUSDT",r="1h"){const d={id:crypto.randomUUID(),name:n,description:"",version:1,symbol:o,timeframe:r,blocks:[],connections:[],createdAt:Date.now(),updatedAt:Date.now(),isEnabled:!1};return this.strategies.push(d),this.saveStrategies(),d}getStrategy(n){return this.strategies.find(o=>o.id===n)}getAllStrategies(){return[...this.strategies]}updateStrategy(n,o){const r=this.strategies.find(d=>d.id===n);return r?(Object.assign(r,o,{updatedAt:Date.now()}),this.saveStrategies(),r):null}deleteStrategy(n){const o=this.strategies.findIndex(r=>r.id===n);return o===-1?!1:(this.strategies.splice(o,1),this.saveStrategies(),!0)}duplicateStrategy(n){const o=this.strategies.find(d=>d.id===n);if(!o)return null;const r={...JSON.parse(JSON.stringify(o)),id:crypto.randomUUID(),name:`${o.name} (Copy)`,createdAt:Date.now(),updatedAt:Date.now(),isEnabled:!1};return this.strategies.push(r),this.saveStrategies(),r}addBlock(n,o,r,d){var b,v;const f=this.strategies.find(j=>j.id===n);if(!f)return null;const m=g1.find(j=>j.type===o);if(!m)return null;const p=m,x={...JSON.parse(JSON.stringify(m)),id:crypto.randomUUID(),x:r,y:d,enabled:!0,inputs:((b=p.inputs)==null?void 0:b.map(j=>({...j})))||[],outputs:((v=m.outputs)==null?void 0:v.map(j=>({...j})))||[]};return f.blocks.push(x),f.updatedAt=Date.now(),this.saveStrategies(),x}updateBlock(n,o,r){const d=this.strategies.find(m=>m.id===n);if(!d)return null;const f=d.blocks.find(m=>m.id===o);return f?(Object.assign(f,r),d.updatedAt=Date.now(),this.saveStrategies(),f):null}removeBlock(n,o){const r=this.strategies.find(f=>f.id===n);if(!r)return!1;const d=r.blocks.findIndex(f=>f.id===o);return d===-1?!1:(r.blocks.splice(d,1),r.connections=r.connections.filter(f=>f.fromBlockId!==o&&f.toBlockId!==o),r.updatedAt=Date.now(),this.saveStrategies(),!0)}updateBlockParameter(n,o,r,d){const f=this.strategies.find(x=>x.id===n);if(!f)return!1;const m=f.blocks.find(x=>x.id===o);if(!m)return!1;const p=m.parameters.find(x=>x.name===r);return p?(p.value=d,f.updatedAt=Date.now(),this.saveStrategies(),!0):!1}createConnection(n,o,r,d,f){var w,N;const m=this.strategies.find(k=>k.id===n);if(!m)return null;const p=m.blocks.find(k=>k.id===o),x=m.blocks.find(k=>k.id===d);if(!p||!x)return null;const b=(w=p.outputs)==null?void 0:w.find(k=>k.id===r),v=(N=x.inputs)==null?void 0:N.find(k=>k.id===f);if(!b||!v||b.type!==v.type&&b.type!=="any"&&v.type!=="any")return null;const j=m.connections.findIndex(k=>k.toBlockId===d&&k.toPortId===f);j!==-1&&m.connections.splice(j,1);const C={id:crypto.randomUUID(),fromBlockId:o,fromPortId:r,toBlockId:d,toPortId:f};return v.connectedTo=o,v.connectedPort=r,m.connections.push(C),m.updatedAt=Date.now(),this.saveStrategies(),C}removeConnection(n,o){var p;const r=this.strategies.find(x=>x.id===n);if(!r)return!1;const d=r.connections.findIndex(x=>x.id===o);if(d===-1)return!1;const f=r.connections[d],m=r.blocks.find(x=>x.id===f.toBlockId);if(m){const x=(p=m.inputs)==null?void 0:p.find(b=>b.id===f.toPortId);x&&(x.connectedTo=void 0,x.connectedPort=void 0)}return r.connections.splice(d,1),r.updatedAt=Date.now(),this.saveStrategies(),!0}executeStrategy(n,o){const r=[],d={candles:o,currentIndex:0,symbol:n.symbol,timeframe:n.timeframe,blockOutputs:new Map,previousOutputs:new Map,position:{side:"none",entryPrice:0,size:0},signals:[]},f=this.buildExecutionOrder(n);for(let m=50;m<o.length;m++){d.currentIndex=m,d.previousOutputs=new Map(d.blockOutputs),d.blockOutputs=new Map;for(const p of f){const x=n.blocks.find(v=>v.id===p);if(!x||!x.enabled)continue;const b=this.executeBlock(x,n,d);d.blockOutputs.set(p,b)}for(const p of n.blocks){if(p.category!=="action")continue;if(d.blockOutputs.get(p.id),this.getInputValue(p,"trigger",n,d)){const b=o[m],v=this.createSignalFromBlock(p,b,d);v&&(r.push(v),d.signals.push(v))}}}return r}buildExecutionOrder(n){const o=new Set,r=[],d=f=>{if(o.has(f))return;o.add(f);const m=n.blocks.find(p=>p.id===f);if(m){for(const p of m.inputs||[])p.connectedTo&&d(p.connectedTo);r.push(f)}};for(const f of n.blocks)f.category==="action"&&d(f.id);for(const f of n.blocks)d(f.id);return r}executeBlock(n,o,r){var x,b;const d=new Map,f=r.candles,m=r.currentIndex,p=f[m];switch(n.type){case"price":d.set("open",p.open),d.set("high",p.high),d.set("low",p.low),d.set("close",p.close);break;case"sma":{const v=this.getParamValue(n,"period"),j=this.getParamValue(n,"source")||"close",w=f.slice(m-v+1,m+1).map(N=>this.getCandleValue(N,j)).reduce((N,k)=>N+k,0)/v;d.set("value",w);break}case"ema":{const v=this.getParamValue(n,"period"),j=this.getParamValue(n,"source")||"close",C=2/(v+1);let w=(x=r.previousOutputs.get(n.id))==null?void 0:x.get("value");w===void 0&&(w=f.slice(m-v+1,m+1).map(E=>this.getCandleValue(E,j)).reduce((E,H)=>E+H,0)/v);const k=(this.getCandleValue(p,j)-w)*C+w;d.set("value",k);break}case"rsi":{const v=this.getParamValue(n,"period"),j=f.slice(m-v,m+1).map(H=>H.close);let C=0,w=0;for(let H=1;H<j.length;H++){const Z=j[H]-j[H-1];Z>0?C+=Z:w-=Z}const N=C/v,k=w/v,E=100-100/(1+(k===0?100:N/k));d.set("value",E),d.set("overbought",E>70),d.set("oversold",E<30);break}case"macd":{const v=this.getParamValue(n,"fastPeriod"),j=this.getParamValue(n,"slowPeriod"),C=this.getParamValue(n,"signalPeriod"),w=this.calculateEMA(f.slice(0,m+1).map(H=>H.close),v),N=this.calculateEMA(f.slice(0,m+1).map(H=>H.close),j),k=w-N,B=[];for(let H=j;H<=m;H++){const Z=this.calculateEMA(f.slice(0,H+1).map(re=>re.close),v),ne=this.calculateEMA(f.slice(0,H+1).map(re=>re.close),j);B.push(Z-ne)}const E=this.calculateEMA(B,C);d.set("macd",k),d.set("signal",E),d.set("histogram",k-E);break}case"bollinger":{const v=this.getParamValue(n,"period"),j=this.getParamValue(n,"stdDev"),C=f.slice(m-v+1,m+1).map(B=>B.close),w=C.reduce((B,E)=>B+E,0)/v,N=C.reduce((B,E)=>B+Math.pow(E-w,2),0)/v,k=Math.sqrt(N);d.set("upper",w+k*j),d.set("middle",w),d.set("lower",w-k*j);break}case"atr":{const v=this.getParamValue(n,"period"),j=[];for(let C=m-v+1;C<=m;C++){const w=f[C],N=f[C-1],k=Math.max(w.high-w.low,Math.abs(w.high-N.close),Math.abs(w.low-N.close));j.push(k)}d.set("value",j.reduce((C,w)=>C+w,0)/v);break}case"volume":{const v=this.getParamValue(n,"maPeriod"),C=f.slice(m-v+1,m+1).map(w=>w.volume||0).reduce((w,N)=>w+N,0)/v;d.set("value",p.volume||0),d.set("ma",C),d.set("aboveAvg",(p.volume||0)>C);break}case"compare":{const v=this.getInputValue(n,"a",o,r),j=this.getInputValue(n,"b",o,r),C=this.getParamValue(n,"operator");let w=!1;switch(C){case"gt":w=v>j;break;case"gte":w=v>=j;break;case"lt":w=v<j;break;case"lte":w=v<=j;break;case"eq":w=v===j;break;case"neq":w=v!==j;break}d.set("result",w);break}case"crossover":{const v=this.getInputValue(n,"a",o,r),j=this.getInputValue(n,"b",o,r),C=this.getPreviousInputValue(n,"a",o,r),w=this.getPreviousInputValue(n,"b",o,r);d.set("crossUp",C!==void 0&&w!==void 0&&C<=w&&v>j),d.set("crossDown",C!==void 0&&w!==void 0&&C>=w&&v<j);break}case"threshold":{const v=this.getInputValue(n,"value",o,r),j=this.getParamValue(n,"threshold"),C=this.getParamValue(n,"direction");let w=!1;switch(C){case"above":w=v>j;break;case"below":w=v<j;break;case"equals":w=Math.abs(v-j)<1e-4;break}d.set("result",w);break}case"range":{const v=this.getInputValue(n,"value",o,r),j=this.getParamValue(n,"min"),C=this.getParamValue(n,"max");d.set("inRange",v>=j&&v<=C);break}case"and":{const v=this.getInputValue(n,"a",o,r),j=this.getInputValue(n,"b",o,r);d.set("result",v&&j);break}case"or":{const v=this.getInputValue(n,"a",o,r),j=this.getInputValue(n,"b",o,r);d.set("result",v||j);break}case"not":{const v=this.getInputValue(n,"input",o,r);d.set("result",!v);break}case"counter":{const v=this.getInputValue(n,"input",o,r),j=this.getParamValue(n,"minCount"),C=((b=r.previousOutputs.get(n.id))==null?void 0:b.get("count"))||0,w=v?C+1:0;d.set("count",w),d.set("triggered",w>=j);break}case"constant":d.set("value",this.getParamValue(n,"value"));break;case"math":{const v=this.getInputValue(n,"a",o,r)||0,j=this.getInputValue(n,"b",o,r)||0,C=this.getParamValue(n,"operation");let w=0;switch(C){case"add":w=v+j;break;case"subtract":w=v-j;break;case"multiply":w=v*j;break;case"divide":w=j!==0?v/j:0;break;case"power":w=Math.pow(v,j);break;case"abs":w=Math.abs(v);break;case"sqrt":w=Math.sqrt(v);break}d.set("result",w);break}}return d}getParamValue(n,o){const r=n.parameters.find(d=>d.name===o);return(r==null?void 0:r.value)??(r==null?void 0:r.defaultValue)}getInputValue(n,o,r,d){var p;const f=(p=n.inputs)==null?void 0:p.find(x=>x.id===o);if(!f||!f.connectedTo||!f.connectedPort)return;const m=d.blockOutputs.get(f.connectedTo);return m==null?void 0:m.get(f.connectedPort)}getPreviousInputValue(n,o,r,d){var p;const f=(p=n.inputs)==null?void 0:p.find(x=>x.id===o);if(!f||!f.connectedTo||!f.connectedPort)return;const m=d.previousOutputs.get(f.connectedTo);return m==null?void 0:m.get(f.connectedPort)}getCandleValue(n,o){switch(o){case"open":return n.open;case"high":return n.high;case"low":return n.low;case"close":return n.close;case"hl2":return(n.high+n.low)/2;case"hlc3":return(n.high+n.low+n.close)/3;case"ohlc4":return(n.open+n.high+n.low+n.close)/4;default:return n.close}}calculateEMA(n,o){if(n.length<o)return n[n.length-1]||0;const r=2/(o+1);let d=n.slice(0,o).reduce((f,m)=>f+m,0)/o;for(let f=o;f<n.length;f++)d=(n[f]-d)*r+d;return d}createSignalFromBlock(n,o,r){switch(n.type){case"buy":return{type:"buy",price:o.close,size:this.getParamValue(n,"size"),timestamp:o.time,blockId:n.id};case"sell":return{type:"sell",price:o.close,size:this.getParamValue(n,"size"),timestamp:o.time,blockId:n.id};case"alert":return{type:"alert",price:o.close,message:this.getParamValue(n,"message"),timestamp:o.time,blockId:n.id};default:return null}}exportStrategy(n){const o=this.strategies.find(r=>r.id===n);return o?JSON.stringify(o,null,2):null}importStrategy(n){try{const o=JSON.parse(n),r={...o,id:crypto.randomUUID(),name:`${o.name} (Imported)`,createdAt:Date.now(),updatedAt:Date.now(),isEnabled:!1};return this.strategies.push(r),this.saveStrategies(),r}catch(o){return console.error("Failed to import strategy:",o),null}}getTemplates(){return[{id:"golden_cross",name:"Golden Cross",description:"SMA 50/200 crossover strategy"},{id:"rsi_reversal",name:"RSI Reversal",description:"Buy oversold, sell overbought"},{id:"bollinger_bounce",name:"Bollinger Bounce",description:"Mean reversion at bands"},{id:"macd_momentum",name:"MACD Momentum",description:"MACD histogram momentum"}]}createFromTemplate(n,o){const r=this.createStrategy(o);switch(n){case"golden_cross":const d=this.addBlock(r.id,"sma",100,100);d&&this.updateBlockParameter(r.id,d.id,"period",50);const f=this.addBlock(r.id,"sma",100,200);f&&this.updateBlockParameter(r.id,f.id,"period",200);const m=this.addBlock(r.id,"crossover",300,150),p=this.addBlock(r.id,"buy",500,100),x=this.addBlock(r.id,"sell",500,200);d&&f&&m&&(this.createConnection(r.id,d.id,"value",m.id,"a"),this.createConnection(r.id,f.id,"value",m.id,"b")),m&&p&&this.createConnection(r.id,m.id,"crossUp",p.id,"trigger"),m&&x&&this.createConnection(r.id,m.id,"crossDown",x.id,"trigger");break;case"rsi_reversal":const b=this.addBlock(r.id,"rsi",100,150),v=this.addBlock(r.id,"buy",300,100),j=this.addBlock(r.id,"sell",300,200);b&&v&&this.createConnection(r.id,b.id,"oversold",v.id,"trigger"),b&&j&&this.createConnection(r.id,b.id,"overbought",j.id,"trigger");break}return this.getStrategy(r.id)||null}loadStrategies(){try{const n=localStorage.getItem(Xm);n&&(this.strategies=JSON.parse(n))}catch(n){console.error("Failed to load strategies:",n)}}saveStrategies(){localStorage.setItem(Xm,JSON.stringify(this.strategies))}}const hr=new b1,v1=({isOpen:u,onClose:n,currentPrice:o=0,symbol:r="BTCUSD",paperBalance:d=1e4})=>{const[f,m]=y.useState("portfolio"),[p,x]=y.useState([]),[b,v]=y.useState(null),[j,C]=y.useState([]),[w,N]=y.useState([]),[k,B]=y.useState([]),[E,H]=y.useState(!1),[Z,ne]=y.useState("dca");if(y.useEffect(()=>{if(!u)return;(async()=>{switch(f){case"portfolio":const D=Rm.getAssets();x(D);const te=Rm.calculateMetrics();v(te);break;case"bots":const se=Js.getAllBots();C(se);break;case"social":const I=await $m.getLeaderboard();N(I);break;case"strategy":const pe=hr.getAllStrategies();B(pe);break}})()},[f,u]),!u)return null;const re=[{id:"portfolio",label:"Portfolio",icon:l.jsx(Yc,{className:"h-4 w-4"})},{id:"bots",label:"Trading Bots",icon:l.jsx(ur,{className:"h-4 w-4"})},{id:"social",label:"Social",icon:l.jsx(rm,{className:"h-4 w-4"})},{id:"strategy",label:"Strategies",icon:l.jsx(cm,{className:"h-4 w-4"})}],Y=async()=>{try{if(Z==="dca"){const z=Js.createDCABot(`DCA ${r}`,r,{investmentAmount:100,frequency:"daily"});C(D=>[...D,z])}else if(Z==="grid"){const z=Js.createGridBot(`Grid ${r}`,r,{upperPrice:o*1.1,lowerPrice:o*.9,gridCount:10,totalInvestment:1e3,mode:"arithmetic"});C(D=>[...D,z])}H(!1)}catch(z){console.error("Failed to create bot:",z)}},W=z=>{const D=j.find(te=>te.id===z);D&&(D.status==="running"?Js.pauseBot(z):Js.startBot(z),C(Js.getAllBots()))},F=async z=>{try{$m.startCopying(z,{maxPositionSize:1e3,copyMode:"proportional",proportionalPercent:10}),alert("Now copying this trader!")}catch(D){console.error("Failed to copy trader:",D)}},G=async z=>{try{const D=hr.getStrategy(z);D&&(hr.updateStrategy(z,{isEnabled:!D.isEnabled}),B(hr.getAllStrategies()))}catch(D){console.error("Failed to toggle strategy:",D)}};return l.jsxs("div",{className:"fixed inset-0 z-[200] flex",children:[l.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:n}),l.jsxs("div",{className:"relative ml-auto w-full max-w-2xl bg-[var(--bg-secondary)] border-l border-[var(--border-color)] shadow-2xl flex flex-col animate-slide-in-right",children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-[var(--border-color)]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:l.jsx(rb,{className:"h-5 w-5 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-white",children:"TradeVision Pro"}),l.jsx("p",{className:"text-xs text-gray-400",children:"Advanced Trading Features"})]})]}),l.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-[var(--bg-panel)] transition-colors",children:l.jsx(wt,{className:"h-5 w-5 text-gray-400"})})]}),l.jsx("div",{className:"flex border-b border-[var(--border-color)]",children:re.map(z=>l.jsxs("button",{onClick:()=>m(z.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium transition-colors ${f===z.id?"text-white border-b-2 border-[var(--accent-blue)] bg-[var(--bg-panel)]":"text-gray-400 hover:text-white hover:bg-[var(--bg-panel)]"}`,children:[z.icon,l.jsx("span",{className:"hidden sm:inline",children:z.label})]},z.id))}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[f==="portfolio"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-xl p-4 border border-[var(--border-color)]",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm mb-2",children:[l.jsx(Yg,{className:"h-4 w-4"}),l.jsx("span",{children:"Total Value"})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",((b==null?void 0:b.totalValue)??d).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),l.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-xl p-4 border border-[var(--border-color)]",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm mb-2",children:[l.jsx(wa,{className:"h-4 w-4"}),l.jsx("span",{children:"Total P&L"})]}),l.jsxs("p",{className:`text-2xl font-bold ${((b==null?void 0:b.totalPnl)??0)>=0?"text-[var(--accent-bullish)]":"text-[var(--accent-bearish)]"}`,children:[((b==null?void 0:b.totalPnl)??0)>=0?"+":"",((b==null?void 0:b.totalPnl)??0).toFixed(2),"%"]})]}),l.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-xl p-4 border border-[var(--border-color)]",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm mb-2",children:[l.jsx(fg,{className:"h-4 w-4"}),l.jsx("span",{children:"Sharpe Ratio"})]}),l.jsx("p",{className:"text-2xl font-bold text-white",children:((b==null?void 0:b.sharpeRatio)??0).toFixed(2)})]}),l.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-xl p-4 border border-[var(--border-color)]",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm mb-2",children:[l.jsx(im,{className:"h-4 w-4"}),l.jsx("span",{children:"Max Drawdown"})]}),l.jsxs("p",{className:"text-2xl font-bold text-[var(--accent-bearish)]",children:["-",((b==null?void 0:b.maxDrawdown)??0).toFixed(2),"%"]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-3",children:"Holdings"}),p.length>0?l.jsx("div",{className:"space-y-2",children:p.map(z=>l.jsxs("div",{className:"flex items-center justify-between bg-[var(--bg-panel)] rounded-lg p-3 border border-[var(--border-color)]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-[var(--accent-blue)]/20 flex items-center justify-center",children:l.jsx("span",{className:"text-xs font-bold text-[var(--accent-blue)]",children:z.symbol.slice(0,3)})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-white",children:z.symbol}),l.jsxs("p",{className:"text-xs text-gray-400",children:[z.quantity," units @ $",z.avgCost]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"text-sm font-medium text-white",children:["$",(z.quantity*z.currentPrice).toFixed(2)]}),l.jsxs("p",{className:`text-xs ${z.pnlPercent>=0?"text-[var(--accent-bullish)]":"text-[var(--accent-bearish)]"}`,children:[z.pnlPercent>=0?"+":"",z.pnlPercent.toFixed(2),"%"]})]})]},z.symbol))}):l.jsxs("div",{className:"text-center py-8 text-gray-400",children:[l.jsx(Yc,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),l.jsx("p",{children:"No holdings yet"}),l.jsx("p",{className:"text-sm",children:"Start trading to build your portfolio"})]})]})]}),f==="bots"&&l.jsxs("div",{className:"space-y-6",children:[E?l.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-xl p-4 border border-[var(--border-color)]",children:[l.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"Create New Bot"}),l.jsx("div",{className:"grid grid-cols-2 gap-3 mb-4",children:["dca","grid","signal","trailing"].map(z=>l.jsxs("button",{onClick:()=>ne(z),className:`p-3 rounded-lg border transition-colors ${Z===z?"border-[var(--accent-blue)] bg-[var(--accent-blue)]/10 text-white":"border-[var(--border-color)] text-gray-400 hover:text-white"}`,children:[l.jsx("span",{className:"text-sm font-medium uppercase",children:z}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[z==="dca"&&"Dollar Cost Averaging",z==="grid"&&"Grid Trading",z==="signal"&&"Signal Based",z==="trailing"&&"Trailing Orders"]})]},z))}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:Y,className:"flex-1 py-2 rounded-lg bg-[var(--accent-blue)] text-white font-medium hover:bg-[var(--accent-blue)]/80 transition-colors",children:"Create Bot"}),l.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 rounded-lg border border-[var(--border-color)] text-gray-400 hover:text-white transition-colors",children:"Cancel"})]})]}):l.jsxs("button",{onClick:()=>H(!0),className:"w-full py-3 rounded-xl border-2 border-dashed border-[var(--border-color)] text-gray-400 hover:text-white hover:border-[var(--accent-blue)] transition-colors flex items-center justify-center gap-2",children:[l.jsx(ur,{className:"h-5 w-5"}),l.jsx("span",{children:"Create New Trading Bot"})]}),j.length>0?l.jsx("div",{className:"space-y-3",children:j.map(z=>{var D,te,se,I;return l.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-xl p-4 border border-[var(--border-color)]",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${z.status==="running"?"bg-[var(--accent-bullish)]/20":"bg-gray-600/20"}`,children:l.jsx(ur,{className:`h-5 w-5 ${z.status==="running"?"text-[var(--accent-bullish)]":"text-gray-400"}`})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-white",children:z.name}),l.jsxs("p",{className:"text-xs text-gray-400",children:[z.type.toUpperCase(),"  ",z.symbol]})]})]}),l.jsx("button",{onClick:()=>W(z.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${z.status==="running"?"bg-[var(--accent-bearish)]/20 text-[var(--accent-bearish)] hover:bg-[var(--accent-bearish)]/30":"bg-[var(--accent-bullish)]/20 text-[var(--accent-bullish)] hover:bg-[var(--accent-bullish)]/30"}`,children:z.status==="running"?l.jsxs(l.Fragment,{children:[l.jsx(o0,{className:"h-3 w-3"}),"Stop"]}):l.jsxs(l.Fragment,{children:[l.jsx(c0,{className:"h-3 w-3"}),"Start"]})})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-2",children:[l.jsx("p",{className:"text-xs text-gray-400",children:"Trades"}),l.jsx("p",{className:"text-sm font-medium text-white",children:((D=z.stats)==null?void 0:D.totalTrades)??0})]}),l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-2",children:[l.jsx("p",{className:"text-xs text-gray-400",children:"Win Rate"}),l.jsxs("p",{className:"text-sm font-medium text-[var(--accent-bullish)]",children:[((((te=z.stats)==null?void 0:te.winRate)??0)*100).toFixed(1),"%"]})]}),l.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-2",children:[l.jsx("p",{className:"text-xs text-gray-400",children:"P&L"}),l.jsxs("p",{className:`text-sm font-medium ${(((se=z.stats)==null?void 0:se.realizedPnl)??0)>=0?"text-[var(--accent-bullish)]":"text-[var(--accent-bearish)]"}`,children:["$",(((I=z.stats)==null?void 0:I.realizedPnl)??0).toFixed(2)]})]})]})]},z.id)})}):!E&&l.jsxs("div",{className:"text-center py-8 text-gray-400",children:[l.jsx(ur,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),l.jsx("p",{children:"No trading bots configured"}),l.jsx("p",{className:"text-sm",children:"Create a bot to automate your trading"})]})]}),f==="social"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-400",children:"Top Traders Leaderboard"}),l.jsxs("select",{className:"bg-[var(--bg-panel)] border border-[var(--border-color)] rounded-lg px-3 py-1.5 text-sm text-white",children:[l.jsx("option",{value:"week",children:"This Week"}),l.jsx("option",{value:"month",children:"This Month"}),l.jsx("option",{value:"all",children:"All Time"})]})]}),w.length>0?l.jsx("div",{className:"space-y-3",children:w.map((z,D)=>l.jsx("div",{className:"bg-[var(--bg-panel)] rounded-xl p-4 border border-[var(--border-color)]",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${D===0?"bg-yellow-500/20 text-yellow-500":D===1?"bg-gray-300/20 text-gray-300":D===2?"bg-orange-500/20 text-orange-500":"bg-gray-600/20 text-gray-400"}`,children:["#",z.rank]}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-sm font-medium text-white",children:z.trader.displayName||z.trader.username}),z.trader.isVerified&&l.jsx(Og,{className:"h-4 w-4 text-[var(--accent-blue)]"})]}),l.jsxs("p",{className:"text-xs text-gray-400",children:[z.trader.followers," followers  ",z.trader.stats.totalTrades," trades"]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:`text-lg font-bold ${z.trader.stats.totalPnlPercent>=0?"text-[var(--accent-bullish)]":"text-[var(--accent-bearish)]"}`,children:[z.trader.stats.totalPnlPercent>=0?"+":"",z.trader.stats.totalPnlPercent.toFixed(1),"%"]}),l.jsxs("p",{className:"text-xs text-gray-400",children:[(z.trader.stats.winRate*100).toFixed(0),"% win rate"]})]}),l.jsx("button",{onClick:()=>F(z.trader.id),className:"px-3 py-1.5 rounded-lg bg-[var(--accent-blue)]/20 text-[var(--accent-blue)] text-sm font-medium hover:bg-[var(--accent-blue)]/30 transition-colors",children:"Copy"})]})},z.trader.id))}):l.jsxs("div",{className:"text-center py-8 text-gray-400",children:[l.jsx(rm,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),l.jsx("p",{children:"No leaderboard data available"}),l.jsx("p",{className:"text-sm",children:"Check back soon for top traders"})]})]}),f==="strategy"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-gradient-to-r from-purple-500/20 to-blue-500/20 rounded-xl p-4 border border-purple-500/30",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(cm,{className:"h-5 w-5 text-purple-400"}),l.jsx("h3",{className:"text-sm font-medium text-white",children:"Strategy Builder"})]}),l.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Create custom trading strategies using our visual builder or choose from templates"}),l.jsx("button",{className:"px-4 py-2 rounded-lg bg-purple-500/20 text-purple-400 text-sm font-medium hover:bg-purple-500/30 transition-colors border border-purple-500/30",children:"Open Visual Builder"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-3",children:"Your Strategies"}),l.jsx("div",{className:"space-y-3",children:k.length>0?k.map(z=>l.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-xl p-4 border border-[var(--border-color)]",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h4",{className:"text-sm font-medium text-white",children:z.name}),l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${z.isEnabled?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:z.isEnabled?"ACTIVE":"INACTIVE"})]}),l.jsx("button",{onClick:()=>G(z.id),className:"px-3 py-1 rounded-lg bg-[var(--accent-bullish)]/20 text-[var(--accent-bullish)] text-xs font-medium hover:bg-[var(--accent-bullish)]/30 transition-colors",children:z.isEnabled?"Disable":"Activate"})]}),l.jsx("p",{className:"text-xs text-gray-400 mb-2",children:z.description}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("span",{className:"px-2 py-0.5 rounded bg-[var(--bg-primary)] text-xs text-gray-400",children:z.symbol}),l.jsx("span",{className:"px-2 py-0.5 rounded bg-[var(--bg-primary)] text-xs text-gray-400",children:z.timeframe}),l.jsxs("span",{className:"px-2 py-0.5 rounded bg-[var(--bg-primary)] text-xs text-gray-400",children:[z.blocks.length," blocks"]})]})]},z.id)):l.jsx(l.Fragment,{children:[{name:"Golden Cross",risk:"medium",desc:"MA 50/200 crossover strategy",indicators:["SMA 50","SMA 200"]},{name:"RSI Reversal",risk:"high",desc:"Overbought/oversold reversals",indicators:["RSI 14","Volume"]},{name:"MACD Momentum",risk:"medium",desc:"Trend following with MACD",indicators:["MACD","EMA 20"]},{name:"Bollinger Breakout",risk:"high",desc:"Volatility breakout strategy",indicators:["BB 20","Volume"]}].map((z,D)=>l.jsxs("div",{className:"bg-[var(--bg-panel)] rounded-xl p-4 border border-[var(--border-color)]",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h4",{className:"text-sm font-medium text-white",children:z.name}),l.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${z.risk==="low"?"bg-green-500/20 text-green-400":z.risk==="medium"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:z.risk.toUpperCase()})]}),l.jsx("button",{className:"px-3 py-1 rounded-lg bg-[var(--accent-bullish)]/20 text-[var(--accent-bullish)] text-xs font-medium hover:bg-[var(--accent-bullish)]/30 transition-colors",children:"Activate"})]}),l.jsx("p",{className:"text-xs text-gray-400 mb-2",children:z.desc}),l.jsx("div",{className:"flex gap-2",children:z.indicators.map(te=>l.jsx("span",{className:"px-2 py-0.5 rounded bg-[var(--bg-primary)] text-xs text-gray-400",children:te},te))})]},D))})})]})]})]}),l.jsx("div",{className:"px-6 py-4 border-t border-[var(--border-color)] bg-[var(--bg-panel)]",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[l.jsx(im,{className:"h-4 w-4"}),l.jsx("span",{children:"Paper Trading Mode Active"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[l.jsx(a0,{className:"h-4 w-4"}),l.jsx("span",{children:"Last updated: just now"})]})]})})]})]})},y1={light:10,medium:25,heavy:50,success:[30,50,30],warning:[50,30,50],error:[100,50,100],selection:15};function w1(){const u=typeof navigator<"u"&&"vibrate"in navigator,n=y.useCallback((m="light")=>{if(!u)return!1;try{const p=y1[m];return navigator.vibrate(p),!0}catch{return!1}},[u]),o=y.useCallback((m="medium")=>n(m),[n]),r=y.useCallback((m="success")=>n(m),[n]),d=y.useCallback(()=>n("selection"),[n]),f=y.useCallback(m=>{if(!u)return!1;try{return navigator.vibrate(m),!0}catch{return!1}},[u]);return{isSupported:u,trigger:n,impact:o,notification:r,selection:d,custom:f}}const j1=()=>{const{user:u,isAuthenticated:n,isLoading:o}=mu(),r=w1(),{theme:d,resolvedTheme:f,setTheme:m}=x0();y.useEffect(()=>{const V=d==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":d;document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(V)},[d]);const[p,x]=y.useState("standard"),[b,v]=y.useState("BTCUSD"),[j,C]=y.useState("1D"),[w,N]=y.useState("Candlestick"),[k,B]=y.useState([]),[E,H]=y.useState([]),[Z,ne]=y.useState(!1),[re,Y]=y.useState(null),[W,F]=y.useState(null);y.useRef({});const G=y.useRef({}),z=y.useRef(null),[D,te]=y.useState("cursor"),[se,I]=y.useState([]),[pe,U]=y.useState([{id:"1",type:"SMA",period:20,color:"#FF9800",active:!1},{id:"2",type:"EMA",period:50,color:"#2962FF",active:!1},{id:"3",type:"RSI",period:14,color:"#E91E63",active:!1}]),[ae,ce]=y.useState({volumeProfile:{enabled:!1,rowCount:24,valueAreaPercent:70,pocColor:"#FFD700",valueAreaColor:"#3B82F6",volumeColor:"#6B7280"},vwap:{enabled:!1,color:"#8B5CF6"},bollinger:{enabled:!1,period:20,stdDev:2,color:"#10B981"},volume:{enabled:!0,upColor:"#22C55E",downColor:"#EF4444"}}),[de,we]=y.useState(!1),[De,je]=y.useState(!1),[Ne,be]=y.useState(0),[at,ee]=y.useState(1),[xe,Se]=y.useState("00:00"),[Qe,ye]=y.useState([]),[ta,aa]=y.useState(!1),[Ma,At]=y.useState(new Set),[Dt,Ze]=y.useState(null),[Ll,ma]=y.useState(!1),[Aa,Ta]=y.useState(!1),[la,Da]=y.useState([]),[Ea,ft]=y.useState(!1),il=zy(),[Ul,rl]=y.useState(!1),[za,cs]=y.useState("login"),[Rl,Oa]=y.useState(!1),[us,$t]=y.useState(!1),[pt,Xt]=y.useState(!0),[jt,Vl]=y.useState(!1),[ds,Hl]=y.useState(!1),[Ba,_a]=y.useState(!1),[La,Qt]=y.useState(!1),[Ua,pa]=y.useState(!1),[fs,ol]=y.useState(!1),[O,A]=y.useState("buy"),[X,ie]=y.useState(!1),[J,le]=y.useState(!0),[he,qe]=y.useState(1e4),[Te,lt]=y.useState([]),[Ye,Ce]=y.useState([]),[Pe,ot]=y.useState([]),[Bt,ja]=y.useState("paper"),[Ws,ql]=y.useState(500),[Tt,Zt]=y.useState([{symbol:"BTCUSD",price:0,change:0},{symbol:"ETHUSD",price:0,change:0},{symbol:"SOLUSD",price:0,change:0},{symbol:"XRPUSD",price:0,change:0},{symbol:"BNBUSD",price:0,change:0},{symbol:"ADAUSD",price:0,change:0},{symbol:"DOGEUSD",price:0,change:0},{symbol:"AVAXUSD",price:0,change:0},{symbol:"LINKUSD",price:0,change:0},{symbol:"DOTUSD",price:0,change:0}]),sa=y.useMemo(()=>[{symbol:"BTCUSD",amount:.52,avgPrice:45e3,entryTime:Math.floor(Date.now()/1e3)-86400*7},{symbol:"ETHUSD",amount:3.1,avgPrice:2800,entryTime:Math.floor(Date.now()/1e3)-86400*14},{symbol:"SOLUSD",amount:150,avgPrice:85,entryTime:Math.floor(Date.now()/1e3)-86400*3}],[]),[xa,Ge]=y.useState(null);y.useEffect(()=>{const V=localStorage.getItem("tv_drawings");V&&(G.current=JSON.parse(V));const K=localStorage.getItem("tv_alerts");K&&ye(JSON.parse(K));const oe=localStorage.getItem("tv_indicators");oe&&U(JSON.parse(oe));const ke=localStorage.getItem("tv_chart_indicators");ke&&ce(JSON.parse(ke)),Oy()&&setTimeout(()=>ft(!0),3e3),i1()||setTimeout(()=>Qt(!0),1e3)},[]);const ct=()=>{const V=new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3");V.volume=.5,V.play().catch(K=>console.log("Audio play failed (interaction required):",K))},Be=()=>{localStorage.setItem("tv_drawings",JSON.stringify(G.current))};y.useEffect(()=>{const V=K=>{if(K.target instanceof HTMLInputElement||K.target instanceof HTMLTextAreaElement)return;const oe=K.key.toLowerCase();if(oe==="/"||K.ctrlKey&&oe==="k"){K.preventDefault(),Oa(!0);return}if(K.ctrlKey&&oe==="s"){K.preventDefault(),Ra();return}if(oe==="?"||K.shiftKey&&oe==="/"){K.preventDefault(),$t($e=>!$e);return}if(oe==="escape"){Oa(!1),$t(!1),aa(!1),te("cursor");return}const ke=["1m","5m","15m","1H","4H","1D"];if(["1","2","3","4","5","6"].includes(oe)){const $e=parseInt(oe)-1;ke[$e]&&C(ke[$e]);return}const Ue={v:"cursor",c:"crosshair",t:"trendline",h:"horizontal",r:"rectangle",f:"fibonacci"};if(Ue[oe]){te(Ue[oe]);return}if(oe==="a"){aa($e=>!$e);return}if(oe==="i"){x($e=>$e==="ai"?"standard":"ai");return}if(oe==="w"){Xt($e=>!$e);return}if(oe===" "&&de){K.preventDefault(),je($e=>!$e);return}};return window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)},[de]),y.useEffect(()=>{const V=Tt.map(oe=>oe.symbol);return Sy(V,oe=>{Zt(ke=>ke.map(Ue=>oe[Ue.symbol]?{...Ue,price:oe[Ue.symbol].price,change:oe[Ue.symbol].change}:Ue))})},[]),y.useEffect(()=>{B([]),H([]),I(G.current[b]||[]),Hv();let V,K=!1;return(async()=>{ne(!0),F(null);try{const ke=await jy(b,j);if(K)return;B(ke.data),H(ke.data),Y(ke.source),ke.source==="mock"&&(F(ke.error||"Using simulated data"),Ze({type:"alert",message:` Showing simulated data: ${ke.error||"Could not connect to exchange"}`}));const Ue=b;V=Ny(b,j,$e=>{K||H(Ut=>{if(Ut.length===0)return[$e];const ul=Ut[Ut.length-1];let na;if($e.time===ul.time)na=[...Ut],na[na.length-1]=$e;else if($e.time>ul.time)na=[...Ut,$e];else return Ut;return na})})}catch(ke){K||(console.error("Failed to load data",ke),F("Failed to load data"),Ze({type:"alert",message:"Failed to load live data."}))}finally{K||ne(!1)}})(),()=>{K=!0,V&&V()}},[b,j]),y.useEffect(()=>{const V=setInterval(()=>{const K=Math.floor(Date.now()/1e3),oe=_0(j),ke=K%oe,Ue=oe-ke;if(Ue>=86400){const $e=Math.floor(Ue/86400),Ut=Math.floor(Ue%86400/3600),ul=Math.floor(Ue%3600/60),na=Ue%60;Se(`${$e}d ${Ut}h ${ul}m ${na}s`)}else if(Ue>=3600){const $e=Math.floor(Ue/3600),Ut=Math.floor(Ue%3600/60),ul=Ue%60;Se(`${$e}h ${Ut.toString().padStart(2,"0")}m ${ul.toString().padStart(2,"0")}s`)}else{const $e=Math.floor(Ue/60),Ut=Ue%60;Se(`${$e.toString().padStart(2,"0")}:${Ut.toString().padStart(2,"0")}`)}},1e3);return()=>clearInterval(V)},[j]),y.useEffect(()=>{if(E.length===0)return;const V=E[E.length-1].close;Qe.forEach(K=>{if(K.isActive&&K.symbol===b){if(Ma.has(K.id))return;(K.condition==="above"&&V>=K.targetPrice||K.condition==="below"&&V<=K.targetPrice)&&(At(oe=>new Set(oe).add(K.id)),ye(oe=>oe.map(ke=>ke.id===K.id?{...ke,isActive:!1}:ke)),Ze({type:"alert",message:`Price Alert: ${b} crossed ${K.targetPrice.toFixed(2)}`}),ct(),r.notification("warning"),il.sendAlert(K.symbol,K.targetPrice,V,K.condition))}})},[E,Qe,b,Ma,il,r]);const Ee=y.useMemo(()=>de?k.slice(0,Ne+1):E,[de,k,Ne,E]),tt=Ee.length>0?Ee[Ee.length-1].close:0,ga=y.useMemo(()=>Ee.slice(-150),[Ee]),Ra=()=>{Be(),localStorage.setItem("tv_alerts",JSON.stringify(Qe)),localStorage.setItem("tv_indicators",JSON.stringify(pe)),Ze({type:"success",message:"Workspace Saved Successfully"}),r.notification("success")},wr=y.useCallback(async()=>{if(!z.current){Ze({type:"alert",message:"Chart not ready for screenshot"}),r.notification("error");return}try{await My(z.current,b,j),Ze({type:"success",message:"Chart exported successfully!"}),r.notification("success")}catch(V){console.error("Screenshot failed:",V),Ze({type:"alert",message:"Failed to export chart"}),r.notification("error")}},[b,j,r]),Is=()=>{de?(we(!1),je(!1)):(B([...E]),we(!0),be(Math.floor(E.length*.7)))},Wn=V=>{je(!1),be(K=>Math.min(Math.max(0,K+V),k.length-1))};y.useEffect(()=>{if(!De||!de)return;const V=setInterval(()=>{be(K=>K>=k.length-1?(je(!1),K):K+1)},1e3/at);return()=>clearInterval(V)},[De,de,at,k.length]);const jr=y.useCallback((V,K,oe)=>{Ge({symbol:V,price:K,time:oe}),setTimeout(()=>Ge(null),1e4)},[]),Yl=y.useCallback(V=>{A(V),ol(!0)},[]),hs=y.useCallback(V=>{if(!J&&!n){Ze({message:"Please login to trade with real funds",type:"alert"});return}const K=V.price||tt,oe=V.quantity*K/(V.leverage||1);if(J){if(oe>he){Ze({message:"Insufficient margin",type:"alert"});return}const ke={id:`pos_${Date.now()}`,symbol:V.symbol,side:V.side==="buy"?"long":"short",entryPrice:K,quantity:V.quantity,entryTime:Date.now(),stopLoss:V.stopLoss,takeProfit:V.takeProfit};lt(Ue=>[...Ue,ke]),qe(Ue=>Ue-oe),r.notification("success"),Ze({message:`Position opened: ${V.side.toUpperCase()} ${V.quantity} ${V.symbol}`,type:"success"})}},[J,n,tt,he,r]),Et=y.useCallback((V,K)=>{lt(oe=>oe.map(ke=>ke.id===V?{...ke,...K}:ke))},[]),_t=y.useCallback(V=>{const K=Te.find(oe=>oe.id===V);if(K&&J){const oe=K.side==="long"?(tt-K.entryPrice)*K.quantity:(K.entryPrice-tt)*K.quantity,ke=(tt-K.entryPrice)/K.entryPrice*100*(K.side==="long"?1:-1);Ce(Ue=>[...Ue,{id:K.id,symbol:K.symbol,side:K.side,entryPrice:K.entryPrice,exitPrice:tt,quantity:K.quantity,entryTime:K.entryTime,exitTime:Date.now(),status:"closed",notes:"",tags:[],pnl:oe,pnlPercent:ke}]),qe(Ue=>Ue+K.entryPrice*K.quantity+oe),r.notification("success"),Ze({message:`Position closed: ${oe>=0?"+":""}$${oe.toFixed(2)}`,type:oe>=0?"success":"alert"})}lt(oe=>oe.filter(ke=>ke.id!==V))},[Te,J,tt,r]),In=y.useCallback(V=>{const K=Te.find(oe=>oe.id===V);if(K){const oe=K.side==="long"?tt*.98:tt*1.02;Et(V,{stopLoss:oe})}},[Te,tt,Et]),Nr=y.useCallback(V=>{const K=Te.find(oe=>oe.id===V);if(K){const oe=K.side==="long"?tt*1.04:tt*.96;Et(V,{takeProfit:oe})}},[Te,tt,Et]),en=y.useCallback(V=>{V==="paper"?(le(!0),ja("paper")):(le(!1),ja(V))},[]),ei=y.useCallback((V,K,oe)=>{ot(ke=>[...ke,V]),le(!1),ja(V),r.notification("success"),Ze({message:`Connected to ${V}!`,type:"success"})},[r]),ms=y.useCallback(V=>{ot(K=>K.filter(oe=>oe!==V)),Pe.length<=1&&le(!0),Ze({message:`Disconnected from ${V}`,type:"info"})},[Pe.length]),ti=V=>{const K=[...se,V];I(K),G.current[b]=K,Be()},Lt=(V,K)=>{const oe=se.map(ke=>ke.id===V?{...ke,...K}:ke);I(oe),G.current[b]=oe,Be()},tn=V=>{const K=se.filter(oe=>oe.id!==V);I(K),G.current[b]=K,Be()},an=V=>{if(console.log(" AI Draw Command received:",V),!Ee||Ee.length<5){console.error(" Not enough display data:",Ee==null?void 0:Ee.length);return}const K={lineColor:"#2962ff",lineWidth:2,lineStyle:0,fillColor:"#2962ff",fillOpacity:.2,fillEnabled:!0,showLabel:!0,fontSize:12};let oe;const ke=Ee.length-1,Ue=Math.max(0,Ee.length-30);if(yy(V))console.log(" Drawing horizontal line at:",V.value),oe={id:"ai_h_"+Date.now()+"_"+Math.random().toString(36).substr(2,5),tool:"horizontal",start:{time:Ee[Ue].time,price:V.value},end:{time:Ee[ke].time,price:V.value},value:V.value,style:{...K,lineColor:"#2962ff"}};else if(wy(V)){console.log(" Drawing zone:",V.zoneType,"from",V.priceBottom,"to",V.priceTop);const $e=V.zoneType==="SUPPLY"?"#ef5350":"#26a69a";oe={id:"ai_z_"+Date.now()+"_"+Math.random().toString(36).substr(2,5),tool:"rectangle",start:{time:Ee[Ue].time,price:V.priceTop},end:{time:Ee[ke].time,price:V.priceBottom},style:{...K,lineColor:$e,fillColor:$e,fillOpacity:.25}}}else{console.log(" Unknown command type:",V);return}console.log(" Adding drawing:",oe),ti(oe)},ps=V=>{const K=Ee[Ee.length-1].close,oe={id:Date.now().toString(),symbol:b,targetPrice:V,condition:V>K?"above":"below",isActive:!0};ye([...Qe,oe]),Ze({type:"success",message:`Alert set for ${V.toFixed(2)}`}),D==="alert"&&te("cursor")},cl=y.useMemo(()=>{const V=sa.find(K=>K.symbol===b);if(V&&Ee.length>50)return[{time:Ee[Ee.length-50].time,price:V.avgPrice,text:`BOT BUY: ${V.amount} units @ ${V.avgPrice}`}]},[b,sa,Ee]),Va=V=>{cs(V),rl(!0)};return l.jsxs("div",{className:"h-[100dvh] w-screen flex flex-col bg-[var(--bg-primary)] text-[var(--text-secondary)] overflow-hidden font-inter",children:[Dt&&l.jsx(sy,{message:Dt.message,type:Dt.type,onClose:()=>Ze(null)}),l.jsx(_y,{isVisible:Ea,onEnable:async()=>{await il.requestPermission(),ft(!1),il.permission==="granted"&&Ze({type:"success",message:"Push notifications enabled!"})},onDismiss:()=>{ft(!1),By()}}),l.jsx(fy,{position:"bottom-left",showOnlyWhenOffline:!0}),l.jsx(Dv,{symbol:b,timeframe:j,onTimeframeChange:C,onToggleReplay:Is,isReplayActive:de,chartType:w,onChartTypeChange:N,onSave:Ra,onScreenshot:wr,onSymbolSearch:()=>Oa(!0),isAuthenticated:n,user:u,onLogin:()=>Va("login"),onRegister:()=>Va("register"),onProfileClick:()=>ma(!0)}),l.jsxs("div",{className:"flex flex-1 overflow-hidden relative min-h-0 sm:pb-0 pb-16",children:[l.jsx(rv,{currentMode:p,onModeChange:x,onAlertClick:()=>aa(!0),hasActiveAlerts:Qe.some(V=>V.isActive&&V.symbol===b&&!Ma.has(V.id)),onProfileClick:()=>n?ma(!0):Va("login"),onSettingsClick:()=>Ta(!0),onJournalClick:()=>Hl(!0),onShortcutsClick:()=>$t(!0),onFeaturesClick:()=>pa(!0),isAuthenticated:n}),l.jsx(ty,{isVisible:p==="ai",currentSymbol:b,currentTimeframe:j,currentPrice:tt,chartData:ga,onDrawCommand:an,connectedExchanges:la}),l.jsx(ly,{isVisible:p==="black-swan",portfolio:sa,onSymbolSelect:v,onShowEntry:jr}),l.jsxs("main",{className:"flex flex-1 overflow-hidden relative min-h-0",children:[l.jsx(Ev,{activeTool:D,onToolChange:te,isHidden:p!=="standard",onClearDrawings:()=>{I([]),G.current[b]=[],Be()},onOpenTemplates:()=>Vl(!0)}),l.jsxs("div",{ref:z,className:"flex-1 relative min-w-0 min-h-0 bg-[var(--bg-primary)] pb-[68px]",children:[re==="mock"&&!Z&&l.jsxs("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-40 px-3 py-1.5 bg-yellow-900/90 backdrop-blur-sm border border-yellow-700/50 rounded-full flex items-center gap-2 shadow-lg",children:[l.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),l.jsx("span",{className:"text-yellow-200 text-[10px] font-medium uppercase tracking-wider",children:"Simulated Data"}),l.jsx("button",{onClick:()=>{Y(null),Ze({type:"info",message:"Retrying connection..."});const V=b;v(""),setTimeout(()=>v(V),100)},className:"text-yellow-300 hover:text-white text-[10px] underline ml-1",children:"Retry"})]}),Z&&l.jsx("div",{className:"absolute inset-0 z-50 bg-[var(--bg-primary)]",children:l.jsx(B0,{})}),l.jsx(Xv,{data:Ee,symbol:b,activeTool:D,onAddDrawing:ti,onUpdateDrawing:Lt,onDeleteDrawing:tn,drawings:se,purchaseMarkers:cl,chartType:w,timeLeft:xe,onCreateAlert:ps,alerts:Qe.filter(V=>V.symbol===b&&V.isActive),indicators:pe,entryMarker:xa,chartIndicatorSettings:ae,onToggleIndicator:V=>{const K=pe.map(oe=>oe.id===V?{...oe,active:!oe.active}:oe);U(K),localStorage.setItem("tv_indicators",JSON.stringify(K))},onRemoveIndicator:V=>{const K=pe.filter(oe=>oe.id!==V);U(K),localStorage.setItem("tv_indicators",JSON.stringify(K))},onChartIndicatorToggle:(V,K)=>{const oe={...ae,[V]:{...ae[V],enabled:K}};ce(oe),localStorage.setItem("tv_chart_indicators",JSON.stringify(oe))},onUpdateChartIndicatorSettings:V=>{ce(V),localStorage.setItem("tv_chart_indicators",JSON.stringify(V))},onBuy:()=>Yl("buy"),onSell:()=>Yl("sell"),isPaperMode:J,currentPrice:tt}),p==="standard"&&!de&&l.jsx(ay,{chartData:Ee,symbol:b,timeframe:j,onDrawCommand:an,isVisible:!0}),de&&l.jsx(Qv,{isPlaying:De,onPlayPause:()=>je(!De),onStep:Wn,onExit:Is,progress:Ne,total:k.length,onSeek:be,currentDate:Ee[Ee.length-1]?new Date(Ee[Ee.length-1].time*1e3).toLocaleDateString():"",speed:at,onSpeedChange:ee}),p==="standard"&&Te.filter(V=>V.symbol===b).length>0&&l.jsx(e1,{positions:Te.filter(V=>V.symbol===b),currentPrice:tt,priceRange:{min:Math.min(...Ee.map(V=>V.low))*.995,max:Math.max(...Ee.map(V=>V.high))*1.005},chartHeight:Ws,onUpdatePosition:Et,onClosePosition:_t,onAddStopLoss:In,onAddTakeProfit:Nr}),p==="standard"&&!de&&l.jsx(l1,{currentTimeframe:j,onTimeframeChange:V=>C(V),isPaperMode:J,paperBalance:he,activeExchange:Bt,connectedExchanges:Pe,onSelectExchange:en,onOpenExchangeModal:()=>ie(!0),isAuthenticated:n,onLoginRequired:()=>Va("login")})]}),l.jsxs("div",{className:`hidden sm:flex flex-col flex-shrink-0 ${p!=="standard"||!pt?"w-0 overflow-hidden":"w-[200px]"}`,children:[l.jsx(zv,{items:Tt,currentSymbol:b,onSelect:v,isHidden:p!=="standard"||!pt}),l.jsx(Wy,{symbol:b,currentPrice:tt,isVisible:p==="standard"&&pt})]})]})]}),D!=="cursor"&&l.jsx("div",{className:"sm:hidden fixed bottom-0 left-0 right-0 z-[60]",children:l.jsx(my,{selectedTool:D,onSelectTool:V=>te(V),onDone:()=>te("cursor"),onClearAll:()=>{I([]),G.current[b]=[],Be()}})}),l.jsx("nav",{className:`sm:hidden fixed bottom-0 left-0 right-0 z-50 bg-[var(--bg-secondary)]/95 backdrop-blur-md border-t border-[var(--border-color)] safe-area-bottom transition-transform duration-200 ${D!=="cursor"?"translate-y-full":"translate-y-0"}`,children:l.jsxs("div",{className:"flex items-center justify-around h-16",children:[l.jsxs("button",{onClick:()=>x("standard"),className:`flex-1 h-full flex flex-col items-center justify-center gap-1 transition-colors touch-active ${p==="standard"&&D==="cursor"?"text-[var(--accent-primary)]":"text-[var(--text-secondary)]"}`,children:[l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})}),l.jsx("span",{className:"text-[10px] font-medium",children:"Chart"})]}),l.jsxs("button",{onClick:()=>{x("standard"),te(D==="cursor"?"trendline":"cursor")},className:`flex-1 h-full flex flex-col items-center justify-center gap-1 transition-colors touch-active ${D!=="cursor"?"text-[var(--accent-primary)]":"text-[var(--text-secondary)]"}`,children:[l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),l.jsx("span",{className:"text-[10px] font-medium",children:"Draw"})]}),l.jsxs("button",{onClick:()=>aa(!0),className:`flex-1 h-full flex flex-col items-center justify-center gap-1 transition-colors touch-active relative ${Qe.some(V=>V.isActive)?"text-[var(--accent-green)]":"text-[var(--text-secondary)]"}`,children:[l.jsxs("div",{className:"relative",children:[l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})}),Qe.some(V=>V.isActive)&&l.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 bg-[var(--accent-green)] rounded-full animate-pulse"})]}),l.jsx("span",{className:"text-[10px] font-medium",children:"Alerts"})]}),l.jsxs("button",{onClick:()=>x(p==="ai"?"standard":"ai"),className:`flex-1 h-full flex flex-col items-center justify-center gap-1 transition-colors touch-active ${p==="ai"?"text-[var(--accent-primary)]":"text-[var(--text-secondary)]"}`,children:[l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})}),l.jsx("span",{className:"text-[10px] font-medium",children:"AI"})]}),l.jsxs("button",{onClick:()=>n?ma(!0):Va("login"),className:`flex-1 h-full flex flex-col items-center justify-center gap-1 transition-colors touch-active ${n?"text-[var(--accent-primary)]":"text-[var(--text-secondary)]"}`,children:[l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),l.jsx("span",{className:"text-[10px] font-medium",children:"Profile"})]})]})}),l.jsx(ny,{isOpen:ta,onClose:()=>aa(!1),alerts:Qe.filter(V=>V.symbol===b),currentPrice:tt,symbol:b,onCreateAlert:ps,onDeleteAlert:V=>ye(Qe.filter(K=>K.id!==V)),onPickOnChart:()=>{aa(!1),te("alert"),Ze({type:"info",message:"Click chart to set alert."})}}),l.jsx(ry,{isOpen:Ll,onClose:()=>ma(!1),connectedExchanges:la,onConnect:V=>Da([...la,V]),onDisconnect:V=>Da(la.filter(K=>K.id!==V))}),l.jsx(oy,{isOpen:Ul,onClose:()=>rl(!1),initialMode:za}),l.jsx(Tv,{isOpen:Aa,onClose:()=>Ta(!1)}),l.jsx(cy,{isOpen:Rl,onClose:()=>Oa(!1),onSelect:v,currentSymbol:b}),l.jsx(dy,{isOpen:us,onClose:()=>$t(!1)}),l.jsx(Ry,{isOpen:jt,onClose:()=>Vl(!1),currentDrawings:se,onApplyTemplate:V=>{I([...se,...V]),Be()},onToast:(V,K)=>Ze({message:V,type:K})}),l.jsx(Qy,{isOpen:ds,onClose:()=>Hl(!1),currentSymbol:b,currentPrice:E.length>0?E[E.length-1].close:0,onToast:(V,K)=>Ze({message:V,type:K}),tradeHistory:Ye}),l.jsx(Jy,{isOpen:Ba,onClose:()=>_a(!1),symbol:b,currentPrice:E.length>0?E[E.length-1].close:0}),l.jsx(s1,{isOpen:fs,onClose:()=>ol(!1),symbol:b,currentPrice:tt,side:O,balance:J?he:0,onSubmitOrder:hs,isPaperMode:J}),l.jsx(n1,{isOpen:X,onClose:()=>ie(!1),isAuthenticated:n,onLoginRequired:()=>{ie(!1),Va("login")},onConnect:ei,connectedExchanges:Pe,onDisconnect:ms,onSwitchToPaper:()=>le(!0),isPaperMode:J}),l.jsx(r1,{isOpen:La,onClose:()=>Qt(!1),onComplete:()=>Ze({message:"Welcome to TradeVision AI! ",type:"success"})}),l.jsx(v1,{isOpen:Ua,onClose:()=>pa(!1),currentPrice:tt,symbol:b,paperBalance:he})]})};class N1 extends y.Component{constructor(n){super(n),this.handleReload=()=>{window.location.reload()},this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.handleGoHome=()=>{window.location.href="/"},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,o){this.setState({errorInfo:o})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:l.jsx("div",{className:"min-h-screen bg-[var(--bg-primary)] flex items-center justify-center p-6",children:l.jsxs("div",{className:"max-w-md w-full bg-[var(--bg-secondary)] rounded-2xl border border-[var(--border-color)] p-8 text-center",children:[l.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:l.jsx(nl,{className:"w-8 h-8 text-red-500"})}),l.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:"Something went wrong"}),l.jsx("p",{className:"text-[var(--text-secondary)] text-sm mb-6",children:"TradeVision encountered an unexpected error. Your data has been saved."}),!1,l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[l.jsxs("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-[var(--accent-blue)] hover:bg-[var(--accent-blue)]/80 text-white rounded-lg font-medium transition-colors",children:[l.jsx(_l,{className:"w-4 h-4"}),"Try Again"]}),l.jsxs("button",{onClick:this.handleReload,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-[var(--bg-panel)] hover:bg-[var(--bg-primary)] text-white border border-[var(--border-color)] rounded-lg font-medium transition-colors",children:[l.jsx(sb,{className:"w-4 h-4"}),"Reload App"]})]}),l.jsxs("p",{className:"mt-6 text-xs text-[var(--text-secondary)]",children:["If this keeps happening, please"," ",l.jsx("a",{href:"mailto:support@tradevision.ai",className:"text-[var(--accent-blue)] hover:underline",children:"contact support"})]})]})}):this.props.children}}const Qm=(u,n)=>n,q0=()=>({GEMINI_API_KEY:void 0,ENABLE_AI_FEATURES:Qm(void 0,!0),ENABLE_ANALYTICS:Qm(void 0,!1),BINANCE_API_URL:"https://api.binance.com",BINANCE_WS_URL:"wss://stream.binance.com:9443",APP_NAME:"TradeVision AI",APP_VERSION:"0.0.1",IS_DEV:!1,IS_PROD:!0}),S1=()=>{const u=q0(),n=[],o=[];return o.push("VITE_GEMINI_API_KEY is not set. AI features will be disabled. Get your API key at https://makersuite.google.com/app/apikey"),u.BINANCE_API_URL.startsWith("http")||n.push("VITE_BINANCE_API_URL must be a valid HTTP(S) URL"),u.BINANCE_WS_URL.startsWith("ws")||n.push("VITE_BINANCE_WS_URL must be a valid WebSocket URL"),o.push("Running in production without GEMINI_API_KEY"),{isValid:n.length===0,errors:n,warnings:o}},k1=()=>{const u=S1(),n=q0();console.info(`%c ${n.APP_NAME} v${n.APP_VERSION}`,"font-size: 14px; font-weight: bold; color: #3b82f6;"),console.info("%c   Environment: Production","color: #6b7280;"),u.errors.length>0&&(console.error("%c Environment Errors:","font-weight: bold; color: #ef4444;"),u.errors.forEach(o=>{console.error(`    ${o}`)})),u.warnings.length>0&&(console.warn("%c Environment Warnings:","font-weight: bold; color: #f59e0b;"),u.warnings.forEach(o=>{console.warn(`    ${o}`)})),u.isValid&&u.warnings.length===0&&console.info("%c Environment configured correctly","color: #22c55e;"),console.info("%c Features:","font-weight: bold; color: #8b5cf6;"),console.info("    AI Features:  Disabled"),console.info(`    Analytics: ${n.ENABLE_ANALYTICS?" Enabled":" Disabled"}`)};k1();"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(u=>{console.info("SW registered:",u.scope)}).catch(u=>{console.warn("SW registration failed:",u)})});const Y0=document.getElementById("root");if(!Y0)throw new Error("Could not find root element to mount to");const C1=ng.createRoot(Y0);C1.render(l.jsx(ll.StrictMode,{children:l.jsx(N1,{children:l.jsx(y.Suspense,{fallback:l.jsx(by,{}),children:l.jsx(iy,{children:l.jsx(j1,{})})})})}));
//# sourceMappingURL=index-Qc5XbgiT.js.map
